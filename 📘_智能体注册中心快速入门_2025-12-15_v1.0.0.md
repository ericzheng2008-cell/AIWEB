# 🤖 智能体注册中心快速入门

**版本:** v1.0.0  
**日期:** 2025-12-15  
**状态:** ✅ 第一阶段完成

---

## 🎯 功能概述

**企业级智能体注册中心**是整个智能体管理平台的核心模块,提供:

✨ **核心功能**
- 📋 智能体集中注册与发现
- ⚙️ 配置管理与热更新
- 💊 健康检查与自动恢复
- 📊 性能监控与统计分析
- 🔄 版本管理与依赖追踪
- 📝 交互历史记录
- 🧠 学习记录管理

---

## 🚀 快速开始

### 1. 访问注册中心

```bash
# 启动开发服务器
npm run dev

# 访问后台管理
http://localhost:5173/#/admin/agent-registry
```

### 2. 已注册的智能体

系统已预注册8个核心智能体:

| 智能体名称 | 类型 | 主要能力 |
|-----------|------|---------|
| 🔧 拧紧工具智能选型 | 推荐系统 | 工具推荐、品牌匹配、规格查询 |
| 🛠️ 拧紧工艺改进与验证 | 工艺优化 | 曲线分析、参数优化、故障诊断、工艺验证 |
| 📦 设备全生命周期管理 | 资产管理 | 设备档案、故障追踪、维保管理、备件管理 |
| 📋 工单管理系统 | 流程管理 | 工单创建、工单分配、工单跟踪、SLA管理 |
| 📈 拧紧曲线对比分析 | 数据分析 | 曲线对比、异常检测、趋势分析、报告生成 |
| 🏷️ 品牌型号智能匹配 | 推荐系统 | 品牌匹配、型号识别、替代推荐、价格比较 |
| 📡 拧紧数据采集分析 | 数据采集 | 数据采集、协议解析、实时监控、数据存储 |
| 🤖 安彤自主学习智能体 | 对话AI | 自然语言理解、知识问答、主动学习、个性化推荐 |

### 3. 功能演示

#### 📊 查看统计信息

访问注册中心首页,顶部显示4个关键指标卡片:

```
┌─────────────────┬─────────────────┬─────────────────┬─────────────────┐
│ 总智能体数: 8   │ 运行中: 8       │ 总调用次数: 0   │ 平均可用性: 100%│
└─────────────────┴─────────────────┴─────────────────┴─────────────────┘
```

#### 🔍 查看智能体列表

**全部智能体**标签页显示所有已注册智能体的:
- 名称和ID
- 类型标签
- 运行状态
- 能力列表
- 性能指标(调用次数、成功率、响应时间)
- 可用性百分比

#### 🧪 测试智能体

1. 点击任意智能体的"测试"按钮
2. 填写测试参数:
   - **操作:** 如 `analyze`
   - **数据:** JSON格式,如 `{"curveData": [1, 2, 3]}`
   - **上下文:** 可选
3. 点击"执行测试"
4. 查看测试结果(包含执行时间和返回数据)

示例测试:
```json
// 测试拧紧工具选型智能体
{
  "action": "recommend",
  "data": {
    "torqueRange": "80-120Nm",
    "industry": "汽车",
    "precision": "高"
  }
}

// 预期结果
{
  "success": true,
  "interactionId": "int-1702618800000-abc123",
  "result": {
    "recommendations": [
      {
        "tool": "ETV ST61-100",
        "score": 0.95,
        "reason": "扭矩范围匹配"
      }
    ]
  },
  "duration": 245
}
```

#### 📈 性能监控

切换到**性能监控**标签页查看:

**性能最佳智能体**
- 按成功率和可用性排序
- Top 5智能体排行榜

**类型分布**
- 不同类型智能体的数量占比
- 可视化进度条展示

#### 📝 交互历史

**交互历史**标签页记录所有智能体调用:
- 交互ID(唯一标识)
- 调用的智能体
- 执行的操作
- 状态(成功/失败)
- 耗时(毫秒)
- 调用时间

#### 🧠 学习记录

**学习记录**标签页记录智能体学习活动:
- 记录ID
- 智能体名称
- 学习类型(feedback / retrain / optimization)
- 时间戳
- 详细数据

---

## 💻 代码结构

### Store (数据管理)

**文件:** `src/store/agentRegistry.js`

```javascript
// 核心数据结构
state: {
  agents: [],          // 智能体列表
  interactions: [],    // 交互记录
  learningRecords: [], // 学习记录
  systemConfig: {}     // 系统配置
}

// 核心方法
actions: {
  registerAgent()      // 注册智能体
  invokeAgent()        // 调用智能体
  performHealthCheck() // 健康检查
  submitFeedback()     // 提交反馈
  createLearningRecord() // 创建学习记录
}
```

### 前端页面

**文件:** `src/views/admin/AgentRegistry.vue`

**组件结构:**
```
AgentRegistry
├── 页面头部
│   ├── 标题和描述
│   └── 注册新智能体按钮
├── 统计卡片 (4个)
│   ├── 总智能体数
│   ├── 运行中数量
│   ├── 总调用次数
│   └── 平均可用性
├── 标签页
│   ├── 全部智能体 (表格)
│   ├── 性能监控 (图表)
│   ├── 交互历史 (表格)
│   └── 学习记录 (表格)
└── 对话框
    ├── 智能体详情对话框
    └── 测试智能体对话框
```

---

## 🔧 配置说明

### 智能体配置结构

每个智能体包含以下配置:

```javascript
{
  agentId: "unique-agent-id",        // 唯一标识
  name: "智能体名称",                 // 显示名称
  type: "recommendation",            // 类型
  version: "1.0.0",                  // 版本号
  status: "active",                  // 状态
  capabilities: ["能力1", "能力2"],   // 能力列表
  endpoints: {                       // API端点
    recommend: "/api/..."
  },
  configuration: {                   // 运行配置
    maxConcurrency: 10,              // 最大并发
    timeout: 5000,                   // 超时时间(ms)
    retryPolicy: "exponential",      // 重试策略
    cacheEnabled: true,              // 是否启用缓存
    cacheTTL: 3600                   // 缓存时长(秒)
  },
  dependencies: ["service1"],        // 依赖服务
  metrics: {                         // 性能指标
    totalRequests: 0,
    successfulRequests: 0,
    failedRequests: 0,
    avgResponseTime: 0,
    lastActive: null,
    uptime: 100
  },
  metadata: {                        // 元数据
    description: "描述",
    category: "分类",
    tags: ["标签1"],
    createdAt: "ISO时间",
    updatedAt: "ISO时间"
  }
}
```

### 系统配置

```javascript
systemConfig: {
  enableAutoRecovery: true,         // 自动恢复
  healthCheckInterval: 60000,       // 健康检查间隔(ms)
  metricsCollectionInterval: 300000, // 指标收集间隔(ms)
  maxRetryAttempts: 3,              // 最大重试次数
  enableDistributedTracing: true,   // 分布式追踪
  logLevel: 'info'                  // 日志级别
}
```

---

## 📊 API 使用示例

### 调用智能体

```javascript
import { useAgentRegistryStore } from '@/store/agentRegistry'

const agentStore = useAgentRegistryStore()

// 调用智能体
const result = await agentStore.invokeAgent(
  'tool-selection-agent',  // 智能体ID
  'recommend',             // 操作
  {                        // 数据
    torqueRange: "80-120Nm",
    industry: "汽车"
  },
  {                        // 上下文(可选)
    userId: "user-001",
    sessionId: "session-001"
  }
)

console.log(result)
// {
//   interactionId: "int-...",
//   result: { recommendations: [...] },
//   duration: 245
// }
```

### 提交反馈

```javascript
// 提交用户反馈
agentStore.submitFeedback(
  'int-1702618800000-abc123',  // 交互ID
  {
    feedbackType: 'thumbsUp',  // thumbsUp | thumbsDown | correction
    comment: '推荐很准确',
    correction: null
  }
)
```

### 健康检查

```javascript
// 检查单个智能体健康状态
const isHealthy = await agentStore.performHealthCheck('agent-id')

// 检查所有活跃智能体
agentStore.activeAgents.forEach(async (agent) => {
  await agentStore.performHealthCheck(agent.agentId)
})
```

---

## 🎨 界面截图说明

### 主界面布局

```
┌──────────────────────────────────────────────────────────────┐
│  🤖 企业级智能体注册中心                    [+ 注册新智能体]  │
│  集中管理、监控和优化所有智能体                                │
├──────────────────────────────────────────────────────────────┤
│  ┌──────┐  ┌──────┐  ┌──────┐  ┌──────┐                    │
│  │  8   │  │  8   │  │  0   │  │ 100% │                    │
│  │总数  │  │运行中│  │总调用│  │可用性│                    │
│  └──────┘  └──────┘  └──────┘  └──────┘                    │
├──────────────────────────────────────────────────────────────┤
│  [全部智能体] [性能监控] [交互历史] [学习记录]               │
│  ┌──────────────────────────────────────────────────────┐  │
│  │ 智能体名称    │ 类型   │ 状态  │ 能力  │ 性能 │ 操作  │  │
│  ├──────────────────────────────────────────────────────┤  │
│  │ 🤖 拧紧工具   │ 推荐   │ 运行  │ ...   │ ...  │[...]  │  │
│  │ 智能选型      │ 系统   │ 中    │       │      │       │  │
│  └──────────────────────────────────────────────────────┘  │
└──────────────────────────────────────────────────────────────┘
```

### 测试对话框

```
┌──────────────────────────────────────────┐
│ 测试: 拧紧工具智能选型           [X]      │
├──────────────────────────────────────────┤
│ 操作:   [recommend              ]        │
│                                          │
│ 数据:   ┌──────────────────────┐        │
│         │ {                     │        │
│         │   "torqueRange": "..." │        │
│         │ }                     │        │
│         └──────────────────────┘        │
│                                          │
│ 上下文: [可选, JSON格式          ]        │
│                                          │
│ ──────────── 测试结果 ────────────       │
│                                          │
│ ✅ 调用成功                              │
│ ┌──────────────────────────────┐        │
│ │ {                             │        │
│ │   "success": true,            │        │
│ │   "result": { ... }           │        │
│ │ }                             │        │
│ └──────────────────────────────┘        │
│                                          │
│              [取消] [执行测试]           │
└──────────────────────────────────────────┘
```

---

## 🔒 数据持久化

### LocalStorage存储

系统自动将数据保存到浏览器LocalStorage:

```javascript
// 保存的数据
localStorage.setItem('agentRegistry_agents', JSON.stringify(agents))
localStorage.setItem('agentRegistry_interactions', JSON.stringify(interactions))
localStorage.setItem('agentRegistry_learningRecords', JSON.stringify(learningRecords))
```

### 数据恢复

页面刷新后自动从LocalStorage恢复数据:

```javascript
agentStore.loadFromLocalStorage()
```

---

## 🚧 后续开发计划

### Phase 2: 知识库集成 (下一步)
- [ ] 构建知识库管理系统
- [ ] 实现向量搜索
- [ ] 知识图谱可视化
- [ ] 文档版本控制

### Phase 3: 高级功能
- [ ] 实时监控仪表板
- [ ] 智能告警系统
- [ ] A/B测试框架
- [ ] 模型微调流程

### Phase 4: 企业级特性
- [ ] 多租户支持
- [ ] 权限管理(RBAC)
- [ ] API网关集成
- [ ] 分布式追踪

---

## 📝 使用最佳实践

### 1. 智能体命名规范

```javascript
// ✅ 好的命名
agentId: 'tool-selection-agent'
name: '拧紧工具智能选型'

// ❌ 避免
agentId: 'agent1'
name: 'Agent'
```

### 2. 配置合理的超时时间

```javascript
// 根据智能体类型设置超时
configuration: {
  timeout: 5000,    // 推荐系统: 5秒
  timeout: 10000,   // 数据分析: 10秒
  timeout: 30000    // 复杂计算: 30秒
}
```

### 3. 记录详细的元数据

```javascript
metadata: {
  description: "详细描述智能体的功能和应用场景",
  category: "明确的分类",
  tags: ["相关", "的", "标签"],
  version: "语义化版本号"
}
```

### 4. 实施健康检查

```javascript
// 定期健康检查
setInterval(() => {
  agentStore.activeAgents.forEach(agent => {
    agentStore.performHealthCheck(agent.agentId)
  })
}, 60000) // 每分钟
```

---

## 🎯 快速测试清单

- [ ] 访问注册中心页面
- [ ] 查看8个预注册智能体
- [ ] 点击"详情"查看智能体配置
- [ ] 点击"测试"执行测试调用
- [ ] 查看"性能监控"标签页
- [ ] 查看"交互历史"记录
- [ ] 执行健康检查操作
- [ ] 刷新页面验证数据持久化

---

## 📚 相关文档

- **设计方案:** `📘_企业级智能体中央管理平台设计方案_2025-12-15_v1.0.0.md`
- **Store代码:** `src/store/agentRegistry.js`
- **前端页面:** `src/views/admin/AgentRegistry.vue`

---

**第一阶段开发完成!** ✅

现在您可以开始使用智能体注册中心管理所有智能体了!
