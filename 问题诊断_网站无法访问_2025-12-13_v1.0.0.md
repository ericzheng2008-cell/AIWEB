# 网站无法访问问题诊断指南

## 🔍 快速诊断

### 场景1：浏览器显示"无法访问此网站"或"连接超时"

**可能原因：**
- ✗ 网络连接问题
- ✗ Vercel 服务异常
- ✗ DNS 解析问题

**解决方案：**
1. 检查网络连接
2. 尝试访问其他网站（如 baidu.com）确认网络正常
3. 尝试使用手机流量访问（排除公司防火墙）
4. 清除浏览器缓存或使用无痕模式
5. 等待几分钟后重试（DNS 传播需要时间）

---

### 场景2：网站打开了，但显示空白页面

**可能原因：**
- ✗ JavaScript 加载失败
- ✗ 资源路径错误
- ✗ 浏览器兼容性问题

**解决方案：**
1. 打开浏览器开发者工具（按F12）
2. 查看 Console 标签，是否有红色错误信息
3. 查看 Network 标签，检查资源是否成功加载
4. 截图错误信息，以便分析

---

### 场景3：网站打开了，但功能不正常（如无法切换语言、CMS登录失败）

**可能原因：**
- ✗ 后端 API 未部署
- ✗ API 地址配置错误
- ✗ CORS 跨域问题

**解决方案：**
1. 打开浏览器开发者工具（F12）
2. 切换到 Network 标签
3. 尝试操作功能（如切换语言）
4. 查看是否有 API 请求失败（红色）
5. 如果看到 404 或 CORS 错误，说明后端未部署

**修复步骤：**
```bash
# 部署后端
cd server
railway login
railway init
railway up
railway domain

# 记录域名后，更新前端配置
cd ..
# 运行 update-api-url.bat 并输入 Railway 域名

# 重新构建和部署
npm run build
vercel --prod --yes
```

---

### 场景4：Vercel 部署显示成功，但访问 404

**可能原因：**
- ✗ 构建产物路径错误
- ✗ vercel.json 配置错误
- ✗ 路由配置问题

**解决方案：**

1. 检查 `vercel.json` 配置：
```json
{
  "buildCommand": "npm run build",
  "outputDirectory": "dist",
  "framework": "vue",
  "rewrites": [
    {
      "source": "/(.*)",
      "destination": "/index.html"
    }
  ]
}
```

2. 检查 `dist` 目录是否存在 `index.html`
3. 重新构建和部署：
```bash
npm run build
vercel --prod --yes
```

---

## 🛠️ 一键修复工具

### 工具1：完整重新部署
```bash
fix-and-deploy.bat
```
这个脚本会：
- ✓ 清理旧的构建文件
- ✓ 重新构建项目
- ✓ 验证构建产物
- ✓ 重新部署到 Vercel

### 工具2：测试本地环境
```bash
test-local.bat
```
这个脚本会：
- ✓ 启动本地开发服务器
- ✓ 在 http://localhost:3000 测试
- ✓ 如果本地正常，说明是部署配置问题
- ✓ 如果本地也不正常，说明是代码问题

---

## 📊 详细检查清单

### 检查1：Vercel 部署状态

1. 登录 https://vercel.com
2. 找到您的项目（aiweb）
3. 查看最新部署状态：
   - ✓ **Ready**：部署成功
   - ✗ **Failed**：部署失败，查看日志
   - ⏳ **Building**：正在构建中

### 检查2：浏览器控制台错误

1. 访问 https://aiweb-gilt.vercel.app/
2. 按 F12 打开开发者工具
3. 查看 Console 标签：
   - 红色错误：记录错误信息
   - 黄色警告：通常可以忽略

### 检查3：网络请求状态

1. 按 F12 打开开发者工具
2. 切换到 Network 标签
3. 刷新页面（F5）
4. 检查所有请求状态：
   - ✓ 200/304：成功
   - ✗ 404：资源不存在
   - ✗ 500：服务器错误
   - ✗ CORS：跨域错误

### 检查4：构建产物验证

```bash
# 查看 dist 目录内容
dir dist

# 应该看到：
# - index.html
# - assets/
#   - css/
#   - js/
```

---

## 🚨 常见错误及解决方案

### 错误1：`Error: Cannot find module 'xxx'`

**原因**：依赖未安装或版本不兼容

**解决**：
```bash
rm -rf node_modules package-lock.json
npm install
npm run build
```

### 错误2：`ELIFECYCLE Command failed`

**原因**：构建命令执行失败

**解决**：
1. 查看完整错误日志
2. 检查 `package.json` 中的 `build` 脚本
3. 本地测试：`npm run build`

### 错误3：`Failed to load resource: net::ERR_BLOCKED_BY_CLIENT`

**原因**：广告拦截插件阻止了资源加载

**解决**：
1. 暂时禁用广告拦截插件
2. 或将网站添加到白名单

### 错误4：白屏，Console 显示 `Failed to fetch`

**原因**：API 请求失败（后端未部署）

**解决**：
1. 部署后端到 Railway
2. 更新 `.env.production` 中的 API 地址
3. 重新构建和部署前端

---

## 🔄 完整的故障排查流程

```
1. 访问网站
   ↓
2. 能打开吗？
   ├─ 否 → 检查网络连接 → 尝试其他浏览器
   └─ 是 ↓
3. 页面正常显示吗？
   ├─ 否 → F12查看Console错误 → 截图发给我
   └─ 是 ↓
4. 功能正常吗（语言切换、CMS）？
   ├─ 否 → F12查看Network → 检查API请求 → 部署后端
   └─ 是 ↓
5. 完成！🎉
```

---

## 💡 快速联系

如果以上方法都不能解决问题，请提供以下信息：

1. **错误截图**（包含浏览器Console和Network标签）
2. **访问的网址**
3. **浏览器版本**（Chrome/Edge/Safari等）
4. **操作系统**（Windows/Mac/手机）
5. **具体表现**：
   - [ ] 完全打不开
   - [ ] 白屏
   - [ ] 页面显示但功能不正常
   - [ ] 其他：__________

---

## 📝 建议的测试顺序

1. ✅ 先运行 `test-local.bat` 测试本地环境
   - 如果本地正常 → 是部署问题
   - 如果本地不正常 → 是代码问题

2. ✅ 如果本地正常，运行 `fix-and-deploy.bat` 重新部署

3. ✅ 如果重新部署后还不行，截图错误信息

4. ✅ 检查是否需要部署后端（看Console有无API错误）

---

**现在就开始诊断吧！** 先运行 `test-local.bat` 看看本地能否正常运行。
