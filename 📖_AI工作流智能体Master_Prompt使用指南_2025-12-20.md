# 🤖 AI工作流智能体 Master Prompt 使用指南

## 📌 系统概述

这是一个完整的企业级AI工作流智能体系统，基于Master Prompt驱动，能够：

✅ **自动理解任务** - 输入一句话描述，AI自动识别任务类型  
✅ **自动生成工作流** - 包含AI节点、流程步骤、负责人、时长  
✅ **自动生成文档** - 8D报告、ROI分析、预算清单、供应商比选表  
✅ **跨系统联动** - 支持MES/ERP/CRM数据联动判断  
✅ **可视化编辑** - 拖拽调整、手动输入、灵活配置  
✅ **智能优化** - AI复盘、流程优化、知识沉淀  

---

## 🎯 Master Prompt核心能力

### 1. 系统角色定位
- 企业工作流智能体（AI Enterprise Workflow Agent）
- 协助企业员工自动构建、执行、优化工作流
- 根据岗位特点提供个性化工作流

### 2. 8大核心能力
```
✅ 自动生成适合岗位的工作流模板
✅ 自动执行工作流中的智能节点
✅ 自动判断问题来源、根因和建议方案
✅ 自动生成文档（报告、清单、预算、比选表、培训材料）
✅ 从 MES / ERP / CRM / 设备数据中自动吸取信息判断下一步
✅ 在流程中实时产生提醒、复盘、风险预警
✅ 可对流程进行优化、自我改进与复用
✅ 可对复杂任务进行拆分并构建可操作流程
```

### 3. AI节点类型（10种）
| AI能力 | 说明 | 应用场景 |
|--------|------|----------|
| 🔍 数据判断 | 自动分析数据并给出结论 | 设备老化判断、生产异常识别 |
| 🔧 故障识别 | 智能识别设备/质量故障 | 设备故障诊断、质量问题分析 |
| 📸 图片识别 | 识别漏装、损坏等问题 | 包装漏装检测、外观质检 |
| 📊 效率计算 | 计算生产效率/能效 | 产线效率分析、能耗对比 |
| 💰 预算生成 | 自动生成预算和ROI | 设备采购、项目预算 |
| 🏢 供应商比选 | 多维度评分比选 | 供应商选择、采购决策 |
| 📈 流程优化 | 给出流程优化建议 | 车间布局、工艺改进 |
| 📝 文档生成 | 自动编写各类文档 | 8D报告、改善方案、SOP |
| ⚠️ 风险预警 | 识别并预警风险点 | 质量风险、交期风险 |
| ✅ 质量检测 | 自动质量判定 | 验收检查、合格判定 |

---

## 🚀 快速开始

### 访问地址
```
http://localhost:5173/workflow-agent
```

或从首页点击"工作流智能体"卡片（安彤智能体区域，AIMES之后）

---

## 📋 14个部门支持

系统内置14个部门的工作流支持：

| 序号 | 部门 | 图标 | 典型场景 |
|------|------|------|----------|
| 1 | 研发部 | 🔬 | 产品研发、技术创新 |
| 2 | 生产计划管理 | 📋 | 生产排程、计划调度 |
| 3 | 质量部 | ✅ | 质量控制、问题处理 |
| 4 | 工艺部 | ⚙️ | 工艺改进、参数优化 |
| 5 | 商务内勤 | 📞 | 订单处理、客户沟通 |
| 6 | 商务采购 | 🛒 | 供应商管理、采购执行 |
| 7 | 物流 | 🚚 | 物流配送、运输管理 |
| 8 | 库房 | 📦 | 仓储管理、库存控制 |
| 9 | 财务 | 💰 | 财务审批、成本核算 |
| 10 | 企管 | 📊 | 企业管理、流程优化 |
| 11 | 人事部 | 👥 | 人力资源、培训管理 |
| 12 | 设备科 | 🔧 | 设备维护、保养管理 |
| 13 | 车辆调度 | 🚗 | 车辆调度、路线规划 |
| 14 | 车辆管理 | 🚙 | 车辆资产、维保管理 |

---

## 🎨 使用方式

### 方式一：AI对话生成（推荐）

#### 步骤：
1. 点击"AI生成工作流"按钮
2. 在输入框描述你的任务，例如：
   ```
   "生产线包装出现漏装问题，帮我处理"
   "设备需要升级，制定完整方案"
   "车间需要改造布局"
   ```
3. 点击"AI自动生成工作流"
4. AI会自动：
   - 识别任务类型（设备类/生产类/质量类/采购类）
   - 生成完整工作流节点（包含AI节点）
   - 自动连接节点
   - 生成相关文档（8D报告/ROI分析/预算清单等）

#### 示例输入与输出：

**输入1：**
```
生产线包装出现漏装问题
```

**AI输出：**
- 工作流类型：质量类
- 节点数量：7个
- AI节点：4个
  - 📸 问题识别（图片识别）
  - 🔧 原因分析（故障识别）
  - 📈 永久改善（流程优化）
  - 📝 SOP更新（文档生成）
- 生成文档：
  - 8D质量问题分析报告
  - 永久改善措施方案
  - 项目实施复盘报告

---

**输入2：**
```
设备老化需要升级
```

**AI输出：**
- 工作流类型：设备类
- 节点数量：9个（含开始/结束）
- AI节点：4个
  - 🔍 设备老化判断（数据判断）
  - 🏢 技术方案比选（供应商比选）
  - 💰 预算ROI测算（预算生成）
  - ✅ 验收与调试（质量检测）
- 生成文档：
  - 设备升级完整方案
  - ROI投资回报分析
  - 项目实施复盘报告

---

### 方式二：快速场景模板

系统内置8个常用业务场景模板：

1. **🔧 设备升级工作流**
   - 设备老化判断→技术比选→预算测算→采购验收
   - 适用：设备老化、性能不足、技术升级

2. **🏭 车间改造工作流**
   - 布局分析→新布局设计→仿真预测→施工验收
   - 适用：产能扩充、布局优化、自动化升级

3. **📦 包装漏装处理**
   - 图片识别→批次定位→原因溯源→改善措施
   - 适用：包装漏装、外观缺陷、装配错误

4. **⚠️ 设备故障处理**
   - 故障识别→工单分派→维修→复盘预防
   - 适用：设备突发故障、性能异常

5. **💰 固定资产采购**
   - 需求验证→供应商比选→审批→验收入账
   - 适用：设备采购、办公资产、生产工具

6. **🚨 生产异常处理**
   - 异常识别→影响评估→应急方案→根因分析
   - 适用：停机、质量异常、交期延误

7. **⚙️ 工艺改进验证**
   - 改进方案→试验验证→数据分析→标准化
   - 适用：工艺优化、参数调整、新工艺导入

8. **🏢 供应商评估**
   - 资质审核→实地考察→样品验证→综合评分
   - 适用：新供应商引入、供应商年审

**使用方法：**
- 左侧面板"快速场景模板"区域
- 点击任意模板卡片
- 确认后自动加载完整工作流

---

### 方式三：手动创建与编辑

#### 1. 添加节点
- 左侧面板输入节点名称
- 选择节点类型：开始/流程/决策/结束
- 点击"添加"按钮

#### 2. 拖拽调整
- 在画布上拖动节点调整位置
- 支持任意位置自由排列

#### 3. 连接节点
- 鼠标悬停节点显示4个连接点（上下左右）
- 拖动连接点到目标节点创建连接线

#### 4. 编辑属性
- 点击节点选中
- 右侧面板编辑属性：
  - 节点名称
  - 节点类型
  - **AI能力开关**
  - **AI类型选择**（10种AI能力）
  - 负责人
  - 预计时长
  - 节点颜色
  - 描述
  - 风险提示
  - 数据依赖（MES/ERP/CRM等）

---

## 📊 自动生成的文档类型

### 设备类任务文档：
1. **设备升级完整方案**
   - 升级背景与目标
   - 技术方案比选表（品牌型号/技术优势/成本/评分）
   - ROI测算（投资成本/年收益/回报期）
   - 实施计划（分阶段时间表）
   - 风险控制措施

2. **ROI投资回报分析**
   - 投资概况（采购/安装/培训/备件）
   - 收益预测（能耗节约/维修降低/效率提升）
   - 关键指标（ROI/IRR/NPV）

---

### 质量类任务文档：
1. **8D质量问题分析报告**
   - D1：组建团队
   - D2：问题描述
   - D3：临时措施
   - D4：根本原因（AI辅助分析）
   - D5：永久纠正措施
   - D6：验证效果
   - D7：预防再发
   - D8：团队表彰

2. **永久改善措施方案**
   - 现状问题
   - 改善措施（标准化/防错设计/智能化）
   - 实施计划（分周推进）
   - 预期效果

---

### 采购类任务文档：
1. **供应商综合评分表**
   - 多维度评估（质量/价格/交货/技术/服务）
   - 权重计算
   - 综合得分排名
   - 推荐结论

2. **采购预算明细表**
   - 项目清单（设备/安装/培训/运输/税费）
   - 付款方式（预付/到货/验收）

---

### 通用文档：
1. **项目实施复盘报告**
   - 项目概况（节点数/总耗时）
   - 完成情况表（计划vs实际）
   - 经验总结（做得好的/需改进的）
   - 下次优化建议

---

## 🎯 实战案例

### 案例1：包装漏装问题处理

**背景：**
某批次产品包装缺少关键配件，客户投诉。

**操作步骤：**
1. 打开工作流智能体
2. 输入："生产线包装出现漏装问题，帮我处理"
3. 点击"AI自动生成工作流"

**AI生成结果：**

工作流节点（7个）：
```
开始 → 问题识别(AI图片识别) → 批次隔离 → 原因分析(AI故障识别) 
     → 临时措施 → 永久改善(AI流程优化) → SOP更新(AI文档生成) → 结束
```

生成文档（3份）：
- 8D质量问题分析报告（包含AI根因分析）
- 永久改善措施方案（含防错设计、AI视觉检测）
- 项目实施复盘报告

**工作流亮点：**
- AI图片识别：自动识别漏装类型
- AI故障识别：定位工位/作业/人员原因
- AI流程优化：给出临时+永久改善方案
- AI文档生成：自动编写8D报告和改善方案

**总耗时：** 9小时（传统方法需2天）

---

### 案例2：设备升级决策

**背景：**
某设备运行5年，频繁故障，需要决策是否升级。

**操作步骤：**
1. 选择"设备升级工作流"模板
2. AI自动加载完整流程

**工作流节点（9个）：**
```
任务启动 → 设备老化判断(AI数据分析) → 技术方案比选(AI供应商比选) 
         → 预算ROI测算(AI预算生成) → 审批流程 → 采购实施 
         → 验收与调试(AI质量检测) → 效果复盘(AI文档生成) → 任务完成
```

生成文档（3份）：
- 设备升级完整方案（含3个备选方案比选表）
- ROI投资回报分析（投资60万，4年回本）
- 项目实施复盘报告

**AI能力应用：**
- AI数据分析：分析5年运行数据，判断老化程度
- AI供应商比选：从技术/成本/服务多维度评分
- AI预算生成：自动测算投资成本和ROI
- AI质量检测：验收阶段自动生成验收清单

**决策结果：**
- 推荐方案C：ZZ品牌 Model-C（综合评分88分）
- 投资60万，年节约15万，4年回本
- 董事会批准通过

---

### 案例3：车间改造布局优化

**背景：**
产能扩充，需要重新规划车间布局。

**操作步骤：**
1. 点击"车间改造工作流"模板

**工作流节点（9个）：**
```
任务启动 → 现状分析(AI数据分析) → 新方案设计(AI流程优化) 
         → 仿真验证(AI效率计算) → 方案评审 → 实施改造 
         → 效果验证(AI数据分析) → 总结优化(AI文档生成) → 任务完成
```

**AI能力亮点：**
- AI数据分析：分析现有布局的瓶颈点（物流路线、空间利用率）
- AI流程优化：生成新布局方案（含设备位置、物流路线）
- AI效率计算：仿真新布局，预测产能提升（预计+25%）
- AI文档生成：输出新布局图、预算、停机计划、效率提升报告

**改造成果：**
- 产能提升：25%
- 物流距离：减少40%
- 空间利用率：从65%提升至82%

---

## 🛠️ 画布操作技巧

### 缩放控制
- **放大**：点击"放大"按钮或鼠标滚轮向上
- **缩小**：点击"缩小"按钮或鼠标滚轮向下
- **重置**：点击"重置"按钮恢复100%

### 平移画布
- **方法1**：鼠标中键拖动
- **方法2**：Ctrl + 鼠标左键拖动

### 节点操作
- **移动**：鼠标左键拖动节点
- **选中**：单击节点
- **编辑**：双击节点或右侧面板编辑
- **删除**：选中节点后点击右侧"删除节点"按钮

### 连接线
- **创建**：拖动节点连接点到目标节点
- **选中**：点击连接线
- **删除**：选中后按Delete键

---

## 💾 数据管理

### 自动保存
- 每次编辑节点属性后自动保存
- 数据保存到浏览器本地存储（LocalStorage）

### 手动保存
- 点击顶部"保存"按钮
- 保存当前部门的工作流配置

### 切换部门
- 选择不同部门时自动加载该部门的工作流
- 支持14个部门独立管理

### 导出工作流
- 点击"导出"按钮
- 生成JSON文件，包含：
  - 所有节点和连接线
  - AI配置和属性
  - 生成的文档
  - 统计数据

---

## 📈 流程统计

实时显示工作流关键指标：

| 指标 | 说明 |
|------|------|
| 总节点 | 工作流中所有节点数量 |
| AI节点 | 启用AI能力的节点数量 |
| 连接线 | 节点间的连接数量 |
| 预计时长 | 所有节点时长累加（小时） |

---

## 🔐 AI Master Prompt核心机制

### 1. 任务类型识别
AI通过关键词自动识别任务类型：

| 任务类型 | 关键词 |
|---------|--------|
| 设备类 | 设备、故障、维修、升级、更换、老化 |
| 生产类 | 生产、车间、改造、布局、产线、产能 |
| 质量类 | 质量、漏装、缺陷、不良、检验、异常 |
| 采购类 | 采购、供应商、比选、资产、招标 |
| 工艺类 | 工艺、改进、优化、参数、标准化 |
| 项目类 | 项目、实施、验收、部署 |

### 2. 工作流生成逻辑
```javascript
识别任务类型 
  → 选择工作流模板
  → 生成AI节点
  → 添加开始/结束节点
  → 自动连接
  → 分配负责人和时长
  → 添加风险提示
```

### 3. 文档生成逻辑
```javascript
根据任务类型生成对应文档：
  设备类 → 升级方案 + ROI分析
  质量类 → 8D报告 + 改善方案
  采购类 → 供应商比选 + 预算清单
  通用   → 项目复盘报告
```

### 4. AI判断逻辑
每个AI节点包含：
- **输入数据**：从MES/ERP/CRM/设备获取
- **AI算法**：数据分析/图像识别/预测模型
- **输出结果**：判断结论/优化建议/生成文档
- **风险预警**：识别潜在风险并提前提示

---

## 🌟 高级功能

### 1. 跨系统数据联动
节点可配置数据来源：
- **MES系统**：生产数据、设备状态
- **ERP系统**：物料、成本、库存
- **CRM系统**：客户、订单、投诉
- **设备数据**：传感器、日志、报警
- **质检系统**：检验记录、不良率
- **仓储系统**：库存、出入库

AI节点自动调用数据进行判断和决策。

### 2. 风险预警机制
系统自动识别并预警：
- **成本风险**：预算超支
- **质量风险**：不合格率上升
- **进度风险**：延期可能
- **供应商风险**：交付不及时
- **技术风险**：方案可行性

### 3. 自优化能力
每次工作流执行后：
- 生成执行复盘报告
- 标注可优化步骤
- 沉淀为可复用知识
- 下次自动调用优化版本

### 4. 多方案对比
AI可以同时生成：
- **临时方案**：快速止损
- **永久方案**：根本解决
- **备选方案**：风险对冲

---

## ❓ 常见问题

### Q1：AI生成的工作流可以修改吗？
**A：** 完全可以！AI生成后：
- 可以拖拽调整节点位置
- 可以双击编辑节点名称
- 可以添加/删除节点
- 可以修改AI类型和属性
- 可以调整连接线

---

### Q2：如何让AI生成更准确的工作流？
**A：** 提供更详细的描述，例如：
```
差：设备坏了
好：5号产线拧紧设备频繁报警，扭矩不稳定，已影响生产3天
```

包含：
- 具体位置（哪条产线/哪个工位）
- 具体问题（什么现象）
- 影响程度（持续时间/损失）
- 紧急程度（低/中/高）

---

### Q3：生成的文档可以下载吗？
**A：** 可以！
- 点击文档列表中的"查看"按钮
- 在弹窗中点击"下载文档"
- 保存为HTML格式，可直接打印或转PDF

---

### Q4：不同部门的工作流会互相覆盖吗？
**A：** 不会！
- 每个部门的工作流独立存储
- 切换部门时自动加载对应工作流
- 支持14个部门同时使用

---

### Q5：可以导入之前保存的工作流吗？
**A：** 当前版本支持导出为JSON，后续版本会支持导入功能。

---

## 🎓 最佳实践

### 1. 工作流命名规范
建议格式：`部门_场景_版本`
```
示例：
- 质量部_漏装处理_V1.0
- 设备科_设备升级_V2.1
- 采购部_供应商引入_V1.0
```

### 2. 节点描述规范
每个节点建议包含：
- **目标**：这个节点要实现什么
- **输入**：需要哪些数据/文件
- **输出**：产生什么结果/文档
- **负责人**：谁来执行
- **风险**：可能的风险点

示例：
```
节点：设备老化判断
描述：
- 目标：评估设备是否需要升级
- 输入：5年运行数据、故障记录、能耗数据
- 输出：老化评估报告、升级建议
- 负责人：设备科长
- 风险：数据不全导致判断偏差
```

### 3. AI节点配置建议
- **数据判断类**：配置数据来源（MES/ERP等）
- **文档生成类**：明确文档模板和格式
- **风险预警类**：设置预警阈值

### 4. 复盘与优化
每次工作流执行后：
1. 查看生成的复盘报告
2. 标注做得好的和需改进的
3. 更新工作流模板
4. 保存为新版本

---

## 🔮 未来扩展方向

### 已规划功能：
1. **多人协作**
   - 实时协同编辑工作流
   - 任务分配和进度跟踪
   - 消息提醒和通知

2. **移动端支持**
   - 手机查看工作流
   - 扫码查看节点详情
   - 移动审批

3. **更多AI能力**
   - 语音输入生成工作流
   - 自动推荐优化方案
   - 智能资源调度

4. **数据分析**
   - 工作流执行统计
   - 效率对比分析
   - 瓶颈识别

5. **知识库集成**
   - 历史工作流检索
   - 最佳实践推荐
   - 案例库沉淀

---

## 📞 技术支持

如有问题或建议，请联系：
- **开发团队**：AIWEB开发组
- **版本**：v2.5.0
- **最后更新**：2025-12-20

---

## 📜 更新日志

### v2.5.0 (2025-12-20)
✅ Master Prompt完整集成  
✅ AI自动生成工作流  
✅ 8种业务场景模板  
✅ 10种AI节点类型  
✅ 自动文档生成（8D/ROI/预算/比选表）  
✅ 14个部门支持  
✅ 可视化拖拽编辑  
✅ 跨系统数据联动  
✅ 风险预警机制  
✅ 自优化能力  

---

**开始使用AI工作流智能体，让企业流程管理进入AI时代！** 🚀
