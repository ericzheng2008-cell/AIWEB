# Phase 1-2-3 使用指南

> **一站式改进计划导航**  
> **更新时间：** 2025-12-23

---

## 🚀 快速开始（3分钟）

### 步骤1：一键启动

**Windows用户（推荐）：**
```bash
双击运行：🚀_立即开始Phase1改进_2025-12-23.bat
```

**手动启动：**
```bash
npm install          # 安装依赖
npm run db:init      # 初始化数据库
npm run server       # 启动后端（端口5000）
npm run dev          # 启动前端（端口5173）
```

---

### 步骤2：验证安装

**打开验证清单：**
```
🔍_验证Phase1改进_2025-12-23.html
```

**快速测试：**
1. 点击"🧪 测试数据库"按钮
2. 看到 ✅ 提示即表示成功

---

### 步骤3：开始使用

**访问地址：**
- 前端：http://localhost:5173
- 后端：http://localhost:5000

**默认账户：**
- 用户名：`admin`
- 密码：`admin123`

⚠️ **重要：** 生产环境请立即修改密码！

---

## 📚 文档导航

### 核心文档（必读）

| 文档 | 内容 | 阅读时间 |
|------|------|---------|
| 📋 改进计划 | 完整路线图、技术债务、投入产出 | 30分钟 |
| 🚀 Phase 1-1完成报告 | 数据库集成详情、使用指南 | 15分钟 |
| ✅ 总结文档 | 已完成工作、下一步行动 | 10分钟 |
| 📑 完整索引 | 快速查找、文档导航 | 5分钟 |

**推荐阅读顺序：**
1. ✅ 总结文档（了解全局）
2. 📋 改进计划（理解目标）
3. 🚀 完成报告（掌握细节）
4. 📑 完整索引（备查手册）

---

### 交互工具

| 工具 | 用途 | 打开方式 |
|------|------|---------|
| 🔍 验证清单 | 实时进度跟踪、一键测试 | HTML文件（浏览器打开） |
| 🚀 快速启动 | 自动安装、初始化、启动 | BAT文件（双击运行） |

---

## 🎯 按角色使用

### 项目经理

**关注重点：**
- 📊 总体评分：2.6/5 → 4.2/5
- ⏰ 完成工期：16周（640小时）
- 💰 投入产出：3-6个月回本

**必读文档：**
1. 📋 改进计划（第10章：实施路线图）
2. ✅ 总结文档（投入产出分析）

---

### 技术负责人

**关注重点：**
- 🔧 技术选型：SQLite → PostgreSQL
- 🏗️ 架构设计：17张表、模型层、备份系统
- ⚠️ 技术风险：安全漏洞、性能瓶颈

**必读文档：**
1. 📋 改进计划（第7章：重点改进建议）
2. 🚀 Phase 1-1完成报告（技术实现）
3. 📑 完整索引（技术债务清单）

---

### 开发工程师

**关注重点：**
- 💻 代码实现：模型层、路由、中间件
- 🧪 测试方法：单元测试、E2E测试
- 📖 最佳实践：组件设计、性能优化

**必读文档：**
1. 🚀 Phase 1-1完成报告（使用指南）
2. 📋 改进计划（第8章：代码示例）
3. 📑 完整索引（常见问题）

---

### 运维工程师

**关注重点：**
- 🐳 部署方案：Docker、云平台
- 📊 监控备份：自动备份、日志收集
- 🔒 安全加固：环境变量、权限配置

**必读文档：**
1. 📋 改进计划（第9章：Docker化部署）
2. 🚀 Phase 1-1完成报告（备份恢复）
3. ✅ 总结文档（生产环境检查清单）

---

## 📋 完整文档列表

### Phase 1-2-3 改进系列

```
📋_Phase1-2-3改进计划_2025-12-23.md
   ├── 第1章：项目评估概览
   ├── 第2章：改进路线图
   ├── 第3章：Phase 1 紧急修复
   ├── 第4章：Phase 2 重要优化
   ├── 第5章：Phase 3 长期改进
   ├── 第6章：预期收益
   ├── 第7章：重点改进建议
   ├── 第8章：技术债务清单
   ├── 第9章：投入产出分析
   └── 第10章：实施路线图

🚀_Phase1-1完成_数据库集成_2025-12-23.md
   ├── 已完成内容
   ├── 新增文件清单
   ├── 技术实现
   ├── 性能对比
   ├── 使用指南
   └── 注意事项

✅_Phase1-2-3改进计划制定完成_2025-12-23.md
   ├── 已完成工作
   ├── 项目评估总结
   ├── 快速开始指南
   ├── 预期收益
   ├── 下一步行动
   └── 常见问题

📑_Phase1-2-3完整索引_2025-12-23.md
   ├── 核心文档
   ├── 改进阶段
   ├── 新增文件清单
   ├── 快速开始
   └── 验收标准

📖_Phase1-2-3使用指南_2025-12-23.md （本文件）
```

---

### 交互工具

```
🔍_验证Phase1改进_2025-12-23.html
   ├── 实时进度跟踪
   ├── 完成度统计
   ├── 一键测试数据库
   └── 交互式检查清单

🚀_立即开始Phase1改进_2025-12-23.bat
   ├── 自动安装依赖
   ├── 初始化数据库
   └── 启动前后端服务器
```

---

## 🔍 快速查找

### 我想了解...

#### "项目整体评估结果"
→ 查看：📋 改进计划 第1章

**关键指标：**
- 总体评分：2.6/5
- 最严重问题：无数据库、安全漏洞、代码质量
- 优势领域：部署方案（4/5）

---

#### "数据库如何使用"
→ 查看：🚀 Phase 1-1完成报告

**快速上手：**
```bash
npm run db:init    # 初始化
npm run server     # 启动
```

**示例代码：**
```javascript
import User from './server/models/User.js'

// 创建用户
const userId = User.create({
  username: 'test',
  password: '123456',
  email: 'test@example.com'
})

// 查询用户
const user = User.findByUsername('test')
```

---

#### "如何验证改进完成"
→ 打开：🔍 验证清单（HTML文件）

**验证步骤：**
1. 勾选已完成的任务
2. 查看实时进度
3. 点击"测试数据库"验证

---

#### "下一步做什么"
→ 查看：✅ 总结文档 → 下一步行动

**本周任务：**
1. Phase 1-2：文件上传安全加固
2. Phase 1-3：拆分 Home.vue 组件

---

#### "生产环境如何部署"
→ 查看：📋 改进计划 第9章

**三种方案：**
1. 传统部署（Nginx + PM2）
2. Docker部署（docker-compose）
3. 云平台部署（Vercel + Railway）

---

#### "如何备份恢复数据库"
→ 查看：🚀 Phase 1-1完成报告 → 数据备份

**自动备份：**
```bash
npm run db:backup  # 每天2:00AM自动执行
```

**手动恢复：**
```bash
cp data/backups/aiweb_xxxxx.db data/aiweb.db
npm run server
```

---

#### "预期收益是什么"
→ 查看：✅ 总结文档 → 预期收益

**关键指标：**
- 首屏加载：8秒 → 3秒（↓70%）
- 测试覆盖：1% → 60%（↑60x）
- 部署时间：30分钟 → 5分钟（↓83%）
- 整体评分：2.6 → 4.2（↑62%）

---

## 🧪 常用命令

### 数据库操作

```bash
# 初始化数据库
npm run db:init

# 备份数据库
npm run db:backup

# 查看数据库文件
ls data/
```

---

### 启动服务

```bash
# 后端（端口5000）
npm run server

# 前端（端口5173）
npm run dev

# 一键启动（Windows）
双击：🚀_立即开始Phase1改进_2025-12-23.bat
```

---

### 测试命令（即将支持）

```bash
# 单元测试
npm run test

# 测试覆盖率
npm run test:coverage

# 测试UI
npm run test:ui
```

---

### 代码质量

```bash
# 代码检查
npm run lint

# 代码格式化
npm run format
```

---

## ⚠️ 常见问题

### 安装问题

#### Q: `better-sqlite3` 安装失败？

**A:** 需要 Python 和 C++ 编译工具

**Windows：**
```bash
npm install --global windows-build-tools
npm install better-sqlite3
```

**Mac：**
```bash
xcode-select --install
npm install better-sqlite3
```

**Linux：**
```bash
sudo apt-get install build-essential python
npm install better-sqlite3
```

---

#### Q: 端口5000被占用？

**A:** 修改端口配置

```bash
# .env 文件
PORT=3000  # 改为其他端口

# 重启服务器
npm run server
```

---

### 使用问题

#### Q: 数据库文件在哪里？

**A:** `data/aiweb.db`

**查看：**
```bash
ls -lh data/aiweb.db
```

---

#### Q: 如何重置数据库？

**A:** 删除数据库文件并重新初始化

```bash
# 1. 停止服务器
Ctrl+C

# 2. 删除数据库
rm data/aiweb.db

# 3. 重新初始化
npm run db:init

# 4. 重启服务器
npm run server
```

---

#### Q: 忘记管理员密码？

**A:** 重置数据库或直接修改

**方案1：重置数据库**
```bash
npm run db:init  # 重新初始化（会丢失数据）
```

**方案2：修改密码**
```javascript
// 运行脚本
import User from './server/models/User.js'
User.changePassword(1, 'new-password')
```

---

### 生产环境问题

#### Q: SQLite 适合生产环境吗？

**A:** 取决于流量

- ✅ **适合：** 中小型项目（< 1000并发）
- ⚠️ **谨慎：** 中等流量（1000-5000并发）
- ❌ **不适合：** 高并发（> 5000并发）

**高并发建议：** 迁移至 PostgreSQL

---

#### Q: 如何迁移到 PostgreSQL？

**A:** 使用 ORM 或适配器模式

```javascript
// 1. 安装 PostgreSQL 驱动
npm install pg

// 2. 修改连接配置
const pool = new Pool({
  connectionString: process.env.DATABASE_URL
})

// 3. 模型层保持不变（适配器模式）
```

---

## 📞 获取帮助

### 文档资源

- 📋 **完整计划：** 查看改进路线图
- 🚀 **完成报告：** 了解技术实现
- ✅ **总结文档：** 快速上手
- 📑 **完整索引：** 查找资料

---

### 在线资源

- [better-sqlite3 文档](https://github.com/WiseLibs/better-sqlite3)
- [Vue 3 官方文档](https://vuejs.org/)
- [Element Plus 组件库](https://element-plus.org/)
- [Vite 构建工具](https://vitejs.dev/)

---

### 技术支持

- 📧 Email: support@aiweb.com
- 💬 GitHub Issues: [提交问题](https://github.com)
- 📚 项目文档: `./docs/`

---

## ✅ 验收检查

### Phase 1-1 验收

- [x] 数据库初始化成功
- [x] 默认账户可登录
- [x] 数据持久化（重启不丢失）
- [x] 自动备份正常运行
- [x] 文档齐全
- [x] 快速启动脚本可用

---

### Phase 1-2 验收（进行中）

- [ ] 文件MIME类型验证
- [ ] 文件大小限制
- [ ] 上传权限控制
- [ ] 安全响应头设置

---

### Phase 1-3 验收（待开始）

- [ ] Home.vue < 300行
- [ ] 组件拆分 ≥ 15个
- [ ] Props/Events规范
- [ ] 组件可复用

---

## 🎉 开始使用

**准备好了吗？让我们开始改进之旅！**

### 现在就开始：

1. **一键启动：**
   ```
   双击：🚀_立即开始Phase1改进_2025-12-23.bat
   ```

2. **打开浏览器：**
   ```
   http://localhost:5173
   ```

3. **开始验证：**
   ```
   打开：🔍_验证Phase1改进_2025-12-23.html
   ```

---

**祝使用愉快！** 🚀

如有任何问题，请查看完整文档或联系技术支持。
