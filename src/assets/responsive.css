/* ================================================
   移动端响应式设计全局样式
   适配手机竖屏、横屏、平板等设备
   ================================================ */

/* 基础响应式设置 */
* {
  box-sizing: border-box;
}

html {
  /* 禁止双击缩放 */
  touch-action: manipulation;
  /* 平滑滚动 */
  scroll-behavior: smooth;
  /* 防止横向滚动 */
  overflow-x: hidden;
}

body {
  margin: 0;
  padding: 0;
  overflow-x: hidden;
  /* iOS Safari 橡皮筋效果优化 */
  -webkit-overflow-scrolling: touch;
}

/* 图片自适应 */
img {
  max-width: 100%;
  height: auto;
  display: block;
}

/* 视频自适应 */
video,
iframe {
  max-width: 100%;
}

/* ================================================
   移动端优先 - 基础布局
   ================================================ */

/* 容器宽度自适应 */
.container {
  width: 100%;
  padding-left: 15px;
  padding-right: 15px;
  margin-left: auto;
  margin-right: auto;
}

/* ================================================
   平板设备 (768px - 1024px)
   ================================================ */
@media screen and (min-width: 768px) {
  .container {
    max-width: 750px;
    padding-left: 20px;
    padding-right: 20px;
  }
}

/* ================================================
   桌面设备 (>= 1024px)
   ================================================ */
@media screen and (min-width: 1024px) {
  .container {
    max-width: 1200px;
    padding-left: 30px;
    padding-right: 30px;
  }
}

/* ================================================
   手机竖屏 (<= 767px)
   ================================================ */
@media screen and (max-width: 767px) {
  /* App主容器 */
  #app {
    width: 100%;
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* 侧边栏移动端优化 */
  .main-wrapper.with-sidebar {
    margin-left: 0 !important;
  }

  /* Banner 移动端优化 */
  .hero-banner {
    height: 60vh !important;
    min-height: 400px;
  }

  .banner-item {
    width: 100% !important;
    background-size: cover !important;
    background-position: center !important;
  }

  .banner-content {
    padding: 20px !important;
    text-align: center;
  }

  .banner-content h1 {
    font-size: 24px !important;
    line-height: 1.3;
    margin-bottom: 10px;
  }

  .banner-content .subtitle {
    font-size: 14px !important;
    margin-bottom: 20px;
  }

  .banner-buttons {
    flex-direction: column;
    gap: 10px;
  }

  .banner-buttons .el-button {
    width: 100%;
    max-width: 280px;
  }

  /* 栅格布局移动端优化 */
  .featured-products-grid,
  .product-series-grid,
  .ai-agents-grid {
    grid-template-columns: 1fr !important;
    gap: 15px !important;
  }

  /* 卡片优化 */
  .featured-product-card,
  .product-card,
  .agent-card {
    margin-bottom: 15px;
  }

  /* 产品媒体优化 */
  .product-media {
    height: auto !important;
    min-height: 200px !important;
  }

  .product-video,
  .product-web-frame {
    height: 250px !important;
  }

  /* Section间距优化 */
  .section {
    padding: 30px 0 !important;
  }

  .section-header {
    margin-bottom: 20px !important;
  }

  .section-title {
    font-size: 22px !important;
  }

  .section-desc {
    font-size: 14px !important;
  }

  /* 表格优化 - 横向滚动 */
  .el-table {
    font-size: 12px !important;
  }

  .el-table__body-wrapper {
    overflow-x: auto !important;
    -webkit-overflow-scrolling: touch;
  }

  /* 表单优化 */
  .el-form-item {
    margin-bottom: 15px !important;
  }

  .el-form-item__label {
    font-size: 14px !important;
  }

  /* 按钮优化 */
  .el-button {
    font-size: 14px !important;
    padding: 10px 15px !important;
  }

  /* 对话框优化 */
  .el-dialog {
    width: 95% !important;
    margin-top: 5vh !important;
  }

  .el-dialog__body {
    padding: 15px !important;
  }

  /* 抽屉优化 */
  .el-drawer {
    width: 100% !important;
  }

  /* 导航菜单优化 */
  .header-nav {
    flex-direction: column;
  }

  .nav-menu {
    display: none;
  }

  .mobile-menu-toggle {
    display: block !important;
  }

  /* 图表优化 */
  .chart-container {
    height: 300px !important;
  }

  /* 3D驾驶舱优化 */
  .cockpit-3d {
    padding: 15px !important;
  }

  .data-card {
    min-width: auto !important;
  }

  /* 智能体卡片优化 */
  .agent-card-content {
    padding: 15px !important;
  }

  .agent-card h3 {
    font-size: 18px !important;
  }

  .agent-card p {
    font-size: 13px !important;
  }

  /* AI聊天框优化 */
  .ai-chat-container {
    width: 100% !important;
    height: 100% !important;
    bottom: 0 !important;
    right: 0 !important;
    border-radius: 0 !important;
  }

  .ai-chat-trigger {
    width: 50px !important;
    height: 50px !important;
    bottom: 20px !important;
    right: 20px !important;
  }
}

/* ================================================
   手机横屏 (481px - 767px) 且 landscape
   ================================================ */
@media screen and (min-width: 481px) and (max-width: 767px) and (orientation: landscape) {
  /* Banner高度调整 */
  .hero-banner {
    height: 85vh !important;
  }

  /* 栅格适配横屏 */
  .featured-products-grid,
  .product-series-grid,
  .ai-agents-grid {
    grid-template-columns: repeat(2, 1fr) !important;
  }

  /* 图表高度优化 */
  .chart-container {
    height: 350px !important;
  }
}

/* ================================================
   小屏手机 (<= 480px)
   ================================================ */
@media screen and (max-width: 480px) {
  .banner-content h1 {
    font-size: 20px !important;
  }

  .section-title {
    font-size: 20px !important;
  }

  .product-video,
  .product-web-frame {
    height: 200px !important;
  }

  .chart-container {
    height: 250px !important;
  }
}

/* ================================================
   平板竖屏 (768px - 1024px) 且 portrait
   ================================================ */
@media screen and (min-width: 768px) and (max-width: 1024px) and (orientation: portrait) {
  /* 栅格2列布局 */
  .featured-products-grid,
  .product-series-grid,
  .ai-agents-grid {
    grid-template-columns: repeat(2, 1fr) !important;
    gap: 20px !important;
  }

  /* Banner优化 */
  .hero-banner {
    height: 50vh !important;
  }

  .banner-content h1 {
    font-size: 32px !important;
  }

  /* 图表优化 */
  .chart-container {
    height: 400px !important;
  }

  /* 对话框优化 */
  .el-dialog {
    width: 80% !important;
  }
}

/* ================================================
   平板横屏 (768px - 1024px) 且 landscape
   ================================================ */
@media screen and (min-width: 768px) and (max-width: 1024px) and (orientation: landscape) {
  /* 栅格3列布局 */
  .featured-products-grid,
  .product-series-grid,
  .ai-agents-grid {
    grid-template-columns: repeat(3, 1fr) !important;
    gap: 20px !important;
  }

  /* Banner优化 */
  .hero-banner {
    height: 70vh !important;
  }

  /* 侧边栏优化 */
  .main-wrapper.with-sidebar {
    margin-left: 250px !important;
  }
}

/* ================================================
   大屏平板 (>= 1024px)
   ================================================ */
@media screen and (min-width: 1024px) {
  /* 保持桌面布局 */
  .featured-products-grid,
  .product-series-grid {
    grid-template-columns: repeat(3, 1fr) !important;
  }

  .ai-agents-grid {
    grid-template-columns: repeat(4, 1fr) !important;
  }
}

/* ================================================
   触摸优化
   ================================================ */
@media (hover: none) and (pointer: coarse) {
  /* 增大可点击区域 */
  .el-button,
  a,
  button {
    min-height: 44px;
    min-width: 44px;
  }

  /* 移除hover效果 */
  .product-card:hover,
  .agent-card:hover {
    transform: none !important;
  }

  /* 点击反馈 */
  .clickable:active {
    opacity: 0.7;
    transition: opacity 0.1s;
  }
}

/* ================================================
   打印优化
   ================================================ */
@media print {
  .ai-chat-container,
  .ai-chat-trigger,
  .header-nav,
  .footer {
    display: none !important;
  }

  .main-wrapper.with-sidebar {
    margin-left: 0 !important;
  }

  body {
    font-size: 12pt;
    line-height: 1.5;
  }
}

/* ================================================
   辅助功能 - 高对比度模式
   ================================================ */
@media (prefers-contrast: high) {
  .banner-overlay {
    opacity: 0.7 !important;
  }

  .product-card,
  .agent-card {
    border: 2px solid #000 !important;
  }
}

/* ================================================
   辅助功能 - 减少动画
   ================================================ */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* ================================================
   横竖屏切换动画优化
   ================================================ */
@media screen and (orientation: portrait) {
  .orientation-hint {
    display: none;
  }
}

@media screen and (orientation: landscape) and (max-height: 500px) {
  /* 横屏且高度较小时的特殊优化 */
  .banner-content {
    padding: 15px !important;
  }

  .section {
    padding: 20px 0 !important;
  }
}

/* ================================================
   Safe Area (iPhone X等异形屏适配)
   ================================================ */
@supports (padding: max(0px)) {
  body {
    padding-left: max(0px, env(safe-area-inset-left));
    padding-right: max(0px, env(safe-area-inset-right));
  }

  .header,
  .footer {
    padding-left: max(15px, env(safe-area-inset-left));
    padding-right: max(15px, env(safe-area-inset-right));
  }

  .ai-chat-trigger {
    bottom: max(20px, env(safe-area-inset-bottom)) !important;
    right: max(20px, env(safe-area-inset-right)) !important;
  }
}

/* ================================================
   工具类 - 快速响应式控制
   ================================================ */

/* 移动端隐藏 */
.hide-on-mobile {
  display: block;
}

@media screen and (max-width: 767px) {
  .hide-on-mobile {
    display: none !important;
  }
}

/* 移动端显示 */
.show-on-mobile {
  display: none;
}

@media screen and (max-width: 767px) {
  .show-on-mobile {
    display: block !important;
  }
}

/* 平板隐藏 */
.hide-on-tablet {
  display: block;
}

@media screen and (min-width: 768px) and (max-width: 1024px) {
  .hide-on-tablet {
    display: none !important;
  }
}

/* 平板显示 */
.show-on-tablet {
  display: none;
}

@media screen and (min-width: 768px) and (max-width: 1024px) {
  .show-on-tablet {
    display: block !important;
  }
}

/* 桌面隐藏 */
.hide-on-desktop {
  display: block;
}

@media screen and (min-width: 1025px) {
  .hide-on-desktop {
    display: none !important;
  }
}

/* 桌面显示 */
.show-on-desktop {
  display: none;
}

@media screen and (min-width: 1025px) {
  .show-on-desktop {
    display: block !important;
  }
}

/* ================================================
   性能优化
   ================================================ */

/* 硬件加速 */
.gpu-accelerated {
  transform: translateZ(0);
  will-change: transform;
  backface-visibility: hidden;
}

/* 图片懒加载占位 */
.lazy-image {
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 200% 100%;
  animation: loading 1.5s infinite;
}

@keyframes loading {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

/* ================================================
   AICRM智能体组件响应式优化
   ================================================ */

/* 客户沙盘分析响应式 */
@media screen and (max-width: 1024px) {
  .customer-sandbox-advanced {
    padding: 12px !important;
  }

  .customer-sandbox-advanced .page-header {
    flex-direction: column !important;
    gap: 16px !important;
  }

  .customer-sandbox-advanced .header-right {
    width: 100% !important;
    flex-wrap: wrap !important;
  }

  .customer-sandbox-advanced .el-col {
    width: 100% !important;
    max-width: 100% !important;
  }
}

/* 客户360画像响应式 */
@media screen and (max-width: 767px) {
  .customer-360-view .page-header {
    flex-direction: column !important;
  }

  .customer-360-view .metric-cards {
    grid-template-columns: 1fr !important;
  }

  .customer-360-view .chart-grid {
    grid-template-columns: 1fr !important;
  }

  .customer-360-view #radar-chart,
  .customer-360-view #trend-chart {
    height: 300px !important;
  }
}

/* 投标预测AI响应式 */
@media screen and (max-width: 767px) {
  .bid-prediction-ai .header-actions {
    flex-direction: column !important;
    width: 100% !important;
  }

  .bid-prediction-ai .comparison-grid {
    grid-template-columns: 1fr !important;
  }

  .bid-prediction-ai .simulation-controls {
    flex-direction: column !important;
  }

  .bid-prediction-ai .el-slider {
    width: 100% !important;
  }
}

/* 企业产品矩阵响应式 */
@media screen and (max-width: 767px) {
  .product-matrix-agent .view-switcher {
    flex-direction: column !important;
    width: 100% !important;
  }

  .product-matrix-agent .matrix-grid {
    grid-template-columns: 1fr !important;
  }

  .product-matrix-agent .product-card {
    min-height: auto !important;
  }
}

/* 销售目标管理响应式 */
@media screen and (max-width: 767px) {
  .sales-target-management .target-cards {
    grid-template-columns: 1fr !important;
  }

  .sales-target-management .progress-section {
    flex-direction: column !important;
  }

  .sales-target-management .chart-container {
    height: 300px !important;
  }
}

/* 联系人管理响应式 */
@media screen and (max-width: 767px) {
  .contact-management .contact-grid {
    grid-template-columns: 1fr !important;
  }

  .contact-management .relationship-map {
    height: 400px !important;
  }

  .contact-management .filter-bar {
    flex-direction: column !important;
    gap: 8px !important;
  }

  .contact-management .filter-bar .el-input,
  .contact-management .filter-bar .el-select {
    width: 100% !important;
  }
}

/* AICRM主页卡片网格响应式 */
@media screen and (max-width: 1024px) {
  .ai-crm-cards-grid {
    grid-template-columns: repeat(2, 1fr) !important;
  }
}

@media screen and (max-width: 767px) {
  .ai-crm-cards-grid {
    grid-template-columns: 1fr !important;
  }

  .ai-crm-card {
    min-height: auto !important;
  }

  .ai-crm-card .card-icon {
    font-size: 36px !important;
  }

  .ai-crm-card h3 {
    font-size: 16px !important;
  }

  .ai-crm-card p {
    font-size: 13px !important;
  }
}

/* Element Plus组件移动端优化 */
@media screen and (max-width: 767px) {
  /* 卡片内边距优化 */
  .el-card__body {
    padding: 15px !important;
  }

  .el-card__header {
    padding: 12px 15px !important;
  }

  /* 表格字体大小 */
  .el-table {
    font-size: 13px !important;
  }

  .el-table th,
  .el-table td {
    padding: 8px 0 !important;
  }

  /* 分页器优化 */
  .el-pagination {
    padding: 10px 0 !important;
  }

  .el-pagination button,
  .el-pagination .el-pager li {
    min-width: 32px !important;
    height: 32px !important;
    line-height: 32px !important;
  }

  /* 标签页优化 */
  .el-tabs__nav-wrap {
    overflow-x: auto !important;
    -webkit-overflow-scrolling: touch;
  }

  .el-tabs__item {
    padding: 0 15px !important;
    font-size: 14px !important;
  }

  /* 下拉菜单优化 */
  .el-select-dropdown {
    max-width: 90vw !important;
  }

  /* 日期选择器优化 */
  .el-picker-panel {
    width: 90vw !important;
    max-width: 350px !important;
  }

  /* 消息提示优化 */
  .el-message {
    min-width: 280px !important;
    max-width: 90vw !important;
  }

  /* 通知优化 */
  .el-notification {
    width: 90vw !important;
    max-width: 350px !important;
  }
}

/* ================================================
   图表组件响应式优化（ECharts）
   ================================================ */
@media screen and (max-width: 767px) {
  /* 所有ECharts容器 */
  [id*="chart"],
  [class*="chart-container"],
  .echarts-container {
    height: 300px !important;
    min-height: 250px !important;
  }

  /* 3D图表特殊处理 */
  [id*="3d-"],
  [id*="-3d"] {
    height: 350px !important;
  }

  /* 雷达图优化 */
  [id*="radar"] {
    height: 320px !important;
  }

  /* 关系图谱优化 */
  [id*="relationship"],
  [id*="network"] {
    height: 400px !important;
  }
}

@media screen and (max-width: 480px) {
  [id*="chart"],
  [class*="chart-container"] {
    height: 250px !important;
  }

  [id*="3d-"],
  [id*="-3d"] {
    height: 280px !important;
  }
}

/* ================================================
   加载动画和过渡效果移动端优化
   ================================================ */
@media screen and (max-width: 767px) {
  /* 加载骨架屏 */
  .el-skeleton {
    padding: 15px !important;
  }

  /* 空状态提示 */
  .el-empty {
    padding: 30px 15px !important;
  }

  .el-empty__image {
    width: 120px !important;
  }

  .el-empty__description {
    font-size: 13px !important;
  }
}

/* ================================================
   滚动条美化（移动端隐藏）
   ================================================ */
@media screen and (max-width: 767px) {
  /* 隐藏滚动条但保持功能 */
  ::-webkit-scrollbar {
    width: 4px;
    height: 4px;
  }

  ::-webkit-scrollbar-thumb {
    background: rgba(0, 0, 0, 0.2);
    border-radius: 2px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }
}

/* ================================================
   浮动元素移动端优化
   ================================================ */
@media screen and (max-width: 767px) {
  /* 浮动操作按钮 */
  .fab-container {
    bottom: 70px !important;
    right: 15px !important;
  }

  .fab-button {
    width: 48px !important;
    height: 48px !important;
  }

  /* 返回顶部按钮 */
  .back-to-top {
    width: 44px !important;
    height: 44px !important;
    bottom: 120px !important;
    right: 15px !important;
  }
}
