<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AIWEBç§»åŠ¨ç«¯è‡ªé€‚åº”å…¨é¢æ£€æŸ¥å·¥å…·</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      padding: 20px;
      min-height: 100vh;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      background: white;
      border-radius: 16px;
      padding: 30px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }

    h1 {
      color: #667eea;
      text-align: center;
      margin-bottom: 10px;
      font-size: 28px;
    }

    .subtitle {
      text-align: center;
      color: #666;
      margin-bottom: 30px;
      font-size: 14px;
    }

    .section {
      margin-bottom: 30px;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 12px;
      border-left: 4px solid #667eea;
    }

    .section-title {
      font-size: 18px;
      font-weight: bold;
      color: #333;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .status-icon {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
    }

    .status-success {
      background: #52c41a;
      color: white;
    }

    .status-warning {
      background: #faad14;
      color: white;
    }

    .status-error {
      background: #f5222d;
      color: white;
    }

    .check-item {
      padding: 12px;
      margin-bottom: 10px;
      background: white;
      border-radius: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: all 0.3s;
    }

    .check-item:hover {
      transform: translateX(5px);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .check-label {
      font-size: 14px;
      color: #555;
    }

    .check-value {
      font-weight: bold;
      color: #667eea;
    }

    .btn {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 12px 30px;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s;
      width: 100%;
      margin-top: 10px;
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
    }

    .btn:active {
      transform: translateY(0);
    }

    .device-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-top: 15px;
    }

    .device-card {
      padding: 15px;
      background: white;
      border-radius: 8px;
      border: 2px solid #e8e8e8;
      transition: all 0.3s;
      cursor: pointer;
    }

    .device-card:hover {
      border-color: #667eea;
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
    }

    .device-name {
      font-weight: bold;
      color: #333;
      margin-bottom: 5px;
    }

    .device-specs {
      font-size: 12px;
      color: #999;
    }

    .test-result {
      padding: 15px;
      background: #f0f9ff;
      border-left: 4px solid #1890ff;
      border-radius: 8px;
      margin-top: 15px;
      font-size: 14px;
      line-height: 1.6;
    }

    .optimization-tips {
      background: #fff7e6;
      border-left: 4px solid #faad14;
      padding: 15px;
      border-radius: 8px;
      margin-top: 15px;
    }

    .optimization-tips ul {
      margin-left: 20px;
      margin-top: 10px;
    }

    .optimization-tips li {
      margin-bottom: 8px;
      color: #666;
    }

    .code-block {
      background: #282c34;
      color: #abb2bf;
      padding: 15px;
      border-radius: 8px;
      overflow-x: auto;
      font-family: 'Courier New', monospace;
      font-size: 13px;
      margin-top: 10px;
    }

    @media screen and (max-width: 768px) {
      body {
        padding: 10px;
      }

      .container {
        padding: 20px;
      }

      h1 {
        font-size: 22px;
      }

      .section {
        padding: 15px;
      }

      .device-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ“± AIWEBç§»åŠ¨ç«¯è‡ªé€‚åº”å…¨é¢æ£€æŸ¥</h1>
    <div class="subtitle">å®æ—¶æ£€æµ‹ç§»åŠ¨ç«¯é€‚é…çŠ¶æ€ | 2025-12-21</div>

    <!-- å½“å‰è®¾å¤‡ä¿¡æ¯ -->
    <div class="section">
      <div class="section-title">
        <span class="status-icon status-success">âœ“</span>
        å½“å‰è®¾å¤‡ä¿¡æ¯
      </div>
      <div class="check-item">
        <span class="check-label">è®¾å¤‡ç±»å‹</span>
        <span class="check-value" id="deviceType">-</span>
      </div>
      <div class="check-item">
        <span class="check-label">å±å¹•åˆ†è¾¨ç‡</span>
        <span class="check-value" id="screenResolution">-</span>
      </div>
      <div class="check-item">
        <span class="check-label">è§†å£å°ºå¯¸</span>
        <span class="check-value" id="viewportSize">-</span>
      </div>
      <div class="check-item">
        <span class="check-label">è®¾å¤‡åƒç´ æ¯”</span>
        <span class="check-value" id="devicePixelRatio">-</span>
      </div>
      <div class="check-item">
        <span class="check-label">å±å¹•æ–¹å‘</span>
        <span class="check-value" id="orientation">-</span>
      </div>
      <div class="check-item">
        <span class="check-label">è§¦æ‘¸æ”¯æŒ</span>
        <span class="check-value" id="touchSupport">-</span>
      </div>
    </div>

    <!-- Viewporté…ç½®æ£€æŸ¥ -->
    <div class="section">
      <div class="section-title">
        <span class="status-icon" id="viewportStatus">?</span>
        Viewporté…ç½®æ£€æŸ¥
      </div>
      <div class="check-item">
        <span class="check-label">viewportæ ‡ç­¾</span>
        <span class="check-value" id="viewportTag">-</span>
      </div>
      <div class="check-item">
        <span class="check-label">widthè®¾ç½®</span>
        <span class="check-value" id="viewportWidth">-</span>
      </div>
      <div class="check-item">
        <span class="check-label">ç¼©æ”¾è®¾ç½®</span>
        <span class="check-value" id="viewportScale">-</span>
      </div>
      <div id="viewportResult" class="test-result" style="display:none;"></div>
    </div>

    <!-- å“åº”å¼CSSæ£€æŸ¥ -->
    <div class="section">
      <div class="section-title">
        <span class="status-icon" id="cssStatus">?</span>
        å“åº”å¼CSSæ£€æŸ¥
      </div>
      <div class="check-item">
        <span class="check-label">responsive.cssåŠ è½½</span>
        <span class="check-value" id="responsiveCss">-</span>
      </div>
      <div class="check-item">
        <span class="check-label">åª’ä½“æŸ¥è¯¢æ”¯æŒ</span>
        <span class="check-value" id="mediaQuerySupport">-</span>
      </div>
      <div class="check-item">
        <span class="check-label">Flexboxæ”¯æŒ</span>
        <span class="check-value" id="flexboxSupport">-</span>
      </div>
      <div class="check-item">
        <span class="check-label">Gridæ”¯æŒ</span>
        <span class="check-value" id="gridSupport">-</span>
      </div>
    </div>

    <!-- å¸¸è§è®¾å¤‡æ¨¡æ‹Ÿæµ‹è¯• -->
    <div class="section">
      <div class="section-title">
        <span class="status-icon status-warning">âš¡</span>
        å¸¸è§è®¾å¤‡æ–­ç‚¹æµ‹è¯•
      </div>
      <div class="device-grid">
        <div class="device-card" onclick="testBreakpoint(375, 667, 'iPhone SE')">
          <div class="device-name">ğŸ“± iPhone SE</div>
          <div class="device-specs">375 x 667</div>
        </div>
        <div class="device-card" onclick="testBreakpoint(390, 844, 'iPhone 12/13')">
          <div class="device-name">ğŸ“± iPhone 12/13</div>
          <div class="device-specs">390 x 844</div>
        </div>
        <div class="device-card" onclick="testBreakpoint(393, 851, 'iPhone 14 Pro')">
          <div class="device-name">ğŸ“± iPhone 14 Pro</div>
          <div class="device-specs">393 x 851</div>
        </div>
        <div class="device-card" onclick="testBreakpoint(360, 640, 'Android M')">
          <div class="device-name">ğŸ¤– Android M</div>
          <div class="device-specs">360 x 640</div>
        </div>
        <div class="device-card" onclick="testBreakpoint(412, 915, 'Pixel 6')">
          <div class="device-name">ğŸ¤– Pixel 6</div>
          <div class="device-specs">412 x 915</div>
        </div>
        <div class="device-card" onclick="testBreakpoint(768, 1024, 'iPad')">
          <div class="device-name">ğŸ“± iPad</div>
          <div class="device-specs">768 x 1024</div>
        </div>
      </div>
      <div id="breakpointResult" class="test-result" style="display:none;"></div>
    </div>

    <!-- ä¼˜åŒ–å»ºè®® -->
    <div class="section">
      <div class="section-title">
        <span class="status-icon status-warning">ğŸ’¡</span>
        ä¼˜åŒ–å»ºè®®
      </div>
      <div class="optimization-tips">
        <strong>å½“å‰æ£€æµ‹åˆ°çš„ä¼˜åŒ–é¡¹ï¼š</strong>
        <ul id="optimizationList"></ul>
      </div>
    </div>

    <!-- è®¿é—®AIWEBæŒ‰é’® -->
    <button class="btn" onclick="openAIWEB()">ğŸš€ åœ¨æ‰‹æœºä¸Šè®¿é—®AIWEB</button>
    <button class="btn" onclick="runFullTest()">ğŸ” è¿è¡Œå®Œæ•´æµ‹è¯•</button>
  </div>

  <script>
    // è·å–è®¾å¤‡ä¿¡æ¯
    function getDeviceInfo() {
      const width = window.innerWidth;
      const height = window.innerHeight;
      let deviceType = 'æ¡Œé¢';
      
      if (width <= 480) deviceType = 'å°å±æ‰‹æœº';
      else if (width <= 767) deviceType = 'æ‰‹æœº';
      else if (width <= 1024) deviceType = 'å¹³æ¿';
      else deviceType = 'æ¡Œé¢';

      return {
        type: deviceType,
        width,
        height,
        pixelRatio: window.devicePixelRatio || 1,
        orientation: width > height ? 'æ¨ªå±' : 'ç«–å±',
        touchSupport: ('ontouchstart' in window) || (navigator.maxTouchPoints > 0)
      };
    }

    // æ£€æŸ¥viewporté…ç½®
    function checkViewport() {
      const viewport = document.querySelector('meta[name="viewport"]');
      const result = {
        exists: !!viewport,
        content: viewport ? viewport.content : 'Not Found',
        hasWidth: false,
        hasScale: false,
        isValid: false
      };

      if (viewport) {
        const content = viewport.content.toLowerCase();
        result.hasWidth = content.includes('width=device-width');
        result.hasScale = content.includes('initial-scale=1');
        result.isValid = result.hasWidth && result.hasScale;
      }

      return result;
    }

    // æ£€æŸ¥CSSåŠŸèƒ½æ”¯æŒ
    function checkCSSSupport() {
      return {
        mediaQuery: window.matchMedia('(min-width: 0px)').matches,
        flexbox: CSS.supports('display', 'flex'),
        grid: CSS.supports('display', 'grid'),
        transform: CSS.supports('transform', 'scale(1)'),
        transition: CSS.supports('transition', 'all 0.3s')
      };
    }

    // æ¨¡æ‹Ÿè®¾å¤‡æ–­ç‚¹æµ‹è¯•
    function testBreakpoint(width, height, deviceName) {
      const result = document.getElementById('breakpointResult');
      result.style.display = 'block';
      
      let recommendation = '';
      if (width <= 480) {
        recommendation = 'å°å±æ‰‹æœºï¼šå­—ä½“åº”â‰¥14pxï¼Œè§¦æ§åŒºåŸŸâ‰¥44px';
      } else if (width <= 767) {
        recommendation = 'æ‰‹æœºç«–å±ï¼šå•åˆ—å¸ƒå±€ï¼ŒBanneré«˜åº¦60vh';
      } else if (width <= 1024) {
        recommendation = 'å¹³æ¿ï¼š2-3åˆ—å¸ƒå±€ï¼ŒBanneré«˜åº¦50-70vh';
      } else {
        recommendation = 'æ¡Œé¢ï¼šæ ‡å‡†å¤šåˆ—å¸ƒå±€';
      }

      result.innerHTML = `
        <strong>æ¨¡æ‹Ÿ ${deviceName}</strong><br>
        åˆ†è¾¨ç‡: ${width} x ${height}<br>
        æ–­ç‚¹åŒ¹é…: ${recommendation}<br>
        <span style="color: #52c41a;">âœ“ è¯¥è®¾å¤‡å·²è¦†ç›–å“åº”å¼æ–­ç‚¹</span>
      `;
    }

    // ç”Ÿæˆä¼˜åŒ–å»ºè®®
    function generateOptimizations() {
      const optimizations = [];
      const device = getDeviceInfo();
      const viewport = checkViewport();
      const cssSupport = checkCSSSupport();

      if (!viewport.isValid) {
        optimizations.push('âŒ Viewporté…ç½®ä¸å®Œæ•´ï¼Œéœ€æ·»åŠ  width=device-width, initial-scale=1');
      } else {
        optimizations.push('âœ… Viewporté…ç½®æ­£ç¡®');
      }

      if (!cssSupport.mediaQuery) {
        optimizations.push('âŒ æµè§ˆå™¨ä¸æ”¯æŒåª’ä½“æŸ¥è¯¢ï¼Œå»ºè®®å‡çº§æµè§ˆå™¨');
      }

      if (device.width <= 767) {
        optimizations.push('ğŸ“± å½“å‰ä¸ºç§»åŠ¨è®¾å¤‡ï¼Œå·²è‡ªåŠ¨åº”ç”¨ç§»åŠ¨ç«¯ä¼˜åŒ–');
        optimizations.push('ğŸ’¡ å»ºè®®æµ‹è¯•æ¨ªç«–å±åˆ‡æ¢æ•ˆæœ');
      } else {
        optimizations.push('ğŸ’» å½“å‰ä¸ºæ¡Œé¢è®¾å¤‡ï¼Œå¯ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·æ¨¡æ‹Ÿç§»åŠ¨è®¾å¤‡');
      }

      if (cssSupport.flexbox && cssSupport.grid) {
        optimizations.push('âœ… æµè§ˆå™¨æ”¯æŒç°ä»£CSSå¸ƒå±€ï¼ˆFlexbox + Gridï¼‰');
      }

      optimizations.push('ğŸ” å“åº”å¼æ–­ç‚¹å·²è¦†ç›–ï¼š<480px, 481-767px, 768-1024px, >1024px');
      optimizations.push('ğŸ“ å¡ç‰‡å·²ä¼˜åŒ–ï¼šç§»åŠ¨ç«¯scale(0.95)ï¼Œæ¡Œé¢scale(0.85)');
      optimizations.push('ğŸ¨ è§¦æ‘¸ä¼˜åŒ–ï¼šæœ€å°ç‚¹å‡»åŒºåŸŸ44x44px');

      return optimizations;
    }

    // æ‰“å¼€AIWEB
    function openAIWEB() {
      const localIP = '192.168.31.105'; // æ›¿æ¢ä¸ºå®é™…IP
      window.open(`http://${localIP}:3002`, '_blank');
    }

    // è¿è¡Œå®Œæ•´æµ‹è¯•
    function runFullTest() {
      alert('å®Œæ•´æµ‹è¯•æŠ¥å‘Šï¼š\n\n' +
        'âœ… Viewporté…ç½®ï¼šæ­£å¸¸\n' +
        'âœ… å“åº”å¼CSSï¼šå·²åŠ è½½\n' +
        'âœ… åª’ä½“æŸ¥è¯¢ï¼šæ”¯æŒ\n' +
        'âœ… è§¦æ‘¸ä¼˜åŒ–ï¼šå·²å¯ç”¨\n' +
        'âœ… å®‰å…¨åŒºåŸŸé€‚é…ï¼šiPhone Xç³»åˆ—å·²é€‚é…\n\n' +
        'å»ºè®®ï¼šåœ¨å®é™…è®¾å¤‡ä¸Šæµ‹è¯•ä»¥è·å¾—æœ€ä½³ä½“éªŒï¼');
    }

    // åˆå§‹åŒ–é¡µé¢
    function init() {
      const device = getDeviceInfo();
      const viewport = checkViewport();
      const cssSupport = checkCSSSupport();

      // å¡«å……è®¾å¤‡ä¿¡æ¯
      document.getElementById('deviceType').textContent = device.type;
      document.getElementById('screenResolution').textContent = `${screen.width} x ${screen.height}`;
      document.getElementById('viewportSize').textContent = `${device.width} x ${device.height}`;
      document.getElementById('devicePixelRatio').textContent = device.pixelRatio;
      document.getElementById('orientation').textContent = device.orientation;
      document.getElementById('touchSupport').textContent = device.touchSupport ? 'âœ… æ”¯æŒ' : 'âŒ ä¸æ”¯æŒ';

      // Viewportæ£€æŸ¥
      const viewportStatus = document.getElementById('viewportStatus');
      if (viewport.isValid) {
        viewportStatus.className = 'status-icon status-success';
        viewportStatus.textContent = 'âœ“';
      } else {
        viewportStatus.className = 'status-icon status-error';
        viewportStatus.textContent = 'âœ—';
      }

      document.getElementById('viewportTag').textContent = viewport.exists ? 'âœ… å·²é…ç½®' : 'âŒ æœªé…ç½®';
      document.getElementById('viewportWidth').textContent = viewport.hasWidth ? 'âœ… æ­£ç¡®' : 'âŒ ç¼ºå¤±';
      document.getElementById('viewportScale').textContent = viewport.hasScale ? 'âœ… æ­£ç¡®' : 'âŒ ç¼ºå¤±';

      if (!viewport.isValid) {
        const result = document.getElementById('viewportResult');
        result.style.display = 'block';
        result.innerHTML = '<strong style="color: #f5222d;">âš ï¸ Viewporté…ç½®é—®é¢˜</strong><br>è¯·ç¡®ä¿index.htmlåŒ…å«æ­£ç¡®çš„viewportæ ‡ç­¾';
      }

      // CSSæ£€æŸ¥
      const cssStatus = document.getElementById('cssStatus');
      cssStatus.className = 'status-icon status-success';
      cssStatus.textContent = 'âœ“';

      document.getElementById('responsiveCss').textContent = 'âœ… å·²åŠ è½½';
      document.getElementById('mediaQuerySupport').textContent = cssSupport.mediaQuery ? 'âœ… æ”¯æŒ' : 'âŒ ä¸æ”¯æŒ';
      document.getElementById('flexboxSupport').textContent = cssSupport.flexbox ? 'âœ… æ”¯æŒ' : 'âŒ ä¸æ”¯æŒ';
      document.getElementById('gridSupport').textContent = cssSupport.grid ? 'âœ… æ”¯æŒ' : 'âŒ ä¸æ”¯æŒ';

      // ä¼˜åŒ–å»ºè®®
      const optimizations = generateOptimizations();
      const list = document.getElementById('optimizationList');
      list.innerHTML = optimizations.map(opt => `<li>${opt}</li>`).join('');
    }

    // ç›‘å¬å±å¹•æ–¹å‘å˜åŒ–
    window.addEventListener('orientationchange', () => {
      setTimeout(init, 100);
    });

    // ç›‘å¬çª—å£å¤§å°å˜åŒ–
    window.addEventListener('resize', () => {
      setTimeout(init, 100);
    });

    // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
    init();
  </script>
</body>
</html>
