<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ” åº”ç­”æœºå™¨äººè¾“å…¥æ¡†è¯Šæ–­</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      padding: 20px;
      min-height: 100vh;
    }
    
    .container {
      max-width: 900px;
      margin: 0 auto;
      background: white;
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }
    
    h1 {
      color: #667eea;
      margin-bottom: 10px;
      font-size: 28px;
    }
    
    .subtitle {
      color: #666;
      margin-bottom: 30px;
      font-size: 14px;
    }
    
    .section {
      margin-bottom: 30px;
      padding: 25px;
      background: linear-gradient(135deg, #f8f9ff 0%, #fff 100%);
      border-radius: 15px;
      border-left: 4px solid #667eea;
    }
    
    h2 {
      color: #667eea;
      margin-bottom: 15px;
      font-size: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .check-item {
      margin: 15px 0;
      padding: 15px;
      background: white;
      border-radius: 10px;
      border: 2px solid #e0e0e0;
    }
    
    .check-item h3 {
      color: #333;
      margin-bottom: 8px;
      font-size: 16px;
    }
    
    .check-item p {
      color: #666;
      line-height: 1.6;
      margin: 5px 0;
    }
    
    .code {
      background: #f5f5f5;
      padding: 3px 8px;
      border-radius: 4px;
      font-family: 'Courier New', monospace;
      font-size: 13px;
      color: #e83e8c;
    }
    
    .btn {
      display: inline-block;
      padding: 12px 24px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      text-decoration: none;
      border-radius: 25px;
      font-weight: 600;
      transition: all 0.3s;
      border: none;
      cursor: pointer;
      font-size: 14px;
      margin: 5px;
    }
    
    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
    }
    
    .btn-success {
      background: linear-gradient(135deg, #52c41a 0%, #389e0d 100%);
    }
    
    .btn-danger {
      background: linear-gradient(135deg, #ff4d4f 0%, #cf1322 100%);
    }
    
    .status {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 600;
      margin-left: 10px;
    }
    
    .status-ok {
      background: #f6ffed;
      color: #52c41a;
      border: 1px solid #b7eb8f;
    }
    
    .status-error {
      background: #fff1f0;
      color: #ff4d4f;
      border: 1px solid #ffccc7;
    }
    
    .status-warning {
      background: #fffbe6;
      color: #faad14;
      border: 1px solid #ffe58f;
    }
    
    .result {
      margin-top: 20px;
      padding: 20px;
      background: white;
      border-radius: 10px;
      border: 2px solid #667eea;
    }
    
    .result h3 {
      color: #667eea;
      margin-bottom: 15px;
    }
    
    .result pre {
      background: #f5f5f5;
      padding: 15px;
      border-radius: 8px;
      overflow-x: auto;
      font-size: 13px;
      line-height: 1.6;
    }
    
    .fix-steps {
      background: #fff7e6;
      border-left: 4px solid #faad14;
      padding: 20px;
      border-radius: 10px;
      margin-top: 20px;
    }
    
    .fix-steps ol {
      margin-left: 20px;
      line-height: 2;
    }
    
    .fix-steps li {
      margin: 10px 0;
    }
    
    .screenshot {
      margin: 20px 0;
      padding: 15px;
      background: #fafafa;
      border-radius: 10px;
      border: 2px dashed #d9d9d9;
      text-align: center;
    }
    
    .screenshot img {
      max-width: 100%;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    
    .alert {
      padding: 15px 20px;
      border-radius: 10px;
      margin: 15px 0;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .alert-info {
      background: #e6f7ff;
      border-left: 4px solid #1890ff;
      color: #0050b3;
    }
    
    .alert-warning {
      background: #fffbe6;
      border-left: 4px solid #faad14;
      color: #ad6800;
    }
    
    .icon {
      font-size: 20px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ” åº”ç­”æœºå™¨äººè¾“å…¥æ¡†è¯Šæ–­</h1>
    <p class="subtitle">æ£€æŸ¥æ–‡å­—è¾“å…¥åŠŸèƒ½æ˜¯å¦æ­£å¸¸æ˜¾ç¤º</p>

    <!-- ç¬¬ä¸€æ­¥ï¼šæ‰“å¼€æ§åˆ¶å°æ£€æŸ¥ -->
    <div class="section">
      <h2>ğŸ“‹ ç¬¬ä¸€æ­¥ï¼šæµè§ˆå™¨æ§åˆ¶å°æ£€æŸ¥</h2>
      
      <div class="check-item">
        <h3>1ï¸âƒ£ æ‰“å¼€å¼€å‘è€…å·¥å…·</h3>
        <p>æŒ‰ <span class="code">F12</span> æˆ– <span class="code">Ctrl+Shift+I</span> æ‰“å¼€å¼€å‘è€…å·¥å…·</p>
        <p>åˆ‡æ¢åˆ° <span class="code">Console (æ§åˆ¶å°)</span> é€‰é¡¹å¡</p>
      </div>

      <div class="check-item">
        <h3>2ï¸âƒ£ ç‚¹å‡»åº”ç­”æœºå™¨äººæŒ‰é’®</h3>
        <p>ç‚¹å‡»å³ä¸‹è§’çš„ AI äººå½¢åŠ©æ‰‹æŒ‰é’®,æ‰“å¼€èŠå¤©çª—å£</p>
      </div>

      <div class="check-item">
        <h3>3ï¸âƒ£ åœ¨æ§åˆ¶å°è¿è¡Œè¯Šæ–­è„šæœ¬</h3>
        <p>å¤åˆ¶ä»¥ä¸‹ä»£ç ,ç²˜è´´åˆ°æ§åˆ¶å°å¹¶æŒ‰å›è½¦:</p>
        <button class="btn" onclick="copyDiagnosticScript()">ğŸ“‹ å¤åˆ¶è¯Šæ–­è„šæœ¬</button>
      </div>

      <div class="result" id="scriptContainer">
        <pre id="diagnosticScript">// åº”ç­”æœºå™¨äººè¾“å…¥æ¡†è¯Šæ–­è„šæœ¬
console.log('ğŸ” å¼€å§‹è¯Šæ–­åº”ç­”æœºå™¨äººè¾“å…¥æ¡†...');

// 1. æ£€æŸ¥èŠå¤©çª—å£æ˜¯å¦å­˜åœ¨
const chatWindow = document.querySelector('.chat-window');
console.log('âœ… èŠå¤©çª—å£:', chatWindow ? 'å·²æ‰¾åˆ°' : 'âŒ æœªæ‰¾åˆ°');

// 2. æ£€æŸ¥è¾“å…¥å®¹å™¨
const inputContainer = document.querySelector('.chat-input-container');
console.log('âœ… è¾“å…¥å®¹å™¨:', inputContainer ? 'å·²æ‰¾åˆ°' : 'âŒ æœªæ‰¾åˆ°');

// 3. æ£€æŸ¥æ–‡å­—è¾“å…¥æ¡†
const textInput = document.querySelector('.text-input');
const textarea = document.querySelector('.text-input textarea');
console.log('âœ… è¾“å…¥æ¡†å…ƒç´ :', textInput ? 'å·²æ‰¾åˆ°' : 'âŒ æœªæ‰¾åˆ°');
console.log('âœ… Textareaå…ƒç´ :', textarea ? 'å·²æ‰¾åˆ°' : 'âŒ æœªæ‰¾åˆ°');

// 4. æ£€æŸ¥è¾“å…¥æ¡†æ ·å¼
if (textarea) {
  const styles = window.getComputedStyle(textarea);
  console.log('ğŸ“Š è¾“å…¥æ¡†æ ·å¼:');
  console.log('  - display:', styles.display);
  console.log('  - visibility:', styles.visibility);
  console.log('  - opacity:', styles.opacity);
  console.log('  - height:', styles.height);
  console.log('  - min-height:', styles.minHeight);
  console.log('  - z-index:', styles.zIndex);
  console.log('  - position:', styles.position);
  
  // æ£€æŸ¥æ˜¯å¦è¢«ç¦ç”¨
  console.log('  - disabled:', textarea.disabled);
  console.log('  - readonly:', textarea.readOnly);
}

// 5. æ£€æŸ¥æ˜¯å¦è¢«å…¶ä»–å…ƒç´ é®æŒ¡
if (inputContainer) {
  const rect = inputContainer.getBoundingClientRect();
  console.log('ğŸ“ è¾“å…¥å®¹å™¨ä½ç½®:');
  console.log('  - top:', rect.top);
  console.log('  - left:', rect.left);
  console.log('  - width:', rect.width);
  console.log('  - height:', rect.height);
  console.log('  - æ˜¯å¦åœ¨å¯è§†åŒºåŸŸ:', rect.top < window.innerHeight && rect.bottom > 0);
}

// 6. æ£€æŸ¥è¯­éŸ³å½•éŸ³çŠ¶æ€
console.log('ğŸ¤ æ£€æŸ¥Vueå®ä¾‹çŠ¶æ€...');
const vueApp = document.querySelector('#app').__vue_app__;
if (vueApp) {
  console.log('âœ… Vueåº”ç”¨å·²æ‰¾åˆ°');
} else {
  console.log('âš ï¸ æ— æ³•è®¿é—®Vueåº”ç”¨å®ä¾‹');
}

// 7. é«˜äº®æ˜¾ç¤ºè¾“å…¥æ¡†
if (textarea) {
  textarea.style.border = '3px solid red';
  textarea.style.minHeight = '60px';
  console.log('ğŸ¯ å·²ç”¨çº¢è‰²è¾¹æ¡†æ ‡è®°è¾“å…¥æ¡†');
  setTimeout(() => {
    textarea.style.border = '';
  }, 3000);
}

console.log('âœ… è¯Šæ–­å®Œæˆ!è¯·æŸ¥çœ‹ä¸Šæ–¹è¾“å‡ºç»“æœ');
</pre>
      </div>
    </div>

    <!-- å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ -->
    <div class="section">
      <h2>ğŸ”§ å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ</h2>

      <div class="check-item">
        <h3>é—®é¢˜1: è¾“å…¥æ¡†é«˜åº¦å¤ªå°ï¼Œçœ‹ä¸è§ <span class="status status-warning">å¸¸è§</span></h3>
        <p><strong>ç—‡çŠ¶:</strong> è¾“å…¥æ¡†å­˜åœ¨ä½†é«˜åº¦ä¸º0æˆ–éå¸¸å°</p>
        <p><strong>åŸå› :</strong> CSSæ ·å¼å†²çªæˆ–ç§»åŠ¨ç«¯é€‚é…é—®é¢˜</p>
        <button class="btn btn-success" onclick="fixInputHeight()">ğŸ”§ ç«‹å³ä¿®å¤é«˜åº¦é—®é¢˜</button>
      </div>

      <div class="check-item">
        <h3>é—®é¢˜2: è¾“å…¥æ¡†è¢«ç¦ç”¨ <span class="status status-warning">å¸¸è§</span></h3>
        <p><strong>ç—‡çŠ¶:</strong> è¾“å…¥æ¡†å‘ˆç°è‰²ï¼Œæ— æ³•ç‚¹å‡»</p>
        <p><strong>åŸå› :</strong> è¯­éŸ³å½•éŸ³çŠ¶æ€æœªé‡ç½®æˆ–AIæ­£åœ¨è¾“å…¥</p>
        <button class="btn btn-success" onclick="enableInput()">ğŸ”§ å¯ç”¨è¾“å…¥æ¡†</button>
      </div>

      <div class="check-item">
        <h3>é—®é¢˜3: è¾“å…¥æ¡†è¢«å…¶ä»–å…ƒç´ é®æŒ¡ <span class="status status-error">éœ€ä¿®å¤</span></h3>
        <p><strong>ç—‡çŠ¶:</strong> è¾“å…¥æ¡†å­˜åœ¨ä½†ç‚¹å‡»æ— ååº”</p>
        <p><strong>åŸå› :</strong> z-indexå±‚çº§é—®é¢˜</p>
        <button class="btn btn-success" onclick="fixZIndex()">ğŸ”§ ä¿®å¤å±‚çº§é—®é¢˜</button>
      </div>

      <div class="check-item">
        <h3>é—®é¢˜4: ç§»åŠ¨ç«¯è¾“å…¥æ¡†ä¸æ˜¾ç¤º <span class="status status-warning">ç§»åŠ¨ç«¯</span></h3>
        <p><strong>ç—‡çŠ¶:</strong> æ‰‹æœºæµè§ˆå™¨ä¸­çœ‹ä¸åˆ°è¾“å…¥æ¡†</p>
        <p><strong>åŸå› :</strong> å“åº”å¼æ ·å¼æœªæ­£ç¡®åº”ç”¨</p>
        <button class="btn btn-success" onclick="fixMobileInput()">ğŸ”§ ä¿®å¤ç§»åŠ¨ç«¯æ˜¾ç¤º</button>
      </div>
    </div>

    <!-- æ‰‹åŠ¨ä¿®å¤æ­¥éª¤ -->
    <div class="fix-steps">
      <h3>ğŸ“ æ‰‹åŠ¨ä¿®å¤æ­¥éª¤ï¼ˆå¦‚æœä¸Šè¿°æŒ‰é’®æ— æ•ˆï¼‰</h3>
      <ol>
        <li>åœ¨æ§åˆ¶å°æ‰¾åˆ°è¾“å…¥æ¡†å…ƒç´ ï¼š <span class="code">document.querySelector('.text-input textarea')</span></li>
        <li>æ£€æŸ¥å…ƒç´ æ ·å¼ï¼Œç¡®è®¤æ˜¯å¦æœ‰é—®é¢˜</li>
        <li>è¿è¡Œä¿®å¤è„šæœ¬æˆ–æ‰‹åŠ¨è°ƒæ•´æ ·å¼</li>
        <li>å¦‚æœé—®é¢˜ä»å­˜åœ¨ï¼Œéœ€è¦ä¿®æ”¹æºä»£ç  <span class="code">src/components/AiChat.vue</span></li>
      </ol>
    </div>

    <!-- æˆªå›¾è¯´æ˜ -->
    <div class="section">
      <h2>ğŸ“¸ æ­£ç¡®çš„è¾“å…¥æ¡†åº”è¯¥æ˜¯è¿™æ ·çš„</h2>
      <div class="alert alert-info">
        <span class="icon">ğŸ’¡</span>
        <div>
          <strong>æ­£å¸¸çŠ¶æ€:</strong>
          <p>âœ… è¾“å…¥æ¡†æ¸…æ™°å¯è§ï¼Œé«˜åº¦è‡³å°‘40px</p>
          <p>âœ… æœ‰"è¾“å…¥æ¶ˆæ¯ï¼ŒæŒ‰å›è½¦å‘é€..."æç¤ºæ–‡å­—</p>
          <p>âœ… æ—è¾¹æœ‰è¯­éŸ³æŒ‰é’®å’Œå‘é€æŒ‰é’®</p>
          <p>âœ… å¯ä»¥æ­£å¸¸ç‚¹å‡»å’Œè¾“å…¥æ–‡å­—</p>
        </div>
      </div>
    </div>

    <!-- å¿«é€Ÿæ“ä½œæŒ‰é’® -->
    <div class="section">
      <h2>âš¡ å¿«é€Ÿæ“ä½œ</h2>
      <button class="btn btn-success" onclick="testAllFixes()">ğŸ”§ ä¸€é”®ä¿®å¤æ‰€æœ‰é—®é¢˜</button>
      <button class="btn" onclick="testInput()">ğŸ§ª æµ‹è¯•è¾“å…¥åŠŸèƒ½</button>
      <button class="btn btn-danger" onclick="resetChat()">ğŸ”„ é‡ç½®èŠå¤©çª—å£</button>
    </div>

    <div class="alert alert-warning">
      <span class="icon">âš ï¸</span>
      <div>
        <strong>æ³¨æ„:</strong> å¦‚æœä»¥ä¸Šæ‰€æœ‰æ–¹æ³•éƒ½æ— æ•ˆï¼Œå¯èƒ½éœ€è¦ä¿®æ”¹æºä»£ç ã€‚è¯·è”ç³»å¼€å‘äººå‘˜æˆ–æŸ¥çœ‹ä¸‹æ–¹çš„ä»£ç ä¿®å¤æ–¹æ¡ˆã€‚
      </div>
    </div>
  </div>

  <script>
    // å¤åˆ¶è¯Šæ–­è„šæœ¬
    function copyDiagnosticScript() {
      const script = document.getElementById('diagnosticScript').textContent;
      navigator.clipboard.writeText(script).then(() => {
        alert('âœ… è¯Šæ–­è„šæœ¬å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼\n\nè¯·ï¼š\n1. æŒ‰F12æ‰“å¼€æ§åˆ¶å°\n2. ç²˜è´´è„šæœ¬\n3. æŒ‰å›è½¦è¿è¡Œ');
      });
    }

    // ä¿®å¤è¾“å…¥æ¡†é«˜åº¦
    function fixInputHeight() {
      const textarea = document.querySelector('.text-input textarea');
      if (textarea) {
        textarea.style.minHeight = '60px';
        textarea.style.height = '60px';
        textarea.style.padding = '12px 16px';
        textarea.style.fontSize = '15px';
        alert('âœ… å·²ä¿®å¤è¾“å…¥æ¡†é«˜åº¦ï¼è¯·æ£€æŸ¥èŠå¤©çª—å£ã€‚');
      } else {
        alert('âŒ æœªæ‰¾åˆ°è¾“å…¥æ¡†å…ƒç´ ï¼Œè¯·å…ˆæ‰“å¼€èŠå¤©çª—å£ã€‚');
      }
    }

    // å¯ç”¨è¾“å…¥æ¡†
    function enableInput() {
      const textarea = document.querySelector('.text-input textarea');
      if (textarea) {
        textarea.disabled = false;
        textarea.readOnly = false;
        textarea.style.opacity = '1';
        textarea.style.cursor = 'text';
        alert('âœ… å·²å¯ç”¨è¾“å…¥æ¡†ï¼');
      } else {
        alert('âŒ æœªæ‰¾åˆ°è¾“å…¥æ¡†å…ƒç´ ï¼Œè¯·å…ˆæ‰“å¼€èŠå¤©çª—å£ã€‚');
      }
    }

    // ä¿®å¤z-indexå±‚çº§
    function fixZIndex() {
      const inputContainer = document.querySelector('.chat-input-container');
      const textarea = document.querySelector('.text-input textarea');
      
      if (inputContainer) {
        inputContainer.style.zIndex = '1000';
        inputContainer.style.position = 'relative';
      }
      
      if (textarea) {
        textarea.style.position = 'relative';
        textarea.style.zIndex = '10';
      }
      
      alert('âœ… å·²ä¿®å¤å±‚çº§é—®é¢˜ï¼');
    }

    // ä¿®å¤ç§»åŠ¨ç«¯æ˜¾ç¤º
    function fixMobileInput() {
      const inputContainer = document.querySelector('.chat-input-container');
      const textarea = document.querySelector('.text-input textarea');
      const chatWindow = document.querySelector('.chat-window');
      
      if (inputContainer) {
        inputContainer.style.position = 'sticky';
        inputContainer.style.bottom = '0';
        inputContainer.style.background = '#fff';
        inputContainer.style.zIndex = '100';
      }
      
      if (textarea) {
        textarea.style.fontSize = '16px'; // é˜²æ­¢iOSç¼©æ”¾
        textarea.style.minHeight = '50px';
        textarea.style.width = '100%';
      }
      
      if (chatWindow && window.innerWidth <= 768) {
        chatWindow.style.width = '100vw';
        chatWindow.style.height = '100vh';
      }
      
      alert('âœ… å·²ä¿®å¤ç§»åŠ¨ç«¯æ˜¾ç¤ºï¼');
    }

    // ä¸€é”®ä¿®å¤æ‰€æœ‰é—®é¢˜
    function testAllFixes() {
      fixInputHeight();
      setTimeout(() => enableInput(), 100);
      setTimeout(() => fixZIndex(), 200);
      setTimeout(() => fixMobileInput(), 300);
      setTimeout(() => {
        alert('âœ… æ‰€æœ‰ä¿®å¤å·²åº”ç”¨ï¼\n\nè¯·æµ‹è¯•è¾“å…¥æ¡†æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚\nå¦‚æœä»æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹æ§åˆ¶å°è¯Šæ–­ä¿¡æ¯ã€‚');
      }, 500);
    }

    // æµ‹è¯•è¾“å…¥åŠŸèƒ½
    function testInput() {
      const textarea = document.querySelector('.text-input textarea');
      if (textarea) {
        textarea.value = 'æµ‹è¯•è¾“å…¥åŠŸèƒ½...';
        textarea.focus();
        alert('âœ… å¦‚æœèƒ½çœ‹åˆ°"æµ‹è¯•è¾“å…¥åŠŸèƒ½..."æ–‡å­—ï¼Œè¯´æ˜è¾“å…¥æ¡†æ­£å¸¸ï¼');
      } else {
        alert('âŒ æœªæ‰¾åˆ°è¾“å…¥æ¡†ï¼Œè¯·å…ˆæ‰“å¼€èŠå¤©çª—å£ã€‚');
      }
    }

    // é‡ç½®èŠå¤©çª—å£
    function resetChat() {
      if (confirm('ç¡®å®šè¦å…³é—­å¹¶é‡æ–°æ‰“å¼€èŠå¤©çª—å£å—ï¼Ÿ')) {
        const chatButton = document.querySelector('.chat-button.ai-assistant');
        const chatWindow = document.querySelector('.chat-window');
        
        if (chatWindow) {
          chatWindow.style.display = 'none';
          setTimeout(() => {
            chatWindow.style.display = '';
            if (chatButton) chatButton.click();
          }, 500);
        }
        
        alert('âœ… èŠå¤©çª—å£å·²é‡ç½®ï¼');
      }
    }

    // é¡µé¢åŠ è½½å®Œæˆæç¤º
    window.onload = function() {
      console.log('ğŸ” åº”ç­”æœºå™¨äººè¾“å…¥æ¡†è¯Šæ–­é¡µé¢å·²åŠ è½½');
      console.log('ğŸ“‹ è¯·æŒ‰ç…§é¡µé¢æŒ‡å¼•è¿›è¡Œè¯Šæ–­');
    };
  </script>
</body>
</html>
