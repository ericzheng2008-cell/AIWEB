<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å·¥ä½œæµæ™ºèƒ½ä½“æµ‹è¯•ä¸­å¿ƒ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 40px;
            max-width: 900px;
            width: 100%;
        }
        
        h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 30px;
            font-size: 36px;
        }
        
        .status {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            border-left: 4px solid #667eea;
        }
        
        .status-item {
            display: flex;
            align-items: center;
            margin: 10px 0;
            font-size: 16px;
        }
        
        .status-icon {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-weight: bold;
        }
        
        .status-icon.success {
            background: #28a745;
            color: white;
        }
        
        .status-icon.loading {
            background: #ffc107;
            color: white;
            animation: pulse 1.5s infinite;
        }
        
        .status-icon.error {
            background: #dc3545;
            color: white;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .version-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .version-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 25px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .version-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        
        .version-card.recommended {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .version-card.recommended::before {
            content: 'â­ æ¨è';
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255,255,255,0.3);
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
        }
        
        .version-card h3 {
            font-size: 22px;
            margin-bottom: 10px;
        }
        
        .version-card p {
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 15px;
            opacity: 0.8;
        }
        
        .version-card .features {
            font-size: 13px;
            opacity: 0.7;
        }
        
        .test-btn {
            width: 100%;
            padding: 12px;
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .version-card.recommended .test-btn {
            background: rgba(255,255,255,0.3);
            border-color: rgba(255,255,255,0.5);
            color: white;
        }
        
        .test-btn:hover {
            background: rgba(255,255,255,0.4);
            border-color: rgba(255,255,255,0.6);
        }
        
        .tools {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .tool-btn {
            flex: 1;
            min-width: 200px;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .tool-btn.primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .tool-btn.success {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
        }
        
        .tool-btn.warning {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }
        
        .tool-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .console {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 10px;
            margin-top: 30px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            max-height: 300px;
            overflow-y: auto;
            display: none;
        }
        
        .console.show {
            display: block;
        }
        
        .console-line {
            margin: 5px 0;
            padding: 3px 0;
        }
        
        .console-line.success {
            color: #50fa7b;
        }
        
        .console-line.error {
            color: #ff5555;
        }
        
        .console-line.info {
            color: #8be9fd;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¤– å·¥ä½œæµæ™ºèƒ½ä½“æµ‹è¯•ä¸­å¿ƒ</h1>
        
        <div class="status">
            <div class="status-item">
                <div class="status-icon loading" id="serverStatus">?</div>
                <span id="serverText">æ­£åœ¨æ£€æµ‹æœåŠ¡å™¨çŠ¶æ€...</span>
            </div>
            <div class="status-item">
                <div class="status-icon loading" id="apiStatus">?</div>
                <span id="apiText">æ­£åœ¨æ£€æµ‹åç«¯API...</span>
            </div>
        </div>
        
        <h2 style="margin-bottom: 20px; color: #495057;">é€‰æ‹©ç‰ˆæœ¬æµ‹è¯•</h2>
        
        <div class="version-grid">
            <div class="version-card" onclick="openWorkflow('http://localhost:3000/workflow-agent')">
                <h3>v2.7 åŸºç¡€ç‰ˆ</h3>
                <p>å…¥é—¨çº§å·¥ä½œæµç®¡ç†ï¼Œ8ä¸ªæ ¸å¿ƒèŠ‚ç‚¹ï¼Œç®€å•æ˜“ç”¨</p>
                <div class="features">âœ“ æ‹–æ‹½ç¼–è¾‘ âœ“ AIç”Ÿæˆ âœ“ 8èŠ‚ç‚¹</div>
                <button class="test-btn">æµ‹è¯•æ­¤ç‰ˆæœ¬</button>
            </div>
            
            <div class="version-card" onclick="openWorkflow('http://localhost:3000/workflow-agent-v3')">
                <h3>v3.0 ä¼ä¸šç‰ˆ</h3>
                <p>ä¼ä¸šçº§åŠŸèƒ½ï¼Œ12ä¸ªèŠ‚ç‚¹ï¼ŒSLAç®¡ç†ï¼Œæƒé™æ§åˆ¶</p>
                <div class="features">âœ“ éƒ¨é—¨ç®¡ç† âœ“ SLA âœ“ æƒé™å®¡è®¡</div>
                <button class="test-btn">æµ‹è¯•æ­¤ç‰ˆæœ¬</button>
            </div>
            
            <div class="version-card" onclick="openWorkflow('http://localhost:3000/workflow-editor-v4')">
                <h3>v4.0 ä¸“ä¸šç‰ˆ</h3>
                <p>ä¸“ä¸šçº§ç¼–è¾‘å™¨ï¼Œ18ä¸ªèŠ‚ç‚¹ï¼Œæ•°æ®è¿½è¸ªï¼ŒAIåŠ©æ‰‹</p>
                <div class="features">âœ“ AIåŠ©æ‰‹ âœ“ æ•°æ®è¿½è¸ª âœ“ 18èŠ‚ç‚¹</div>
                <button class="test-btn">æµ‹è¯•æ­¤ç‰ˆæœ¬</button>
            </div>
            
            <div class="version-card recommended" onclick="openWorkflow('http://localhost:3000/workflow-editor-v5-n8n')">
                <h3>v7.0 æ——èˆ°ç‰ˆ</h3>
                <p>N8Né£æ ¼ç•Œé¢ï¼Œ30+èŠ‚ç‚¹ï¼Œ25å€è¶…å¤§èŠ‚ç‚¹ï¼Œå®Œæ•´ä¼ä¸šåŠŸèƒ½</p>
                <div class="features">âœ“ N8Né£æ ¼ âœ“ è¶…å¤§èŠ‚ç‚¹ âœ“ å®Œæ•´åŠŸèƒ½</div>
                <button class="test-btn">æµ‹è¯•æ­¤ç‰ˆæœ¬</button>
            </div>
        </div>
        
        <h2 style="margin: 30px 0 20px; color: #495057;">å¿«é€Ÿå·¥å…·</h2>
        
        <div class="tools">
            <button class="tool-btn primary" onclick="testAll()">
                ğŸ¯ æµ‹è¯•æ‰€æœ‰ç‰ˆæœ¬
            </button>
            <button class="tool-btn success" onclick="showConsole()">
                ğŸ“Š æ˜¾ç¤ºè¯Šæ–­æ§åˆ¶å°
            </button>
            <button class="tool-btn warning" onclick="openGuide()">
                ğŸ“– æ‰“å¼€ä½¿ç”¨æŒ‡å—
            </button>
        </div>
        
        <div id="console" class="console">
            <div class="console-line info">> è¯Šæ–­æ§åˆ¶å°å·²å¯åŠ¨</div>
        </div>
    </div>
    
    <script>
        // æ£€æµ‹æœåŠ¡å™¨çŠ¶æ€
        function checkServer() {
            const serverStatus = document.getElementById('serverStatus');
            const serverText = document.getElementById('serverText');
            
            fetch('http://localhost:3000/')
                .then(response => {
                    if (response.ok) {
                        serverStatus.className = 'status-icon success';
                        serverStatus.textContent = 'âœ“';
                        serverText.textContent = 'å‰ç«¯æœåŠ¡å™¨è¿è¡Œæ­£å¸¸ (ç«¯å£3000)';
                        addConsoleLog('success', 'âœ“ å‰ç«¯æœåŠ¡å™¨è¿æ¥æˆåŠŸ');
                    } else {
                        throw new Error('æœåŠ¡å™¨å“åº”å¼‚å¸¸');
                    }
                })
                .catch(error => {
                    serverStatus.className = 'status-icon error';
                    serverStatus.textContent = 'âœ—';
                    serverText.textContent = 'å‰ç«¯æœåŠ¡å™¨æœªå¯åŠ¨ - è¯·è¿è¡Œ npm run dev';
                    addConsoleLog('error', 'âœ— å‰ç«¯æœåŠ¡å™¨æ— æ³•è¿æ¥');
                    addConsoleLog('info', '  å»ºè®®: è¿è¡Œ "npm run dev" å¯åŠ¨æœåŠ¡å™¨');
                });
        }
        
        // æ£€æµ‹åç«¯API
        function checkAPI() {
            const apiStatus = document.getElementById('apiStatus');
            const apiText = document.getElementById('apiText');
            
            fetch('http://localhost:5000/api/health')
                .then(response => response.json())
                .then(data => {
                    apiStatus.className = 'status-icon success';
                    apiStatus.textContent = 'âœ“';
                    apiText.textContent = 'åç«¯APIè¿è¡Œæ­£å¸¸ (ç«¯å£5000)';
                    addConsoleLog('success', 'âœ“ åç«¯APIè¿æ¥æˆåŠŸ');
                })
                .catch(error => {
                    apiStatus.className = 'status-icon error';
                    apiStatus.textContent = 'âœ—';
                    apiText.textContent = 'åç«¯APIæœªå¯åŠ¨ - AIåŠŸèƒ½å°†ä¸å¯ç”¨';
                    addConsoleLog('error', 'âœ— åç«¯APIæ— æ³•è¿æ¥');
                    addConsoleLog('info', '  æ³¨æ„: AIåŠŸèƒ½å°†ä¸å¯ç”¨ï¼Œä½†åŸºç¡€åŠŸèƒ½ä»å¯æµ‹è¯•');
                });
        }
        
        // æ‰“å¼€å·¥ä½œæµ
        function openWorkflow(url) {
            addConsoleLog('info', 'æ­£åœ¨æ‰“å¼€: ' + url);
            window.open(url, '_blank');
            addConsoleLog('success', 'å·²åœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€');
        }
        
        // æµ‹è¯•æ‰€æœ‰ç‰ˆæœ¬
        function testAll() {
            addConsoleLog('info', 'æ­£åœ¨æ‰“å¼€æ‰€æœ‰4ä¸ªç‰ˆæœ¬...');
            const urls = [
                'http://localhost:3000/workflow-agent',
                'http://localhost:3000/workflow-agent-v3',
                'http://localhost:3000/workflow-editor-v4',
                'http://localhost:3000/workflow-editor-v5-n8n'
            ];
            
            urls.forEach((url, index) => {
                setTimeout(() => {
                    window.open(url, '_blank');
                    addConsoleLog('success', `âœ“ å·²æ‰“å¼€ v${index === 0 ? '2.7' : index === 1 ? '3.0' : index === 2 ? '4.0' : '7.0'}`);
                }, index * 500);
            });
        }
        
        // æ˜¾ç¤ºæ§åˆ¶å°
        function showConsole() {
            const console = document.getElementById('console');
            console.classList.toggle('show');
            if (console.classList.contains('show')) {
                addConsoleLog('info', 'æ§åˆ¶å°å·²æ˜¾ç¤º');
            }
        }
        
        // æ‰“å¼€ä½¿ç”¨æŒ‡å—
        function openGuide() {
            addConsoleLog('info', 'æ­£åœ¨æ‰“å¼€ä½¿ç”¨æŒ‡å—...');
            window.open('å·¥ä½œæµæ™ºèƒ½ä½“å¿«é€Ÿä½¿ç”¨æŒ‡å—.html', '_blank');
        }
        
        // æ·»åŠ æ§åˆ¶å°æ—¥å¿—
        function addConsoleLog(type, message) {
            const console = document.getElementById('console');
            const line = document.createElement('div');
            line.className = `console-line ${type}`;
            line.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            console.appendChild(line);
            console.scrollTop = console.scrollHeight;
        }
        
        // é¡µé¢åŠ è½½æ—¶æ£€æµ‹çŠ¶æ€
        window.addEventListener('load', () => {
            addConsoleLog('info', 'å¼€å§‹æ£€æµ‹ç¯å¢ƒ...');
            checkServer();
            setTimeout(checkAPI, 500);
        });
    </script>
</body>
</html>
