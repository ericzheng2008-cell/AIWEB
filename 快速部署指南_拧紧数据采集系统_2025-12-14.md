# 快速部署指南 - 拧紧数据采集系统

## 🚀 5分钟快速部署

### 步骤1: 启动系统

**方式A - 使用快捷脚本**（推荐）:
```
双击运行: 启动拧紧数据系统.bat
```

**方式B - 命令行**:
```bash
cd c:/Users/EricZ/CodeBuddy/AIWEB1
npm run dev
```

### 步骤2: 访问仪表板

浏览器自动打开，或手动访问:
```
http://localhost:3002/tightening-dashboard
```

### 步骤3: 配置小工具

1. 点击顶部工具栏的 **"+ 添加小工具"** 按钮
2. 选择需要的小工具类型：
   - ✅ 实时统计卡片
   - ✅ 趋势分析图表
   - ✅ NOK分析
   - ✅ Cpk图表
   - ✅ 实时结果流
   - ✅ 异常报警
   - ✅ 轨迹分析
   - ✅ 控制器事件

3. 拖拽调整小工具位置和大小
4. 点击 **"保存布局"** 保存配置

### 步骤4: 连接控制器（可选）

1. 点击顶部 **"⚙️ 设置"** 按钮
2. 进入"控制器连接"标签
3. 点击"添加控制器"
4. 填写控制器信息：
   ```
   名称: PF4000-001
   IP地址: 192.168.1.100
   端口: 4545
   协议: Open Protocol
   ```
5. 点击"连接"并测试通信

---

## 📊 预设布局方案

### 方案1: 生产监控布局

适用场景：实时监控生产线质量

**小工具配置**:
```
┌─────────────────────────────────────────┐
│         实时统计卡片 (12列)              │
├──────────────────┬──────────────────────┤
│   趋势分析 (8列) │   NOK分析 (4列)       │
├──────────────────┼──────────────────────┤
│  Cpk图表 (6列)   │  实时结果流 (6列)     │
├──────────────────┴──────────────────────┤
│        异常报警 (12列)                   │
└─────────────────────────────────────────┘
```

### 方案2: 质量分析布局

适用场景：深度质量分析和工艺优化

**小工具配置**:
```
┌─────────────────────────────────────────┐
│  Cpk分析 (6列)   │  NOK分析 (6列)        │
├──────────────────┴──────────────────────┤
│            轨迹分析 (12列)                │
├──────────────────┬──────────────────────┤
│  趋势图表 (8列)  │  实时统计 (4列)       │
└──────────────────┴──────────────────────┘
```

### 方案3: 简洁监控布局

适用场景：大屏显示、简洁监控

**小工具配置**:
```
┌─────────────────────────────────────────┐
│         实时统计卡片 (12列)              │
├─────────────────────────────────────────┤
│         趋势分析图表 (12列)              │
├─────────────────────────────────────────┤
│         异常报警 (12列)                  │
└─────────────────────────────────────────┘
```

---

## 🎯 核心功能测试清单

### ✅ 必测功能

- [ ] 小工具拖拽移动
- [ ] 小工具调整大小
- [ ] 布局保存/加载
- [ ] 实时数据刷新（3秒）
- [ ] 趋势图表显示
- [ ] NOK分析统计
- [ ] Cpk计算显示
- [ ] 异常报警提示
- [ ] 全屏模式切换
- [ ] 设置面板操作

### ⚡ 性能测试

- [ ] 页面加载时间 < 2秒
- [ ] 数据刷新延迟 < 3秒
- [ ] 图表渲染时间 < 500ms
- [ ] 大数据量（1000条）加载 < 5秒
- [ ] 内存占用 < 200MB

---

## 🔧 配置文件说明

### 小工具配置 (localStorage)

```javascript
// 保存位置: localStorage.getItem('toolsnet8_dashboard_layout')
{
  "version": "1.0.0",
  "layout": [
    {
      "i": "statistics-1",
      "type": "statistics",
      "x": 0,
      "y": 0,
      "w": 12,
      "h": 2,
      "minW": 4,
      "minH": 2
    }
    // ... 更多小工具配置
  ],
  "settings": {
    "refreshInterval": 3000,
    "theme": "dark",
    "language": "zh-CN"
  }
}
```

### 控制器连接配置

```javascript
// 保存位置: localStorage.getItem('toolsnet8_controllers')
[
  {
    "id": "ctrl-001",
    "name": "PF4000-001",
    "ip": "192.168.1.100",
    "port": 4545,
    "protocol": "OpenProtocol",
    "status": "connected",
    "lastUpdate": "2025-12-14T10:30:00Z"
  }
]
```

---

## 🐛 故障排查

### 问题1: 页面空白/白屏

**可能原因**:
- 浏览器缓存问题
- JavaScript错误

**解决方法**:
```bash
# 1. 清除浏览器缓存
Ctrl+Shift+Del

# 2. 强制刷新页面
Ctrl+F5

# 3. 检查浏览器Console错误
F12 → Console
```

### 问题2: 小工具不显示数据

**可能原因**:
- WebSocket连接失败
- 数据源配置错误

**解决方法**:
1. 检查Console是否有错误信息
2. 确认后端服务是否正常运行
3. 检查控制器连接状态
4. 尝试刷新小工具（点击刷新按钮）

### 问题3: 图表显示异常

**可能原因**:
- ECharts未正确加载
- 数据格式错误

**解决方法**:
```bash
# 重新安装依赖
npm install echarts@latest --save
npm run dev
```

### 问题4: 布局保存失败

**可能原因**:
- localStorage空间不足
- 浏览器隐私模式

**解决方法**:
1. 清理localStorage数据
2. 退出隐私/无痕模式
3. 检查浏览器设置（允许存储本地数据）

---

## 📱 多设备访问

### PC浏览器
```
推荐: Chrome 90+, Edge 90+, Firefox 88+
访问: http://localhost:3002/tightening-dashboard
```

### 平板/手机
```
1. 确保设备与PC在同一局域网
2. 查看PC的IP地址: ipconfig
3. 访问: http://192.168.x.x:3002/tightening-dashboard
```

### 大屏显示
```
1. 进入全屏模式: F11
2. 隐藏工具栏: Ctrl+Shift+F
3. 自动刷新: 已启用（3秒）
```

---

## 🔐 安全配置

### 生产环境部署

**步骤1: 构建生产版本**
```bash
npm run build
```

**步骤2: 配置HTTPS**
```nginx
server {
    listen 443 ssl;
    server_name toolsnet8.yourdomain.com;
    
    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;
    
    location / {
        root /path/to/dist;
        try_files $uri $uri/ /index.html;
    }
}
```

**步骤3: 配置防火墙**
```bash
# 仅允许内网访问
sudo ufw allow from 192.168.0.0/16 to any port 443
```

---

## 📊 监控与日志

### 启用详细日志

在浏览器Console中执行:
```javascript
// 启用调试模式
localStorage.setItem('toolsnet8_debug', 'true')
location.reload()

// 查看日志
localStorage.getItem('toolsnet8_logs')
```

### 性能监控

```javascript
// 查看性能指标
performance.getEntriesByType('navigation')
performance.getEntriesByType('resource')
```

---

## 🎓 培训资料

### 快速入门视频（5分钟）
```
1. 系统概览
2. 小工具配置
3. 实时监控
4. 报表生成
```

### 操作手册（PDF）
```
📄 ToolsNet8_用户手册_v3.0.0.pdf
📄 ToolsNet8_管理员手册_v3.0.0.pdf
```

---

## 📞 技术支持

### 在线支持
- 💬 在线客服: 工作日 9:00-18:00
- 📧 邮箱: support@toolsnet8.com
- 📱 电话: 400-xxx-xxxx

### 远程协助
```
需要远程协助时:
1. 安装 TeamViewer / 向日葵
2. 告知ID和密码
3. 等待技术人员连接
```

---

## ✅ 部署完成检查清单

- [ ] 系统启动成功
- [ ] 仪表板页面正常打开
- [ ] 小工具正常显示
- [ ] 数据实时刷新（3秒）
- [ ] 布局可保存/加载
- [ ] 全屏模式正常
- [ ] 设置面板可访问
- [ ] 图表交互正常
- [ ] 报警功能正常
- [ ] 导出功能正常

---

## 🎉 部署成功！

您已成功部署 **ToolsNet 8 拧紧数据采集系统**！

**下一步**:
1. ✅ 配置控制器连接
2. ✅ 自定义仪表板布局
3. ✅ 设置报警阈值
4. ✅ 创建自定义报告
5. ✅ 培训操作人员

**立即体验**: http://localhost:3002/tightening-dashboard

---

**版权所有 © 2025 ToolsNet 8 | v3.0.0**
