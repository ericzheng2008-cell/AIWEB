# 📊 客户沙盘分析使用说明 V1.0

## 📋 功能概述

客户沙盘分析是明升AICRM v3.0的核心功能之一，提供AI驱动的客户全景分析与商业模拟能力。

### 核心功能
- ✅ **3D沙盘可视化** - 立体展示客户数据维度
- ✅ **时间线分析** - 客户历史行为趋势追踪
- ✅ **矩阵图分析** - 客户价值与风险二维评估
- ✅ **AI智能洞察** - 自动生成客户画像与建议
- ✅ **策略推荐** - AI生成针对性营销策略
- ✅ **报告导出** - 一键导出完整分析报告

---

## 🚀 快速开始

### 1. 访问沙盘分析

#### 方法A: 通过AICRM导航菜单
1. 访问 `http://localhost:3003/mingsheng-aicrm`
2. 点击顶部导航栏的**"客户沙盘"**菜单项
3. 系统自动加载客户沙盘分析页面

#### 方法B: 直接访问URL
```
http://localhost:3003/mingsheng-aicrm
# 然后点击菜单切换到沙盘模块
```

### 2. 选择客户

**重要：必须选择客户后，"策略推荐"和"导出报告"按钮才可用！**

- 左侧显示客户列表（默认自动选择第一个客户）
- 点击任意客户卡片进行切换
- 使用顶部搜索框快速查找客户

### 3. 使用功能

#### ✅ 查看沙盘分析
- **3D视图** - 立体展示销售额、活跃度等多维数据
- **时间线** - 查看客户销售额、活跃度、满意度趋势
- **矩阵图** - 评估客户价值与流失风险关系

#### ✅ AI智能洞察（右侧面板）
- **客户画像** - 等级、生命周期、活跃度、忠诚度
- **价值分析** - 累计价值、年度贡献、预测LTV
- **风险评估** - 流失风险百分比、风险因素列表
- **AI建议** - 自动生成的行动建议

#### ✅ 策略推荐
1. 确保已选择客户
2. 点击**"策略推荐"**按钮（绿色）
3. 系统生成AI策略建议（2秒处理时间）
4. 查看右侧"AI智能洞察"面板中的详细建议

#### ✅ 导出报告
1. 确保已选择客户
2. 点击**"导出报告"**按钮（黄色）
3. 系统自动生成TXT格式报告
4. 报告包含：
   - 客户基本信息
   - 价值分析数据
   - 风险评估结果
   - AI建议清单
   - 生成时间戳

---

## 🔧 功能详解

### 左侧：客户选择器

```
┌─────────────────────┐
│ 🔍 搜索客户...      │
├─────────────────────┤
│ ◉ 华为技术有限公司  │
│   战略级 ¥1580万    │
├─────────────────────┤
│ ○ 比亚迪汽车       │
│   核心级 ¥1230万   │
└─────────────────────┘
```

**功能**:
- 实时搜索过滤
- 显示客户等级标签
- 显示累计价值
- 点击切换选中状态

### 中间：沙盘可视化

#### 3D沙盘视图
- **X轴**: 季度时间 (Q1-Q4)
- **Y轴**: 销售额(万元)
- **Z轴**: 活跃度
- **交互**: 鼠标拖拽旋转、滚轮缩放

#### 时间线视图
- 折线图展示6个月数据
- 销售额、活跃度、满意度三条曲线
- 支持hover查看具体数值

#### 矩阵图视图
- **X轴**: 客户价值（0-100）
- **Y轴**: 流失风险（0-100）
- 散点代表不同客户
- 支持点击查看客户名称

### 右侧：AI智能洞察

#### 客户画像卡片
```
客户等级: 战略级
生命周期: 成长期
活跃度:   ██████████ 85%
忠诚度:   ██████████ 92%
```

#### 价值分析卡片
```
累计价值: ¥1580.0万
年度贡献: ¥520.0万
预测LTV:  ¥2850.0万
```

#### 风险评估卡片
```
流失风险: 12%
风险因素:
- 竞品活跃 (低)
- 价格敏感度 (中)
```

#### AI建议时间线
```
高优先级 → 推荐高价值产品
中优先级 → 定期回访提醒
中优先级 → 需求趋势预测
低优先级 → 关注竞品动态
```

---

## 🎯 典型使用场景

### 场景1: 客户健康度检查
1. 选择重点客户
2. 查看"流失风险"指标
3. 如果风险>30%，点击"策略推荐"
4. 执行AI建议的挽留措施

### 场景2: 商机挖掘
1. 在矩阵图视图中
2. 查找"高价值+低风险"象限的客户
3. 点击"策略推荐"
4. 获取upsell/cross-sell建议

### 场景3: 季度述职报告
1. 选择关键客户
2. 点击"导出报告"
3. 将TXT报告转换为PPT/Word
4. 展示AI分析结果

### 场景4: 销售会议准备
1. 选择明天要拜访的客户
2. 查看"时间线视图"了解历史
3. 阅读"AI建议"准备话术
4. 导出报告作为会议资料

---

## ❗ 常见问题

### Q1: "策略推荐"和"导出报告"按钮是灰色的？
**A**: 需要先在左侧客户列表中选择一个客户。默认应该自动选择第一个客户，如果没有选择，请手动点击任意客户卡片。

### Q2: 3D沙盘不显示或显示错误？
**A**: 检查以下几点：
- echarts-gl是否安装: `npm list echarts-gl`
- 浏览器控制台是否有错误 (F12 > Console)
- 尝试切换到"时间线"或"矩阵图"视图

### Q3: 点击"客户沙盘"菜单无反应？
**A**: 检查：
- 服务器是否启动: `npm run dev`
- 浏览器控制台是否有JavaScript错误
- 刷新页面后重试

### Q4: 导出的报告在哪里？
**A**: 报告会自动下载到浏览器默认下载目录，文件名格式：
```
客户沙盘分析_华为技术有限公司_1734567890123.txt
```

### Q5: 如何自定义客户数据？
**A**: 当前版本使用模拟数据，后续版本将支持：
- 从CRM系统同步真实数据
- 手动编辑客户信息
- 导入Excel客户清单

---

## 🔍 调试指南

### 浏览器控制台检查
按 `F12` 打开开发者工具，在Console中运行：

```javascript
// 检查组件是否挂载
document.querySelector('.customer-sandbox-advanced')

// 检查ECharts是否加载
typeof echarts !== 'undefined'

// 检查客户数据
document.querySelectorAll('.customer-item').length

// 检查按钮状态
document.querySelectorAll('.header-right button').forEach(b => {
  console.log(b.textContent, '- disabled:', b.disabled)
})
```

### 预期输出
```
✓ customer-sandbox-advanced元素存在
✓ echarts已定义
✓ 客户列表有5个项目
✓ "策略推荐"按钮disabled: false
✓ "导出报告"按钮disabled: false
```

---

## 📊 数据字典

### 客户等级
- **战略级** - 年度价值>500万，长期合作伙伴
- **核心级** - 年度价值100-500万，重要客户
- **潜力级** - 新客户或增长快速
- **普通级** - 年度价值<100万

### 生命周期阶段
- **引入期** - 新客户，合作<6个月
- **成长期** - 订单量持续增长
- **成熟期** - 稳定合作，订单量平稳
- **衰退期** - 订单量下降

### 风险等级
- **高** - 需要立即采取行动
- **中** - 需要关注监控
- **低** - 正常状态

---

## 🛠️ 技术支持

### 安装依赖
```bash
npm install echarts-gl --legacy-peer-deps
npm run dev
```

### 访问地址
```
开发环境: http://localhost:3003/mingsheng-aicrm
生产环境: https://your-domain.com/mingsheng-aicrm
```

### 系统要求
- Node.js >= 16.0.0
- 现代浏览器（Chrome/Edge/Firefox最新版）
- 屏幕分辨率 >= 1366x768

---

## 📝 更新日志

### V1.0 (2025-12-18)
- ✅ 初始版本发布
- ✅ 3D沙盘可视化
- ✅ 时间线/矩阵图分析
- ✅ AI智能洞察
- ✅ 策略推荐功能
- ✅ 报告导出功能
- ✅ 响应式设计支持

---

## 📞 联系方式

遇到问题请提供：
1. 浏览器版本
2. 控制台错误截图
3. 操作步骤描述
4. Network标签截图（如有请求失败）

**祝使用愉快！** 🎉
