# 小课堂智能体功能检查清单

**检查日期:** 2025-12-15  
**检查范围:** 前台展示 + 后台管理

---

## ✅ 已修复的问题

### 1. 视频管理功能缺失（严重）
**问题:** `classroom.js` 缺少视频管理的核心方法
- ❌ 缺少 `getVideosBySubcategory()`
- ❌ 缺少 `addVideo()`
- ❌ 缺少 `updateVideo()`
- ❌ 缺少 `deleteVideo()`
- ❌ 缺少 `incrementVideoViews()`
- ❌ 缺少 `incrementVideoLikes()`

**修复:** 已在 `classroom.js` 中添加完整的视频管理方法

---

## 🔍 需要检查的功能点

### 前台功能（TechClassroom.vue）

#### 1. 卡片打开功能
- [ ] 点击一级分类卡片 → 打开二级分类对话框
- [ ] 点击二级分类卡片 → 打开课程列表对话框
- [ ] 点击课程卡片 → 打开课程详情对话框
- [ ] 点击视频卡片 → 打开视频播放器对话框
- [ ] 点击外部链接卡片 → 打开外部网站（新标签页）

#### 2. 卡片关闭功能
- [ ] 二级分类对话框 - 点击 X 按钮关闭
- [ ] 二级分类对话框 - 点击遮罩层不关闭（`:close-on-click-modal="false"`）
- [ ] 课程列表对话框 - 点击 X 按钮关闭
- [ ] 课程列表对话框 - 点击遮罩层不关闭
- [ ] 课程详情对话框 - 点击 X 按钮关闭
- [ ] 课程详情对话框 - 点击遮罩层不关闭
- [ ] 视频播放器对话框 - 点击 X 按钮关闭
- [ ] 视频播放器对话框 - 点击遮罩层不关闭

#### 3. 数据显示
- [ ] 一级分类显示正确的主题数和课程数
- [ ] 二级分类显示正确的课程数
- [ ] 课程显示封面图、标题、描述、标签、统计数据
- [ ] 视频显示缩略图、标题、描述、时长、统计数据
- [ ] 外部链接显示图标、标题、描述、类型、标签

#### 4. 交互功能
- [ ] 点赞功能 - 课程点赞数增加
- [ ] 点赞功能 - 视频点赞数增加
- [ ] 浏览量统计 - 打开课程时views+1
- [ ] 浏览量统计 - 播放视频时views+1
- [ ] 浏览量统计 - 点击外部链接时views+1
- [ ] 视频播放功能正常

---

### 后台管理功能（ClassroomManage.vue）

#### 1. 一级分类管理
- [ ] 查看所有一级分类列表
- [ ] 点击"添加一级分类"打开对话框
- [ ] 填写表单（名称、图标、描述、排序）
- [ ] 点击"保存"成功添加分类
- [ ] 点击"取消"关闭对话框不保存
- [ ] 点击"编辑"打开对话框并回显数据
- [ ] 修改后保存成功
- [ ] 点击"删除"弹出确认框
- [ ] 确认删除后分类及其子数据全部删除

#### 2. 二级分类管理
- [ ] 按一级分类分组显示二级分类
- [ ] 显示每个分类的课程数量
- [ ] 点击"添加二级分类"打开对话框
- [ ] 选择一级分类、填写名称和排序
- [ ] 保存成功添加
- [ ] 编辑功能正常回显和保存
- [ ] 删除功能正常（含确认）

#### 3. 课程管理
- [ ] 显示所有课程列表
- [ ] 显示封面缩略图（或"无封面"）
- [ ] 按一级分类筛选
- [ ] 按二级分类筛选
- [ ] 点击"添加课程"打开编辑对话框
- [ ] 选择分类（级联选择）
- [ ] 填写标题、描述、内容
- [ ] 上传封面图片（本地文件转Base64）
- [ ] 或输入图片URL
- [ ] 选择难度等级
- [ ] 填写时长、作者
- [ ] 添加标签（多选 + 自定义）
- [ ] 选择发布状态
- [ ] 保存成功
- [ ] 编辑课程回显所有数据
- [ ] 删除课程含确认

#### 4. 视频管理 ⚠️（已修复Store缺失方法）
- [ ] 按二级分类分组显示视频
- [ ] 显示视频缩略图、标题、描述、时长、统计
- [ ] 点击"上传视频"打开对话框
- [ ] 使用级联选择器选择分类
- [ ] 填写视频标题和描述
- [ ] 上传视频文件（本地转Base64）
- [ ] 或输入视频URL
- [ ] 填写视频时长
- [ ] 上传缩略图
- [ ] 或输入缩略图URL
- [ ] 保存视频成功
- [ ] 编辑视频回显数据
- [ ] 删除视频含确认

#### 5. 外部链接管理
- [ ] 显示所有外部链接列表
- [ ] 按一级分类筛选
- [ ] 按链接类型筛选（academy/docs/video/tool）
- [ ] 按状态筛选（active/inactive）
- [ ] 点击"添加外部链接"打开对话框
- [ ] 选择一级分类
- [ ] 选择二级分类（可选）
- [ ] 填写标题、描述、URL
- [ ] URL格式验证
- [ ] 链接预览功能
- [ ] 选择链接类型
- [ ] 选择语言（中文/英文/双语）
- [ ] 设置图标
- [ ] 设置是否需要会员
- [ ] 设置排序
- [ ] 添加标签
- [ ] 保存成功
- [ ] 编辑外部链接回显数据
- [ ] 删除外部链接含确认
- [ ] 状态开关切换（active ↔ inactive）

---

## 🐛 潜在问题检查

### 数据持久化
- [ ] 所有添加操作调用 `saveToLocalStorage()`
- [ ] 所有编辑操作调用 `saveToLocalStorage()`
- [ ] 所有删除操作调用 `saveToLocalStorage()`
- [ ] 页面刷新后数据不丢失

### 表单验证
- [ ] 必填项验证（分类、标题、URL等）
- [ ] URL格式验证
- [ ] 数据类型验证

### 错误处理
- [ ] 删除时有二次确认
- [ ] 操作成功有提示消息
- [ ] 操作失败有错误提示

### UI/UX
- [ ] 对话框宽度合适
- [ ] 表单布局美观
- [ ] 按钮位置合理
- [ ] 图标预览显示
- [ ] 图片上传预览
- [ ] 视频上传预览

---

## 📝 测试步骤

### 测试一：前台卡片流程
1. 访问产品技术销售小课堂页面
2. 点击"协作机器人"分类卡片
3. 检查二级分类对话框是否正常打开
4. 点击某个二级分类
5. 检查课程列表对话框是否正常打开
6. 检查是否同时显示视频、外部链接、课程三部分
7. 点击视频卡片播放视频
8. 点击课程卡片查看详情
9. 点击外部链接卡片跳转
10. 所有对话框的关闭按钮功能正常

### 测试二:后台添加流程
1. 进入后台管理 - 产品技术销售小课堂
2. 切换到"视频管理"标签
3. 点击某个分类的"添加视频"按钮
4. 填写表单并上传视频
5. 保存后检查列表是否显示新视频
6. 刷新页面检查数据是否持久化

### 测试三:后台编辑流程
1. 找到任意课程
2. 点击"编辑"
3. 修改标题
4. 保存
5. 检查列表显示是否更新
6. 刷新页面验证持久化

### 测试四:后台删除流程
1. 找到测试数据
2. 点击"删除"
3. 确认删除提示框
4. 检查列表数据已移除
5. 刷新页面验证已删除

---

## ✅ 修复总结

### 已完成的修复
1. **视频管理Store方法** - 添加了6个视频管理核心方法
2. **代码结构优化** - 区分了课程资源视频和独立视频管理

### 建议的改进
1. 添加批量删除功能
2. 添加课程排序功能
3. 添加数据导入导出
4. 添加视频上传进度显示
5. 优化大文件Base64转换（建议使用CDN或服务器上传）

---

## 📌 注意事项

1. **视频文件大小限制**: Base64编码会增加约33%体积,建议使用外部URL
2. **LocalStorage容量**: 通常5-10MB,大量视频可能超限
3. **外部链接有效性**: 需要定期检查链接是否失效
4. **缩略图质量**: 建议压缩后上传
5. **浏览器兼容性**: 确保测试多个浏览器

---

**检查人员签名:** AI助手  
**下次检查日期:** 根据使用反馈决定
