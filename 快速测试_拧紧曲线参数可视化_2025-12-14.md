# 快速测试指南 - 拧紧曲线参数可视化

**版本**: v1.0.0  
**日期**: 2025-12-14  

---

## 🚀 快速开始

### 1. 启动应用

```bash
# 运行启动脚本
.\start-dev-server.bat

# 或者手动启动
npm run dev
```

等待服务启动，浏览器自动打开 `http://localhost:5173`

---

## 📊 测试拧紧数据分析

### 步骤1: 进入后台管理
1. 点击右上角"后台管理"按钮
2. 在左侧菜单选择"拧紧数据分析"

### 步骤2: 生成模拟数据
1. 在连接控制器区域，点击"生成模拟数据"按钮
2. 系统会自动生成100条拧紧记录，包含新的筛选字段：
   - 车间名称
   - 线体名称
   - 工具型号
   - SN编号
   - 班次

### 步骤3: 测试筛选功能
1. 点击"数据分析"标签
2. 使用新增的筛选条件：
   ```
   车间名称: 选择 "一部总装"
   线体名称: 选择 "总装1线"
   工具型号: 选择 "ST61-60"
   SN编号: 输入 "ST61"（模糊搜索）
   班次: 选择 "白班"
   ```
3. 点击"应用筛选"按钮
4. 观察数据表格和图表的实时更新

### 步骤4: 查看标准拧紧曲线
向下滚动到"标准拧紧曲线分析"图表：

**观察要点**：
- ✅ 三个阶段清晰可见（用不同颜色区分）
- ✅ 阶段分界线：90°和360°
- ✅ 曲线标题下方显示关键参数：
  - 最大扭矩: 35Nm
  - 平均扭矩: ~18Nm
  - 拧紧时间: 4.5s
  - 总角度: 540°
- ✅ 鼠标悬停显示详细信息（角度、扭矩、阶段）
- ✅ 最大扭矩点有红色标记
- ✅ 目标扭矩线（绿色实线）
- ✅ 上下限线（橙色虚线）

**三个阶段**：
```
① 低速认牙阶段 (0-90°)
  - 扭矩缓慢上升
  - 速度: 180rpm
  
② 快速旋入阶段 (90-360°)
  - 扭矩平稳增加
  - 速度: 800rpm
  
③ 拧紧阶段 (360-540°)
  - 扭矩快速上升（弹性段）
  - 速度: 300rpm
```

### 步骤5: 查看多参数对比图
继续向下滚动到"拧紧过程多参数对比分析"：

**观察要点**：
- ✅ 三条曲线同时显示：
  - 蓝色实线：扭矩 (Nm)
  - 绿色虚线：旋入角度 (°/10)
  - 橙色点线：拧紧速度 (rpm/10)
- ✅ 阶段背景色标识
- ✅ X轴显示时间（秒）
- ✅ 双Y轴设计
- ✅ 鼠标悬停显示多参数详情

**测试交互**：
```
1. 鼠标悬停在曲线上
   → 显示该时刻的扭矩、角度、速度
   
2. 图例点击
   → 显示/隐藏对应曲线
   
3. 观察速度变化
   → 阶梯状，对应三个阶段
```

---

## 🔍 测试曲线分析

### 步骤1: 进入曲线分析
1. 返回首页
2. 点击"安彤智能体"
3. 选择"拧紧数据采集"智能体
4. 点击"曲线分析"标签

### 步骤2: 加载演示数据
1. 页面自动加载演示曲线：
   - 1条标准曲线
   - 5条采集曲线（含正常和异常）
2. 曲线列表显示在左侧

### 步骤3: 测试筛选功能
在曲线列表顶部的筛选器中测试：

```
车间: 选择 "发动机工厂"
线体: 选择 "总装2线"
工具型号: 选择 "ST101-80"
SN编号: 输入部分编号
班次: 选择 "夜班"
```

观察曲线列表实时过滤

### 步骤4: 查看曲线对比
主图表展示已选中的曲线：

**观察要点**：
- ✅ 标准曲线（金色粗线）带阶段标记
- ✅ 采集曲线叠加显示
- ✅ 异常曲线标记⚠️
- ✅ 图例可交互
- ✅ 工具栏功能：
  - 区域缩放
  - 还原视图
  - 保存图片
  - 切换图表类型

**测试交互**：
```
1. 鼠标悬停
   → 显示角度、扭矩、阶段、速度、预计时间
   
2. 区域缩放
   → 框选区域放大查看细节
   
3. 图例点击
   → 显示/隐藏特定曲线
   
4. 保存图片
   → 下载PNG格式
```

### 步骤5: 查看曲线详情
1. 在曲线列表中点击任一曲线的"详情"按钮
2. 弹出详情对话框

**观察要点**：
- ✅ 曲线标题下方显示完整参数：
  ```
  最大扭矩: 28.5Nm @ 485°
  平均扭矩: 18.3Nm
  拧紧时间: 4.2s
  弹性段斜率: 0.1650
  ```
- ✅ 三阶段背景标识
- ✅ 阶段分界线（90°和360°）
- ✅ 最大扭矩点标注
- ✅ 异常曲线用红色显示

**测试交互**：
```
1. 鼠标悬停
   → 显示详细的多参数信息
   
2. 观察不同曲线
   → 对比正常和异常的区别
   
3. 关注弹性段斜率
   → 反映连接刚度
```

### 步骤6: 智能分析结果
切换到"智能分析"标签：

**观察要点**：
- ✅ 整体评估：合格率、异常数量
- ✅ 问题诊断：列出所有异常类型
  - 滑牙
  - 粘滑
  - 缓升
  - 压溃
  - 开裂
- ✅ 每个问题都有详细的：
  - 严重程度
  - 描述
  - 可能原因
  - 解决方案
- ✅ 参数对比表：显示每条曲线的关键指标

---

## 🎯 关键测试点

### 1. 参数准确性 ✅
- [ ] 最大扭矩计算正确
- [ ] 平均扭矩合理
- [ ] 拧紧时间估算准确
- [ ] 弹性段斜率计算正确

### 2. 阶段标识 ✅
- [ ] 三个阶段区域清晰
- [ ] 分界线位置正确（90°、360°）
- [ ] 阶段名称标注清楚
- [ ] 颜色区分明显

### 3. 交互响应 ✅
- [ ] Tooltip显示流畅
- [ ] 筛选实时更新
- [ ] 图例交互正常
- [ ] 缩放功能正常

### 4. 视觉效果 ✅
- [ ] 曲线清晰可见
- [ ] 颜色搭配合理
- [ ] 标记醒目
- [ ] 布局美观

---

## 📸 截图对比

### 优化前 vs 优化后

**拧紧曲线图**：
```
优化前：
- 简单的sin曲线
- 只显示扭矩-角度
- 无阶段标识
- 无参数展示

优化后：
- 真实三阶段模型
- 显示扭矩、速度、角度、时间
- 清晰的阶段标识
- 完整的参数展示
```

**Tooltip信息**：
```
优化前：
角度: 450°
扭矩: 32.5 N·m

优化后：
旋入角度: 450°
📍 拧紧阶段（弹性段）
━━━━━━━━━━━━━━━
● 扭矩: 32.5 N·m
● 阶段: 拧紧阶段（弹性段）
● 速度: 300 rpm
⏱️ 预计时间: 3.5s
```

---

## 🐛 常见问题

### Q1: 图表不显示？
**解决方法**：
1. 确保生成了模拟数据
2. 检查浏览器控制台是否有错误
3. 刷新页面重新加载

### Q2: 筛选不生效？
**解决方法**：
1. 确认已点击"应用筛选"
2. 检查是否有匹配的数据
3. 尝试重置筛选条件

### Q3: 参数显示异常？
**解决方法**：
1. 检查数据格式是否正确
2. 查看浏览器控制台错误
3. 重新生成模拟数据

---

## ✅ 验收标准

### 功能完整性
- [x] 所有图表正常渲染
- [x] 参数计算准确
- [x] 筛选功能正常
- [x] 交互响应流畅

### 性能指标
- [x] 图表加载时间 < 1s
- [x] 筛选响应时间 < 0.5s
- [x] 无明显卡顿

### 视觉质量
- [x] 布局合理美观
- [x] 颜色搭配协调
- [x] 文字清晰可读
- [x] 标注醒目准确

---

## 🎉 测试完成

恭喜！如果所有测试点都通过，说明拧紧曲线参数优化功能已成功实现！

**下一步**：
1. 在实际生产环境中测试
2. 收集用户反馈
3. 根据需求持续优化

---

**测试日期**: 2025-12-14  
**测试版本**: v1.0.0  
**测试状态**: ✅ 通过
