# 📘 AIWEB系统端口说明

> **更新时间**：2025-12-17
> **版本**：v1.0

---

## 🌐 系统端口配置

### 前端服务器
- **端口**：`5173`
- **技术**：Vite (Vue 3)
- **用途**：用户界面、页面展示
- **访问地址**：http://localhost:5173
- **启动命令**：`npm run dev`

### 后端服务器
- **端口**：`3002`
- **技术**：Express (Node.js)
- **用途**：API服务、数据管理
- **访问地址**：http://localhost:3002
- **启动命令**：`npm run server`

---

## 🚀 启动方式

### 方法1：一键启动（推荐）
```bash
双击运行：🚀_启动完整系统_前后端_2025-12-17.bat
```
- ✅ 自动启动前后端服务器
- ✅ 自动打开浏览器
- ✅ 智能检测已运行的服务

### 方法2：手动启动

#### 启动前端
```bash
npm run dev
# 访问 http://localhost:5173
```

#### 启动后端
```bash
npm run server
# 后端API运行在 http://localhost:3002
```

#### 同时启动（使用两个终端）
```bash
# 终端1 - 前端
npm run dev

# 终端2 - 后端
npm run server
```

---

## 🔍 端口检查

### 检查端口占用
```bash
双击运行：🔍_检查端口占用_2025-12-17.bat
```

### 手动检查
```bash
# Windows
netstat -ano | findstr ":5173"
netstat -ano | findstr ":3002"

# 查看进程详情
tasklist | findstr [PID]
```

---

## ⚠️ 常见问题

### 问题1：端口被占用
**症状**：启动时提示端口已被占用

**解决方法**：
```bash
# 1. 查找占用端口的进程
netstat -ano | findstr ":5173"
# 或
netstat -ano | findstr ":3002"

# 2. 关闭进程（使用查到的PID）
taskkill /F /PID [PID号]

# 3. 重新启动服务
```

### 问题2：后端无法访问 (3002端口)
**症状**：前端能访问，但API调用失败

**检查步骤**：
1. ✅ 确认后端服务器已启动
   ```bash
   netstat -ano | findstr ":3002"
   ```

2. ✅ 检查后端启动日志
   - 查看后端服务器窗口是否有错误

3. ✅ 直接访问后端
   ```
   浏览器访问：http://localhost:3002
   应该看到后端响应
   ```

4. ✅ 检查防火墙设置
   - 确保3002端口未被防火墙阻止

### 问题3：前端无法访问 (5173端口)
**症状**：http://localhost:5173 无法打开

**检查步骤**：
1. ✅ 确认前端服务器已启动
   ```bash
   netstat -ano | findstr ":5173"
   ```

2. ✅ 检查启动日志
   - 查看终端是否有编译错误

3. ✅ 清理缓存重试
   ```bash
   npm run dev
   ```

### 问题4：API调用跨域错误
**症状**：控制台显示CORS错误

**解决方法**：
- 后端已配置CORS，如仍有问题：
  1. 检查 `server/index.js` 中的CORS配置
  2. 确认前端API地址配置正确

---

## 📊 端口对照表

| 端口 | 服务 | 技术栈 | 访问地址 | 启动命令 |
|------|------|--------|----------|----------|
| 5173 | 前端 | Vite + Vue 3 | http://localhost:5173 | `npm run dev` |
| 3002 | 后端 | Express + Node.js | http://localhost:3002 | `npm run server` |

---

## 🛠️ 开发环境配置

### 环境变量
如需修改端口，可在以下文件配置：

#### 前端端口 (vite.config.js)
```javascript
export default defineConfig({
  server: {
    port: 5173,  // 修改此处
    host: '0.0.0.0'
  }
})
```

#### 后端端口 (server/index.js)
```javascript
const PORT = 3002  // 修改此处
```

---

## 🌐 网络访问

### 局域网访问

#### 前端（其他设备访问）
```
http://[您的IP地址]:5173
```

#### 后端API
```
http://[您的IP地址]:3002
```

### 获取本机IP
```bash
ipconfig
# 查找 IPv4 地址
```

---

## 📝 生产环境

### 部署时端口配置
- 前端：构建后部署到Web服务器（Nginx/Apache）
- 后端：配置生产环境端口（建议使用环境变量）
- 推荐使用反向代理统一端口

### 部署后访问
```
前端：https://your-domain.com
后端：https://your-domain.com/api
```

---

## ✅ 快速检查清单

启动系统前的检查：

- [ ] Node.js已安装 (`node -v`)
- [ ] 依赖已安装 (`npm install`)
- [ ] 端口5173未被占用
- [ ] 端口3002未被占用
- [ ] 防火墙允许端口访问

启动后的验证：

- [ ] 前端可访问 (http://localhost:5173)
- [ ] 后端可访问 (http://localhost:3002)
- [ ] 页面加载正常
- [ ] API调用正常
- [ ] 无控制台错误

---

## 🎯 推荐工作流

### 日常开发
```bash
1. 双击：🚀_启动完整系统_前后端_2025-12-17.bat
2. 等待服务启动完成
3. 浏览器自动打开
4. 开始开发
```

### 调试时
```bash
# 分别在两个终端启动，便于查看日志
终端1: npm run dev      # 前端
终端2: npm run server   # 后端
```

### 停止服务
```bash
Ctrl + C  # 在对应终端按下
或直接关闭终端窗口
```

---

**需要帮助？** 运行 `🔍_检查端口占用_2025-12-17.bat` 查看详细信息

**文档更新**：2025-12-17
