# 🌐 异地手机访问AIWEB快速方案

**版本**: v1.0  
**日期**: 2025-12-21  
**适用场景**: 异地内测人员手机访问

---

## 🎯 方案选择

| 方案 | 部署时间 | 成本/年 | 推荐度 | 适用场景 |
|-----|---------|--------|--------|---------|
| **方案1：cpolar穿透** | 30分钟 | ¥120 | ⭐⭐⭐⭐⭐ | 快速启动 |
| **方案2：云服务器** | 4小时 | ¥1,200 | ⭐⭐⭐⭐ | 长期使用 |
| **方案3：花生壳** | 20分钟 | ¥198 | ⭐⭐⭐ | 备选方案 |

---

## 🚀 方案1：cpolar内网穿透（强烈推荐）

### 第一步：注册cpolar账号

```
1. 访问：https://www.cpolar.com
2. 点击「免费注册」
3. 填写邮箱和密码
4. 激活邮箱验证

免费版限制：
- 随机域名（每次启动变化）
- 无限流量
- 1条隧道

VIP版优势（¥10/月）：
✅ 固定域名
✅ 3条隧道
✅ 自定义子域名
```

### 第二步：安装cpolar客户端

**Windows系统安装**:

```batch
:: 1. 下载安装包
:: 访问：https://www.cpolar.com/download
:: 选择：Windows 64位安装包

:: 2. 双击安装
:: 默认路径：C:\Program Files\cpolar

:: 3. 登录网站获取Token
:: https://dashboard.cpolar.com/auth
:: 复制Authtoken

:: 4. 认证Token
cd "C:\Program Files\cpolar"
cpolar authtoken YOUR_TOKEN_HERE
```

### 第三步：启动AIWEB服务

**创建启动脚本** `🚀_启动AIWEB并开启外网访问.bat`:

```batch
@echo off
chcp 65001 >nul
title AIWEB异地访问启动器

echo ========================================
echo   AIWEB 异地访问启动器 v1.0
echo ========================================
echo.

:: 检查cpolar是否安装
where cpolar >nul 2>&1
if %errorlevel% neq 0 (
    echo ❌ 未检测到cpolar，请先安装
    echo 下载地址：https://www.cpolar.com/download
    pause
    exit /b 1
)

:: 清理旧进程
echo [1/5] 清理旧进程...
taskkill /F /IM node.exe >nul 2>&1
taskkill /F /IM cpolar.exe >nul 2>&1
timeout /t 2 >nul

:: 启动后端
echo [2/5] 启动后端服务（端口5000）...
cd /d %~dp0server
start /min "AIWEB-后端" cmd /k "node index.js"
timeout /t 5 >nul

:: 启动前端
echo [3/5] 启动前端服务（端口3002）...
cd /d %~dp0
start /min "AIWEB-前端" cmd /k "npm run dev"
timeout /t 15 >nul

:: 启动cpolar内网穿透
echo [4/5] 启动内网穿透...
start "cpolar穿透" cmd /k "cpolar http 3002"
timeout /t 5 >nul

:: 获取外网地址
echo [5/5] 获取访问地址...
echo.
echo ========================================
echo   📱 手机访问地址获取方式
echo ========================================
echo.
echo 方式1：查看cpolar窗口
echo   窗口中显示的 https://xxx.cpolar.cn 地址
echo.
echo 方式2：访问Web管理界面
echo   电脑浏览器打开：http://localhost:9200
echo   查看 "Online" 隧道的公网地址
echo.
echo 方式3：cpolar控制台
echo   访问：https://dashboard.cpolar.com/status
echo   查看在线隧道列表
echo.
echo ========================================
echo.
echo 💡 使用说明：
echo   1. 将获取到的地址发送给测试人员
echo   2. 测试人员用手机浏览器直接打开
echo   3. 支持4G/5G/WiFi任意网络
echo   4. 无需在同一局域网
echo.
echo 🔧 管理：
echo   - 查看日志：切换到对应的命令行窗口
echo   - 停止服务：关闭所有命令行窗口
echo   - 保持电脑开机状态
echo.
echo ========================================
echo.

:: 自动打开本地预览
echo 正在打开本地预览...
start http://localhost:3002
timeout /t 2 >nul

:: 打开cpolar管理界面
echo 正在打开cpolar管理界面...
start http://localhost:9200
echo.
echo ✅ 启动完成！请在cpolar界面获取外网地址
echo.
pause
```

### 第四步：获取外网访问地址

**方式1：查看cpolar窗口**（最直接）

```
cpolar窗口会显示：
Forwarding  https://abc123.cpolar.cn -> http://localhost:3002

这个地址就是外网访问地址！
```

**方式2：Web管理界面**（最方便）

```
1. 浏览器打开：http://localhost:9200
2. 点击左侧 "Status"
3. 查看 "Online" 隧道
4. 复制 "Public URL" 的地址
```

**方式3：cpolar控制台**

```
1. 访问：https://dashboard.cpolar.com/status
2. 登录账号
3. 查看在线隧道列表
```

### 第五步：分享给测试人员

**创建访问文档**:

```markdown
# AIWEB异地测试访问指南

## 访问地址
https://abc123.cpolar.cn

## 适用设备
✅ 手机（iPhone/Android）
✅ 电脑（Windows/Mac）
✅ 平板（iPad/Android平板）

## 网络要求
✅ 4G/5G移动数据
✅ 家庭WiFi
✅ 公司WiFi
✅ 任意网络环境

## 操作步骤
1. 打开手机浏览器（Chrome/Safari）
2. 输入上述地址
3. 等待10-20秒加载
4. 开始测试

## 添加到桌面（可选）
### iPhone
1. Safari打开网址
2. 点击底部"分享"按钮
3. 选择"添加到主屏幕"

### Android
1. Chrome打开网址
2. 点击右上角"⋮"
3. 选择"添加到主屏幕"

## 注意事项
⚠️ 仅限内测使用，请勿外传
⚠️ 如无法访问，请联系管理员
⚠️ 建议添加书签或桌面快捷方式
```

### 升级到VIP版（推荐）

**VIP版优势**:

```
✅ 固定域名：https://aiweb-test.cpolar.cn（永不变化）
✅ 3条隧道：可同时穿透多个服务
✅ 自定义子域名
✅ 优先技术支持

费用：¥10/月 或 ¥120/年

升级步骤：
1. 访问：https://dashboard.cpolar.com/get-started
2. 选择VIP套餐
3. 微信/支付宝支付
4. 立即生效
```

**配置固定域名**:

```yaml
# 编辑配置文件：C:\Users\EricZ\.cpolar\cpolar.yml

version: "2"
authtoken: your_token_here

tunnels:
  aiweb:
    proto: http
    addr: 3002
    region: cn_vip
    subdomain: aiweb-test  # 固定子域名
    inspect: true
    bind_tls: true

# 保存后重启cpolar
cpolar start aiweb
```

---

## 🌐 方案2：云服务器部署

### 适用场景
- 长期使用（3个月+）
- 50+人内测
- 需要稳定性保障

### 快速部署（腾讯云轻量应用服务器）

**第一步：购买服务器**

```
1. 访问：https://cloud.tencent.com/product/lighthouse
2. 选择配置：
   - 地域：广州
   - 套餐：2核2GB（¥74/月）
   - 镜像：Docker CE
   - 系统盘：50GB
   - 流量包：1TB/月
3. 购买时长：3个月（首购5折约¥111）
```

**第二步：一键部署**

```bash
# SSH登录服务器
ssh lighthouse@your-server-ip

# 运行自动部署脚本
curl -sSL https://raw.githubusercontent.com/ericzheng2008-cell/AIWEB/main/deploy-cloud.sh | bash

# 或手动部署
git clone https://github.com/ericzheng2008-cell/AIWEB.git
cd AIWEB
chmod +x deploy.sh
./deploy.sh
```

**第三步：配置域名（可选）**

```bash
# 购买域名（可选）
# 腾讯云：https://dnspod.cloud.tencent.com
# 价格：.cn域名 ¥30/年

# DNS解析
主机记录：aiweb
记录类型：A
记录值：[服务器IP]
TTL：600秒

# 配置HTTPS
sudo certbot --nginx -d aiweb.yourcompany.com
```

**访问地址**:

```
临时IP访问：http://123.45.67.89
域名访问：https://aiweb.yourcompany.com
```

---

## 🥉 方案3：花生壳内网穿透

### 适用场景
- 备选方案
- 已有花生壳账号

### 快速部署

```
1. 下载花生壳客户端
   https://hsk.oray.com/download/

2. 安装并登录

3. 添加映射
   内网主机：192.168.31.105
   内网端口：3002
   外网域名：系统分配

4. 获取访问地址
   http://abc123.gicp.net
```

---

## 📊 三种方案对比

| 对比项 | cpolar | 云服务器 | 花生壳 |
|-------|--------|---------|--------|
| **部署时间** | 30分钟 | 4小时 | 20分钟 |
| **成本/年** | ¥120 | ¥1,200 | ¥198 |
| **速度** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ |
| **稳定性** | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ |
| **流量限制** | 无限制 | 1TB/月 | 1GB/月(免费) |
| **固定域名** | VIP支持 | 需购买 | 需付费 |
| **推荐度** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐ |

---

## 🎯 推荐方案总结

### 快速测试（1-3个月）
**推荐**: cpolar VIP版

**理由**:
- ✅ 30分钟搞定
- ✅ 年成本仅¥120
- ✅ 固定域名好记
- ✅ 无限流量

**访问地址**: `https://aiweb-test.cpolar.cn`

---

### 长期使用（3个月+）
**推荐**: 云服务器

**理由**:
- ✅ 99.9%稳定性
- ✅ 专业运维保障
- ✅ 可绑定企业域名
- ✅ 支持大并发

**访问地址**: `https://aiweb.yourcompany.com`

---

## ✅ 验收清单

### 功能验证
- [ ] 异地手机能访问
- [ ] 4G/5G网络能访问
- [ ] 首页正常显示
- [ ] 智能体功能正常
- [ ] 图表正常渲染
- [ ] 可正常登录

### 性能验证
- [ ] 首页加载 < 10秒
- [ ] API响应 < 3秒
- [ ] 支持10人并发
- [ ] 连续测试1小时无故障

### 分享验证
- [ ] 访问地址易于分享
- [ ] 无需复杂配置
- [ ] 支持多种设备
- [ ] 访问指南清晰

---

## 🔍 常见问题

### Q1: cpolar免费版够用吗？

**答**: 看使用场景
- 临时测试（1-2周）：免费版够用
- 长期使用：建议VIP版（¥10/月）

**区别**:
- 免费版：域名每次启动变化
- VIP版：固定域名，更专业

---

### Q2: 访问速度慢怎么办？

**解决方案**:

1. **使用生产构建**
```batch
npm run build
npx serve dist -p 3002
```

2. **升级云服务器带宽**
```
腾讯云：控制台 → 升级带宽 → 5Mbps
阿里云：控制台 → 升级配置
```

3. **启用CDN加速**（云服务器方案）

---

### Q3: 如何保证安全性？

**方案**:

1. **配置HTTPS**（云服务器）
```bash
certbot --nginx -d aiweb.yourcompany.com
```

2. **设置访问密码**
```javascript
// server/middleware/auth.js
// 添加基础认证
```

3. **IP白名单**（高级）
```nginx
# nginx配置
allow 123.45.67.89;  # 允许的IP
deny all;            # 拒绝其他
```

---

## 📞 技术支持

**cpolar支持**:
- 官网：https://www.cpolar.com
- 文档：https://www.cpolar.com/docs
- 工单：https://dashboard.cpolar.com/support

**云服务器支持**:
- 腾讯云工单：https://console.cloud.tencent.com/workorder
- 阿里云工单：https://workorder.console.aliyun.com

---

## 🚀 快速开始

**推荐操作流程**:

```batch
1. 双击运行：🚀_启动AIWEB并开启外网访问.bat
2. 等待启动完成
3. 复制cpolar分配的外网地址
4. 发送给测试人员
5. 测试人员用手机浏览器打开
```

---

**文档版本**: v1.0  
**创建日期**: 2025-12-21  
**适用场景**: 异地内测人员手机访问
