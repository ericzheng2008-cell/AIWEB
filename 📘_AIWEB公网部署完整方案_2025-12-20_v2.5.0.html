<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>AIWEBå…¬ç½‘éƒ¨ç½²å®Œæ•´æ–¹æ¡ˆ</title>
  <style>
    /* Default styles provided by pandoc.
    ** See https://pandoc.org/MANUAL.html#variables-for-html for config info.
    */
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      border: none;
      border-top: 1px solid #1a1a1a;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<header id="title-block-header">
<h1 class="title">AIWEBå…¬ç½‘éƒ¨ç½²å®Œæ•´æ–¹æ¡ˆ</h1>
</header>
<h1 id="aiwebå…¬ç½‘éƒ¨ç½²å®Œæ•´æ–¹æ¡ˆ">ğŸ“˜ AIWEBå…¬ç½‘éƒ¨ç½²å®Œæ•´æ–¹æ¡ˆ</h1>
<p><strong>ç‰ˆæœ¬ï¼š</strong> v2.5.0<br />
<strong>æ—¥æœŸï¼š</strong> 2025-12-20<br />
<strong>æ–‡æ¡£ç±»å‹ï¼š</strong> äº’è”ç½‘å…¬å¼€è®¿é—®éƒ¨ç½²æŒ‡å—</p>
<hr />
<h2 id="ç›®å½•">ğŸ“‹ ç›®å½•</h2>
<ol type="1">
<li><a href="#éƒ¨ç½²æ–¹æ¡ˆå¯¹æ¯”">éƒ¨ç½²æ–¹æ¡ˆå¯¹æ¯”</a></li>
<li><a href="#äº‘æœåŠ¡å™¨éƒ¨ç½²">äº‘æœåŠ¡å™¨éƒ¨ç½²</a></li>
<li><a href="#cdnåŠ é€Ÿæ–¹æ¡ˆ">CDNåŠ é€Ÿæ–¹æ¡ˆ</a></li>
<li><a href="#åŸŸåä¸sslé…ç½®">åŸŸåä¸SSLé…ç½®</a></li>
<li><a href="#å®‰å…¨åŠ å›º">å®‰å…¨åŠ å›º</a></li>
<li><a href="#è´¹ç”¨é¢„ç®—">è´¹ç”¨é¢„ç®—</a></li>
<li><a href="#éƒ¨ç½²æµç¨‹">éƒ¨ç½²æµç¨‹</a></li>
<li><a href="#è¿ç»´ç›‘æ§">è¿ç»´ç›‘æ§</a></li>
</ol>
<hr />
<h2 id="éƒ¨ç½²æ–¹æ¡ˆå¯¹æ¯”">1. éƒ¨ç½²æ–¹æ¡ˆå¯¹æ¯”</h2>
<h3 id="æ–¹æ¡ˆé€‰æ‹©çŸ©é˜µ">1.1 æ–¹æ¡ˆé€‰æ‹©çŸ©é˜µ</h3>
<table>
<thead>
<tr>
<th>æ–¹æ¡ˆ</th>
<th>é€‚ç”¨åœºæ™¯</th>
<th>ä¼˜ç‚¹</th>
<th>ç¼ºç‚¹</th>
<th>æˆæœ¬/å¹´</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>é˜¿é‡Œäº‘ECS</strong></td>
<td>ä¼ä¸šçº§åº”ç”¨</td>
<td>ç¨³å®šã€å¯æ‰©å±•</td>
<td>é…ç½®å¤æ‚</td>
<td>Â¥3,000-15,000</td>
</tr>
<tr>
<td><strong>è…¾è®¯äº‘CVM</strong></td>
<td>ä¼ä¸šçº§åº”ç”¨</td>
<td>æ€§ä»·æ¯”é«˜</td>
<td>ç½‘ç»œé€Ÿåº¦</td>
<td>Â¥2,500-12,000</td>
</tr>
<tr>
<td><strong>åä¸ºäº‘ECS</strong></td>
<td>æ”¿ä¼å®¢æˆ·</td>
<td>å®‰å…¨åˆè§„</td>
<td>ä»·æ ¼è¾ƒé«˜</td>
<td>Â¥3,500-18,000</td>
</tr>
<tr>
<td><strong>Vercel</strong></td>
<td>å‰ç«¯é™æ€æ‰˜ç®¡</td>
<td>å…è´¹ã€å¿«é€Ÿ</td>
<td>åç«¯å—é™</td>
<td>Â¥0-2,000</td>
</tr>
<tr>
<td><strong>Netlify</strong></td>
<td>JAMstackåº”ç”¨</td>
<td>ç®€å•æ˜“ç”¨</td>
<td>åŠŸèƒ½æœ‰é™</td>
<td>Â¥0-1,500</td>
</tr>
<tr>
<td><strong>Railway</strong></td>
<td>å…¨æ ˆåº”ç”¨</td>
<td>è‡ªåŠ¨éƒ¨ç½²</td>
<td>æµé‡é™åˆ¶</td>
<td>Â¥0-800</td>
</tr>
</tbody>
</table>
<h3 id="æ¨èæ–¹æ¡ˆ">1.2 æ¨èæ–¹æ¡ˆ</h3>
<h4 id="æ¨èæ–¹æ¡ˆä¸€é˜¿é‡Œäº‘ecs-oss-cdnä¼ä¸šçº§">ğŸ† æ¨èæ–¹æ¡ˆä¸€ï¼šé˜¿é‡Œäº‘ECS +
OSS + CDNï¼ˆä¼ä¸šçº§ï¼‰</h4>
<p><strong>é€‚åˆ</strong>ï¼š - æ—¥è®¿é—®é‡ &gt; 1000 - éœ€è¦é«˜å¯ç”¨æ€§ -
æœ‰æŠ€æœ¯å›¢é˜Ÿç»´æŠ¤</p>
<p><strong>æ¶æ„</strong>ï¼š</p>
<pre><code>ç”¨æˆ· â†’ CDN â†’ è´Ÿè½½å‡è¡¡ â†’ ECSé›†ç¾¤ â†’ RDSæ•°æ®åº“
                            â†“
                          OSSå­˜å‚¨</code></pre>
<h4 id="æ¨èæ–¹æ¡ˆäºŒvercel-serverlessè½»é‡çº§">ğŸ¥ˆ æ¨èæ–¹æ¡ˆäºŒï¼šVercel +
Serverlessï¼ˆè½»é‡çº§ï¼‰</h4>
<p><strong>é€‚åˆ</strong>ï¼š - ä¸­å°å‹ç½‘ç«™ - é¢„ç®—æœ‰é™ - æµé‡ä¸å¤§ï¼ˆ&lt;
100GB/æœˆï¼‰</p>
<p><strong>æ¶æ„</strong>ï¼š</p>
<pre><code>ç”¨æˆ· â†’ Vercel CDN â†’ é™æ€é¡µé¢
                  â†’ Serverless Functions (API)
                  â†’ äº‘æ•°æ®åº“</code></pre>
<hr />
<h2 id="äº‘æœåŠ¡å™¨éƒ¨ç½²">2. äº‘æœåŠ¡å™¨éƒ¨ç½²</h2>
<h3 id="é˜¿é‡Œäº‘ecséƒ¨ç½²æ–¹æ¡ˆ">2.1 é˜¿é‡Œäº‘ECSéƒ¨ç½²æ–¹æ¡ˆ</h3>
<h4 id="é…ç½®é€‰æ‹©">é…ç½®é€‰æ‹©</h4>
<p><strong>å…¥é—¨ç‰ˆï¼ˆä¸ªäºº/å°å›¢é˜Ÿï¼‰</strong> | é…ç½®é¡¹ | è§„æ ¼ | ä»·æ ¼/å¹´ |
|â€”â€”-|â€”â€”|â€”â€”â€”| | <strong>å®ä¾‹ç±»å‹</strong> | ecs.t6-c1m2.large | Â¥588 | |
<strong>CPU</strong> | 2æ ¸ | - | | <strong>å†…å­˜</strong> | 4GB | - | |
<strong>ç³»ç»Ÿç›˜</strong> | 40GB ESSD | Â¥120 | | <strong>æ•°æ®ç›˜</strong> |
100GB é«˜æ•ˆäº‘ç›˜ | Â¥360 | | <strong>å¸¦å®½</strong> | 5Mbps | Â¥600 | |
<strong>æ€»è®¡</strong> | - | <strong>Â¥1,668/å¹´</strong> |</p>
<p><strong>æ ‡å‡†ç‰ˆï¼ˆä¸­å°ä¼ä¸šï¼‰</strong> | é…ç½®é¡¹ | è§„æ ¼ | ä»·æ ¼/å¹´ |
|â€”â€”-|â€”â€”|â€”â€”â€”| | <strong>å®ä¾‹ç±»å‹</strong> | ecs.c6.xlarge | Â¥3,500 | |
<strong>CPU</strong> | 4æ ¸ | - | | <strong>å†…å­˜</strong> | 8GB | - | |
<strong>ç³»ç»Ÿç›˜</strong> | 100GB ESSD | Â¥300 | | <strong>æ•°æ®ç›˜</strong>
| 500GB SSD | Â¥2,400 | | <strong>å¸¦å®½</strong> | 10Mbps | Â¥1,200 | |
<strong>è´Ÿè½½å‡è¡¡</strong> | SLBæ ‡å‡†ç‰ˆ | Â¥1,800 | | <strong>æ€»è®¡</strong>
| - | <strong>Â¥9,200/å¹´</strong> |</p>
<p><strong>ä¼ä¸šç‰ˆï¼ˆå¤§å‹ä¼ä¸šï¼‰</strong> | é…ç½®é¡¹ | è§„æ ¼ | ä»·æ ¼/å¹´ |
|â€”â€”-|â€”â€”|â€”â€”â€”| | <strong>ECSå®ä¾‹</strong> | 2å° ecs.c6.2xlarge | Â¥14,000 |
| <strong>CPU</strong> | 8æ ¸ Ã— 2 | - | | <strong>å†…å­˜</strong> | 16GB Ã—
2 | - | | <strong>RDSæ•°æ®åº“</strong> | MySQL 8.0 é«˜å¯ç”¨ | Â¥8,000 | |
<strong>OSSå­˜å‚¨</strong> | 1TB æ ‡å‡†å­˜å‚¨ | Â¥1,500 | |
<strong>CDNæµé‡</strong> | 10TB/å¹´ | Â¥3,000 | |
<strong>è´Ÿè½½å‡è¡¡</strong> | SLBé«˜æ€§èƒ½ | Â¥3,600 | |
<strong>WAFé˜²æŠ¤</strong> | Webåº”ç”¨é˜²ç«å¢™ | Â¥9,600 | |
<strong>æ€»è®¡</strong> | - | <strong>Â¥39,700/å¹´</strong> |</p>
<h4 id="éƒ¨ç½²æ­¥éª¤">éƒ¨ç½²æ­¥éª¤</h4>
<p><strong>æ­¥éª¤1ï¼šè´­ä¹°ECSå®ä¾‹</strong></p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ç™»å½•é˜¿é‡Œäº‘æ§åˆ¶å°</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co"># https://ecs.console.aliyun.com</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># é€‰æ‹©åŒºåŸŸï¼šæ ¹æ®ç”¨æˆ·åˆ†å¸ƒé€‰æ‹©</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co"># ååŒ—2ï¼ˆåŒ—äº¬ï¼‰ã€åä¸œ2ï¼ˆä¸Šæµ·ï¼‰ã€åå—1ï¼ˆæ·±åœ³ï¼‰</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co"># å®ä¾‹é…ç½®</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="ex">é•œåƒï¼šUbuntu</span> 22.04 64ä½</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="ex">å®ä¾‹ç±»å‹ï¼šæŒ‰ä¸Šè¡¨é€‰æ‹©</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="ex">ç½‘ç»œï¼šä¸“æœ‰ç½‘ç»œVPC</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="ex">å…¬ç½‘IPï¼šåˆ†é…</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="ex">å®‰å…¨ç»„ï¼šæ–°å»ºï¼ˆåç»­é…ç½®ï¼‰</span></span></code></pre></div>
<p><strong>æ­¥éª¤2ï¼šé…ç½®å®‰å…¨ç»„</strong></p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># å…¥æ–¹å‘è§„åˆ™</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="ex">22/TCP</span>    æºï¼šæ‚¨çš„IP    ï¼ˆSSHè®¿é—®ï¼‰</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="ex">80/TCP</span>    æºï¼š0.0.0.0/0  ï¼ˆHTTPï¼‰</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="ex">443/TCP</span>   æºï¼š0.0.0.0/0  ï¼ˆHTTPSï¼‰</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="ex">3000/TCP</span>  æºï¼šå†…ç½‘      ï¼ˆå‰ç«¯æœåŠ¡ï¼‰</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="ex">3001/TCP</span>  æºï¼šå†…ç½‘      ï¼ˆåç«¯APIï¼‰</span></code></pre></div>
<p><strong>æ­¥éª¤3ï¼šè¿æ¥æœåŠ¡å™¨</strong></p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ä½¿ç”¨SSHè¿æ¥</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ssh</span> root@your-server-ip</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># æ›´æ–°ç³»ç»Ÿ</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="ex">apt</span> update <span class="kw">&amp;&amp;</span> <span class="ex">apt</span> upgrade <span class="at">-y</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co"># å®‰è£…åŸºç¡€å·¥å…·</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="ex">apt</span> install <span class="at">-y</span> curl wget git vim build-essential</span></code></pre></div>
<p><strong>æ­¥éª¤4ï¼šå®‰è£…è¿è¡Œç¯å¢ƒ</strong></p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># å®‰è£…Node.js 18</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-fsSL</span> https://deb.nodesource.com/setup_18.x <span class="kw">|</span> <span class="fu">bash</span> <span class="at">-</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="ex">apt</span> install <span class="at">-y</span> nodejs</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co"># å®‰è£…Nginx</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="ex">apt</span> install <span class="at">-y</span> nginx</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="co"># å®‰è£…PM2</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> install <span class="at">-g</span> pm2</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="co"># éªŒè¯å®‰è£…</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="ex">node</span> <span class="at">--version</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="ex">nginx</span> <span class="at">-v</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="ex">pm2</span> <span class="at">--version</span></span></code></pre></div>
<p><strong>æ­¥éª¤5ï¼šéƒ¨ç½²ä»£ç </strong></p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># å…‹éš†ä»£ç </span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /var/www</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone https://github.com/your-org/AIWEB1.git</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> AIWEB1</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co"># å®‰è£…ä¾èµ–</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> install <span class="at">--production</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co"># æ„å»ºå‰ç«¯</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run build</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="co"># å¯åŠ¨åç«¯</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> server</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="ex">pm2</span> start index.js <span class="at">--name</span> aiweb-api</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="co"># é…ç½®å¼€æœºè‡ªå¯</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a><span class="ex">pm2</span> startup</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a><span class="ex">pm2</span> save</span></code></pre></div>
<p><strong>æ­¥éª¤6ï¼šé…ç½®Nginx</strong></p>
<pre class="nginx"><code># /etc/nginx/sites-available/aiweb
server {
    listen 80;
    server_name your-domain.com;

    # å¼ºåˆ¶HTTPS
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name your-domain.com;

    # SSLè¯ä¹¦ï¼ˆåç»­é…ç½®ï¼‰
    ssl_certificate /etc/nginx/ssl/cert.pem;
    ssl_certificate_key /etc/nginx/ssl/key.pem;

    # SSLä¼˜åŒ–
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers HIGH:!aNULL:!MD5;
    ssl_prefer_server_ciphers on;

    # Gzipå‹ç¼©
    gzip on;
    gzip_vary on;
    gzip_min_length 1024;
    gzip_types text/plain text/css text/xml text/javascript application/javascript application/json;

    # å‰ç«¯é™æ€æ–‡ä»¶
    location / {
        root /var/www/AIWEB1/dist;
        try_files $uri $uri/ /index.html;
        index index.html;
        
        # ç¼“å­˜è®¾ç½®
        expires 7d;
        add_header Cache-Control &quot;public, immutable&quot;;
    }

    # APIä»£ç†
    location /api/ {
        proxy_pass http://127.0.0.1:3001/;
        proxy_http_version 1.1;
        
        # ä»£ç†å¤´
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection &#39;upgrade&#39;;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        
        # è¶…æ—¶è®¾ç½®
        proxy_connect_timeout 60s;
        proxy_send_timeout 60s;
        proxy_read_timeout 60s;
    }

    # ä¸Šä¼ æ–‡ä»¶è®¿é—®
    location /uploads/ {
        alias /var/www/AIWEB1/server/uploads/;
        expires 30d;
    }

    # å®‰å…¨å¤´
    add_header X-Frame-Options &quot;SAMEORIGIN&quot; always;
    add_header X-Content-Type-Options &quot;nosniff&quot; always;
    add_header X-XSS-Protection &quot;1; mode=block&quot; always;
}

# å¯ç”¨é…ç½®
ln -s /etc/nginx/sites-available/aiweb /etc/nginx/sites-enabled/
nginx -t
systemctl reload nginx</code></pre>
<h3 id="è…¾è®¯äº‘cvméƒ¨ç½²æ–¹æ¡ˆ">2.2 è…¾è®¯äº‘CVMéƒ¨ç½²æ–¹æ¡ˆ</h3>
<h4 id="é…ç½®å¯¹æ¯”">é…ç½®å¯¹æ¯”</h4>
<table>
<thead>
<tr>
<th>è§„æ ¼</th>
<th>è…¾è®¯äº‘</th>
<th>é˜¿é‡Œäº‘</th>
<th>ä»·æ ¼ä¼˜åŠ¿</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>2æ ¸4GB</strong></td>
<td>Â¥1,200/å¹´</td>
<td>Â¥1,668/å¹´</td>
<td>è…¾è®¯äº‘ä¾¿å®œ28%</td>
</tr>
<tr>
<td><strong>4æ ¸8GB</strong></td>
<td>Â¥2,800/å¹´</td>
<td>Â¥3,500/å¹´</td>
<td>è…¾è®¯äº‘ä¾¿å®œ20%</td>
</tr>
<tr>
<td><strong>8æ ¸16GB</strong></td>
<td>Â¥6,500/å¹´</td>
<td>Â¥8,000/å¹´</td>
<td>è…¾è®¯äº‘ä¾¿å®œ19%</td>
</tr>
</tbody>
</table>
<h4 id="ç‰¹è‰²åŠŸèƒ½">ç‰¹è‰²åŠŸèƒ½</h4>
<ul>
<li><strong>è½»é‡åº”ç”¨æœåŠ¡å™¨</strong>ï¼šé›†æˆç¯å¢ƒï¼Œä¸€é”®éƒ¨ç½²</li>
<li><strong>äº‘å¼€å‘CloudBase</strong>ï¼šServerlessåç«¯æœåŠ¡</li>
<li><strong>å¯¹è±¡å­˜å‚¨COS</strong>ï¼šå›¾ç‰‡ã€è§†é¢‘å­˜å‚¨</li>
</ul>
<h3 id="åä¸ºäº‘ecséƒ¨ç½²æ–¹æ¡ˆ">2.3 åä¸ºäº‘ECSéƒ¨ç½²æ–¹æ¡ˆ</h3>
<h4 id="ä¼˜åŠ¿">ä¼˜åŠ¿</h4>
<ul>
<li>âœ… <strong>æ”¿ä¼è®¤è¯</strong>ï¼šé€šè¿‡å¤šé¡¹å®‰å…¨è®¤è¯</li>
<li>âœ… <strong>å›½äº§åŒ–</strong>ï¼šæ”¯æŒå›½äº§èŠ¯ç‰‡å’Œæ“ä½œç³»ç»Ÿ</li>
<li>âœ… <strong>åˆè§„æ€§</strong>ï¼šæ»¡è¶³ç­‰ä¿2.0è¦æ±‚</li>
</ul>
<h4 id="é€‚ç”¨åœºæ™¯">é€‚ç”¨åœºæ™¯</h4>
<ul>
<li>æ”¿åºœé¡¹ç›®</li>
<li>å›½ä¼å¤®ä¼</li>
<li>é‡‘èã€åŒ»ç–—ç­‰å¼ºç›‘ç®¡è¡Œä¸š</li>
</ul>
<hr />
<h2 id="cdnåŠ é€Ÿæ–¹æ¡ˆ">3. CDNåŠ é€Ÿæ–¹æ¡ˆ</h2>
<h3 id="ä¸ºä»€ä¹ˆéœ€è¦cdn">3.1 ä¸ºä»€ä¹ˆéœ€è¦CDNï¼Ÿ</h3>
<table>
<thead>
<tr>
<th>ä¼˜åŠ¿</th>
<th>è¯´æ˜</th>
<th>æ•ˆæœ</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>åŠ é€Ÿè®¿é—®</strong></td>
<td>å°±è¿‘è®¿é—®è¾¹ç¼˜èŠ‚ç‚¹</td>
<td>å»¶è¿Ÿé™ä½60-80%</td>
</tr>
<tr>
<td><strong>é™ä½æˆæœ¬</strong></td>
<td>å‡å°‘æºç«™å¸¦å®½æ¶ˆè€—</td>
<td>èŠ‚çœ40-70%å¸¦å®½è´¹ç”¨</td>
</tr>
<tr>
<td><strong>æŠ—æ”»å‡»</strong></td>
<td>DDoSé˜²æŠ¤ã€CCé˜²æŠ¤</td>
<td>æå‡å®‰å…¨æ€§</td>
</tr>
<tr>
<td><strong>æå‡ä½“éªŒ</strong></td>
<td>ç§’å¼€ã€æµç•…</td>
<td>ç”¨æˆ·æ»¡æ„åº¦â†‘</td>
</tr>
</tbody>
</table>
<h3 id="cdné…ç½®æ­¥éª¤ä»¥é˜¿é‡Œäº‘ä¸ºä¾‹">3.2 CDNé…ç½®æ­¥éª¤ï¼ˆä»¥é˜¿é‡Œäº‘ä¸ºä¾‹ï¼‰</h3>
<p><strong>æ­¥éª¤1ï¼šå¼€é€šCDNæœåŠ¡</strong></p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ç™»å½•é˜¿é‡Œäº‘CDNæ§åˆ¶å°</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="ex">https://cdn.console.aliyun.com</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># è´­ä¹°æµé‡åŒ…ï¼ˆå¯é€‰ï¼‰</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="ex">100GBæµé‡åŒ…ï¼šÂ¥17/æœˆ</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="ex">1TBæµé‡åŒ…ï¼šÂ¥142/æœˆ</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="ex">10TBæµé‡åŒ…ï¼šÂ¥1,280/æœˆ</span></span></code></pre></div>
<p><strong>æ­¥éª¤2ï¼šæ·»åŠ åŠ é€ŸåŸŸå</strong></p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># åŠ é€ŸåŸŸåï¼šstatic.your-domain.com</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co"># æºç«™ç±»å‹ï¼šOSSåŸŸå æˆ– IPåœ°å€</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co"># æºç«™åœ°å€ï¼šyour-server-ip æˆ– bucket.oss-cn-beijing.aliyuncs.com</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co"># åŠ é€ŸåŒºåŸŸï¼šä¸­å›½å¤§é™† / å…¨çƒ</span></span></code></pre></div>
<p><strong>æ­¥éª¤3ï¼šé…ç½®CNAME</strong></p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># è·å–CDNåˆ†é…çš„CNAME</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co"># ç¤ºä¾‹ï¼šstatic.your-domain.com.w.kunlunsl.com</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># åˆ°åŸŸåæœåŠ¡å•†æ·»åŠ CNAMEè®°å½•</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="ex">è®°å½•ç±»å‹ï¼šCNAME</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="ex">ä¸»æœºè®°å½•ï¼šstatic</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="ex">è®°å½•å€¼ï¼šstatic.your-domain.com.w.kunlunsl.com</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="ex">TTLï¼š10åˆ†é’Ÿ</span></span></code></pre></div>
<p><strong>æ­¥éª¤4ï¼šä¼˜åŒ–é…ç½®</strong></p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ç¼“å­˜é…ç½®</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ç›®å½•ï¼š/static/*</span>     è¿‡æœŸæ—¶é—´ï¼š30å¤©</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="ex">ç›®å½•ï¼š/assets/*</span>    è¿‡æœŸæ—¶é—´ï¼š365å¤©</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="ex">ç›®å½•ï¼š/uploads/*</span>   è¿‡æœŸæ—¶é—´ï¼š30å¤©</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="ex">æ–‡ä»¶ï¼š*.html</span>       è¿‡æœŸæ—¶é—´ï¼š1å°æ—¶</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="ex">æ–‡ä»¶ï¼š*.js,*.css</span>   è¿‡æœŸæ—¶é—´ï¼š7å¤©</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="co"># å‹ç¼©ä¼˜åŒ–</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="ex">æ™ºèƒ½å‹ç¼©ï¼šå¼€å¯</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="ex">Brotliå‹ç¼©ï¼šå¼€å¯</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="co"># æ€§èƒ½ä¼˜åŒ–</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="ex">HTTP/2ï¼šå¼€å¯</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="ex">IPv6ï¼šå¼€å¯ï¼ˆå¯é€‰ï¼‰</span></span></code></pre></div>
<h3 id="cdnè´¹ç”¨ä¼°ç®—">3.3 CDNè´¹ç”¨ä¼°ç®—</h3>
<table>
<thead>
<tr>
<th>æœˆæµé‡</th>
<th>æŒ‰æµé‡è®¡è´¹</th>
<th>æŒ‰å¸¦å®½è®¡è´¹</th>
<th>æ¨èæ–¹æ¡ˆ</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>&lt; 100GB</strong></td>
<td>Â¥17</td>
<td>Â¥180</td>
<td>æµé‡è®¡è´¹</td>
</tr>
<tr>
<td><strong>100-500GB</strong></td>
<td>Â¥71-142</td>
<td>Â¥900</td>
<td>æµé‡è®¡è´¹</td>
</tr>
<tr>
<td><strong>500GB-1TB</strong></td>
<td>Â¥142-284</td>
<td>Â¥1,800</td>
<td>æµé‡åŒ…</td>
</tr>
<tr>
<td><strong>1-10TB</strong></td>
<td>Â¥1,280</td>
<td>Â¥9,000</td>
<td>å¸¦å®½è®¡è´¹</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="åŸŸåä¸sslé…ç½®">4. åŸŸåä¸SSLé…ç½®</h2>
<h3 id="åŸŸåè´­ä¹°">4.1 åŸŸåè´­ä¹°</h3>
<h4 id="åŸŸåæ³¨å†Œå•†å¯¹æ¯”">åŸŸåæ³¨å†Œå•†å¯¹æ¯”</h4>
<table>
<thead>
<tr>
<th>æ³¨å†Œå•†</th>
<th>.comä»·æ ¼</th>
<th>.cnä»·æ ¼</th>
<th>ä¼˜åŠ¿</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>é˜¿é‡Œäº‘</strong></td>
<td>Â¥69/å¹´</td>
<td>Â¥29/å¹´</td>
<td>é›†æˆåº¦é«˜</td>
</tr>
<tr>
<td><strong>è…¾è®¯äº‘</strong></td>
<td>Â¥55/å¹´</td>
<td>Â¥35/å¹´</td>
<td>ä»·æ ¼ä¾¿å®œ</td>
</tr>
<tr>
<td><strong>GoDaddy</strong></td>
<td>$11.99/å¹´</td>
<td>-</td>
<td>å›½é™…åŒ–</td>
</tr>
<tr>
<td><strong>Namecheap</strong></td>
<td>$8.88/å¹´</td>
<td>-</td>
<td>æ€§ä»·æ¯”é«˜</td>
</tr>
</tbody>
</table>
<h4 id="åŸŸåé€‰æ‹©å»ºè®®">åŸŸåé€‰æ‹©å»ºè®®</h4>
<ul>
<li>âœ… ä¼˜å…ˆé€‰æ‹© <code>.com</code>ï¼ˆå›½é™…é€šç”¨ï¼‰</li>
<li>âœ… å¤‡é€‰ <code>.cn</code>ï¼ˆä¸­å›½ä¼ä¸šï¼‰</li>
<li>âœ… ç®€çŸ­æ˜“è®°ï¼Œä¸å“ç‰Œç›¸å…³</li>
<li>âŒ é¿å…ç‰¹æ®Šå­—ç¬¦ã€æ•°å­—æ··æ·†</li>
</ul>
<h3 id="dnsè§£æé…ç½®">4.2 DNSè§£æé…ç½®</h3>
<p><strong>åŸºç¡€è§£æè®°å½•</strong></p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Aè®°å½•ï¼ˆä¸»åŸŸåï¼‰</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="ex">@</span>       A       123.45.67.89    ï¼ˆæœåŠ¡å™¨IPï¼‰</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Aè®°å½•ï¼ˆwwwå­åŸŸåï¼‰</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="ex">www</span>     A       123.45.67.89</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="co"># CNAMEè®°å½•ï¼ˆCDNåŠ é€Ÿï¼‰</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="ex">static</span>  CNAME   cdn.your-domain.com.w.kunlunsl.com</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="co"># MXè®°å½•ï¼ˆé‚®ç®±ï¼‰</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="ex">@</span>       MX      mx.your-domain.com  ä¼˜å…ˆçº§ï¼š10</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="co"># TXTè®°å½•ï¼ˆéªŒè¯ï¼‰</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="ex">@</span>       TXT     <span class="st">&quot;v=spf1 include:_spf.example.com ~all&quot;</span></span></code></pre></div>
<p><strong>æ™ºèƒ½è§£æï¼ˆå¯é€‰ï¼‰</strong></p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># å¢ƒå†…ç”¨æˆ· â†’ å›½å†…æœåŠ¡å™¨</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="ex">default</span>  A  123.45.67.89  ï¼ˆé˜¿é‡Œäº‘åŒ—äº¬ï¼‰</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co"># å¢ƒå¤–ç”¨æˆ· â†’ æµ·å¤–æœåŠ¡å™¨</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="ex">overseas</span> A  45.67.89.123  ï¼ˆAWSæ–°åŠ å¡ï¼‰</span></code></pre></div>
<h3 id="sslè¯ä¹¦ç”³è¯·">4.3 SSLè¯ä¹¦ç”³è¯·</h3>
<h4 id="å…è´¹sslè¯ä¹¦lets-encrypt">å…è´¹SSLè¯ä¹¦ï¼ˆLetâ€™s Encryptï¼‰</h4>
<p><strong>ä½¿ç”¨Certbotè‡ªåŠ¨ç”³è¯·</strong></p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># å®‰è£…Certbot</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="ex">apt</span> install <span class="at">-y</span> certbot python3-certbot-nginx</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co"># è‡ªåŠ¨ç”³è¯·å¹¶é…ç½®Nginx</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="ex">certbot</span> <span class="at">--nginx</span> <span class="at">-d</span> your-domain.com <span class="at">-d</span> www.your-domain.com</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co"># æµ‹è¯•è‡ªåŠ¨ç»­æœŸ</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="ex">certbot</span> renew <span class="at">--dry-run</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="co"># è‡ªåŠ¨ç»­æœŸï¼ˆæ·»åŠ åˆ°crontabï¼‰</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="ex">0</span> 3 <span class="pp">*</span> <span class="pp">*</span> <span class="pp">*</span> certbot renew <span class="at">--quiet</span></span></code></pre></div>
<p><strong>æ‰‹åŠ¨ç”³è¯·</strong></p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ç”³è¯·è¯ä¹¦</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="ex">certbot</span> certonly <span class="at">--webroot</span> <span class="dt">\</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">-w</span> /var/www/AIWEB1/dist <span class="dt">\</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">-d</span> your-domain.com <span class="dt">\</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">-d</span> www.your-domain.com</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co"># è¯ä¹¦ä½ç½®</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/letsencrypt/live/your-domain.com/fullchain.pem</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="ex">/etc/letsencrypt/live/your-domain.com/privkey.pem</span></span></code></pre></div>
<h4 id="å•†ä¸šsslè¯ä¹¦">å•†ä¸šSSLè¯ä¹¦</h4>
<table>
<thead>
<tr>
<th>ç±»å‹</th>
<th>éªŒè¯çº§åˆ«</th>
<th>ä»·æ ¼/å¹´</th>
<th>é€‚ç”¨åœºæ™¯</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>DVè¯ä¹¦</strong></td>
<td>åŸŸåéªŒè¯</td>
<td>Â¥0-500</td>
<td>ä¸ªäººç½‘ç«™ã€åšå®¢</td>
</tr>
<tr>
<td><strong>OVè¯ä¹¦</strong></td>
<td>ç»„ç»‡éªŒè¯</td>
<td>Â¥1,000-3,000</td>
<td>ä¼ä¸šå®˜ç½‘</td>
</tr>
<tr>
<td><strong>EVè¯ä¹¦</strong></td>
<td>æ‰©å±•éªŒè¯</td>
<td>Â¥3,000-10,000</td>
<td>é‡‘èã€ç”µå•†</td>
</tr>
<tr>
<td><strong>é€šé…ç¬¦è¯ä¹¦</strong></td>
<td>å¤šå­åŸŸå</td>
<td>Â¥2,000-5,000</td>
<td>å¤§å‹ç½‘ç«™</td>
</tr>
</tbody>
</table>
<p><strong>æ¨èå“ç‰Œ</strong>ï¼š - DigiCertï¼ˆé«˜ç«¯ï¼‰ - GeoTrustï¼ˆä¸­ç«¯ï¼‰ -
RapidSSLï¼ˆå…¥é—¨ï¼‰</p>
<hr />
<h2 id="å®‰å…¨åŠ å›º">5. å®‰å…¨åŠ å›º</h2>
<h3 id="æœåŠ¡å™¨å®‰å…¨">5.1 æœåŠ¡å™¨å®‰å…¨</h3>
<h4 id="sshå®‰å…¨åŠ å›º">SSHå®‰å…¨åŠ å›º</h4>
<div class="sourceCode" id="cb17"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ä¿®æ”¹SSHé…ç½®</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nano</span> /etc/ssh/sshd_config</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co"># ç¦ç”¨rootç™»å½•</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="ex">PermitRootLogin</span> no</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co"># ç¦ç”¨å¯†ç ç™»å½•ï¼ˆä½¿ç”¨å¯†é’¥ï¼‰</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="ex">PasswordAuthentication</span> no</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="co"># ä¿®æ”¹SSHç«¯å£ï¼ˆå¯é€‰ï¼‰</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="ex">Port</span> 22022</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a><span class="co"># é‡å¯SSHæœåŠ¡</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="ex">systemctl</span> restart sshd</span></code></pre></div>
<h4 id="é˜²ç«å¢™é…ç½®">é˜²ç«å¢™é…ç½®</h4>
<div class="sourceCode" id="cb18"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># å®‰è£…Fail2banï¼ˆé˜²æš´åŠ›ç ´è§£ï¼‰</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="ex">apt</span> install <span class="at">-y</span> fail2ban</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># é…ç½®Fail2ban</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="fu">nano</span> /etc/fail2ban/jail.local</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="ex">[DEFAULT]</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="ex">bantime</span> = 3600</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="ex">findtime</span> = 600</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="ex">maxretry</span> = 5</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="ex">[sshd]</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a><span class="ex">enabled</span> = true</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a><span class="ex">port</span> = 22</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a><span class="ex">logpath</span> = /var/log/auth.log</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a><span class="co"># å¯åŠ¨æœåŠ¡</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a><span class="ex">systemctl</span> start fail2ban</span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a><span class="ex">systemctl</span> enable fail2ban</span></code></pre></div>
<h4 id="ç³»ç»Ÿå®‰å…¨æ›´æ–°">ç³»ç»Ÿå®‰å…¨æ›´æ–°</h4>
<div class="sourceCode" id="cb19"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># è‡ªåŠ¨å®‰å…¨æ›´æ–°</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="ex">apt</span> install <span class="at">-y</span> unattended-upgrades</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co"># é…ç½®è‡ªåŠ¨æ›´æ–°</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="ex">dpkg-reconfigure</span> <span class="at">-plow</span> unattended-upgrades</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="co"># æ‰‹åŠ¨æ›´æ–°</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="ex">apt</span> update <span class="kw">&amp;&amp;</span> <span class="ex">apt</span> upgrade <span class="at">-y</span></span></code></pre></div>
<h3 id="åº”ç”¨å®‰å…¨">5.2 åº”ç”¨å®‰å…¨</h3>
<h4 id="ç¯å¢ƒå˜é‡ä¿æŠ¤">ç¯å¢ƒå˜é‡ä¿æŠ¤</h4>
<div class="sourceCode" id="cb20"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># åˆ›å»º.envæ–‡ä»¶</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nano</span> /var/www/AIWEB1/server/.env</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co"># æ·»åŠ æ•æ„Ÿé…ç½®</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="va">DB_PASSWORD</span><span class="op">=</span>your-secure-password</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="va">JWT_SECRET</span><span class="op">=</span>your-random-secret-key-change-this</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="va">API_KEY</span><span class="op">=</span>your-api-key</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a><span class="co"># è®¾ç½®æ–‡ä»¶æƒé™</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="fu">chmod</span> 600 .env</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="fu">chown</span> www-data:www-data .env</span></code></pre></div>
<h4 id="sqlæ³¨å…¥é˜²æŠ¤">SQLæ³¨å…¥é˜²æŠ¤</h4>
<div class="sourceCode" id="cb21"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">// ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="fu">query</span>(<span class="st">&#39;SELECT * FROM users WHERE id = ?&#39;</span><span class="op">,</span> [userId])</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co">// é¿å…ç›´æ¥æ‹¼æ¥SQL</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="co">// âŒ é”™è¯¯ç¤ºä¾‹</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>db<span class="op">.</span><span class="fu">query</span>(<span class="st">&#39;SELECT * FROM users WHERE id = &#39;</span> <span class="op">+</span> userId)</span></code></pre></div>
<h4 id="xssé˜²æŠ¤">XSSé˜²æŠ¤</h4>
<div class="sourceCode" id="cb22"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co">// è¾“å‡ºè½¬ä¹‰</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> DOMPurify <span class="im">from</span> <span class="st">&#39;dompurify&#39;</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> clean <span class="op">=</span> DOMPurify<span class="op">.</span><span class="fu">sanitize</span>(userInput)</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co">// CSPå¤´è®¾ç½®ï¼ˆNginxï¼‰</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>add_header Content<span class="op">-</span>Security<span class="op">-</span>Policy <span class="st">&quot;default-src &#39;self&#39;; script-src &#39;self&#39; &#39;unsafe-inline&#39;&quot;</span><span class="op">;</span></span></code></pre></div>
<h3 id="wafé˜²æŠ¤å¯é€‰">5.3 WAFé˜²æŠ¤ï¼ˆå¯é€‰ï¼‰</h3>
<p><strong>é˜¿é‡Œäº‘WAF</strong> | ç‰ˆæœ¬ | ä»·æ ¼/å¹´ | é˜²æŠ¤èƒ½åŠ› | |â€”â€“|â€”â€”â€”|â€”â€”â€”|
| <strong>åŸºç¡€ç‰ˆ</strong> | Â¥9,600 | DDoSã€CCã€SQLæ³¨å…¥ | |
<strong>é«˜çº§ç‰ˆ</strong> | Â¥28,800 | + AIé˜²æŠ¤ã€é›¶æ—¥æ¼æ´ | |
<strong>ä¼ä¸šç‰ˆ</strong> | Â¥58,800 | + å®šåˆ¶è§„åˆ™ã€ä¸“å®¶æœåŠ¡ |</p>
<p><strong>è…¾è®¯äº‘WAF</strong> - ä»·æ ¼æ›´ä½ï¼ˆçº¦ä¾¿å®œ20%ï¼‰ - åŠŸèƒ½ç›¸ä¼¼</p>
<hr />
<h2 id="è´¹ç”¨é¢„ç®—">6. è´¹ç”¨é¢„ç®—</h2>
<h3 id="å¹´åº¦è´¹ç”¨ä¼°ç®—">6.1 å¹´åº¦è´¹ç”¨ä¼°ç®—</h3>
<h4 id="æ–¹æ¡ˆä¸€å°å‹ç½‘ç«™ä¸ªäººåˆåˆ›">æ–¹æ¡ˆä¸€ï¼šå°å‹ç½‘ç«™ï¼ˆä¸ªäºº/åˆåˆ›ï¼‰</h4>
<table>
<thead>
<tr>
<th>é¡¹ç›®</th>
<th>æœåŠ¡</th>
<th>è´¹ç”¨/å¹´</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>æœåŠ¡å™¨</strong></td>
<td>é˜¿é‡Œäº‘ECS 2æ ¸4GB</td>
<td>Â¥1,668</td>
</tr>
<tr>
<td><strong>åŸŸå</strong></td>
<td>.comåŸŸå</td>
<td>Â¥69</td>
</tr>
<tr>
<td><strong>SSLè¯ä¹¦</strong></td>
<td>Letâ€™s Encrypt</td>
<td>Â¥0</td>
</tr>
<tr>
<td><strong>CDN</strong></td>
<td>100GBæµé‡åŒ…</td>
<td>Â¥204</td>
</tr>
<tr>
<td><strong>å¤‡ä»½</strong></td>
<td>OSS 50GB</td>
<td>Â¥60</td>
</tr>
<tr>
<td><strong>æ€»è®¡</strong></td>
<td>-</td>
<td><strong>Â¥2,001</strong></td>
</tr>
</tbody>
</table>
<h4 id="æ–¹æ¡ˆäºŒä¸­å‹ç½‘ç«™ä¸­å°ä¼ä¸š">æ–¹æ¡ˆäºŒï¼šä¸­å‹ç½‘ç«™ï¼ˆä¸­å°ä¼ä¸šï¼‰</h4>
<table>
<thead>
<tr>
<th>é¡¹ç›®</th>
<th>æœåŠ¡</th>
<th>è´¹ç”¨/å¹´</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>æœåŠ¡å™¨</strong></td>
<td>é˜¿é‡Œäº‘ECS 4æ ¸8GB</td>
<td>Â¥9,200</td>
</tr>
<tr>
<td><strong>åŸŸå</strong></td>
<td>.com + .cn</td>
<td>Â¥98</td>
</tr>
<tr>
<td><strong>SSLè¯ä¹¦</strong></td>
<td>OVè¯ä¹¦</td>
<td>Â¥2,000</td>
</tr>
<tr>
<td><strong>CDN</strong></td>
<td>1TBæµé‡åŒ…</td>
<td>Â¥1,704</td>
</tr>
<tr>
<td><strong>æ•°æ®åº“</strong></td>
<td>RDS MySQL 2æ ¸4GB</td>
<td>Â¥4,800</td>
</tr>
<tr>
<td><strong>OSSå­˜å‚¨</strong></td>
<td>500GB</td>
<td>Â¥600</td>
</tr>
<tr>
<td><strong>å¤‡ä»½</strong></td>
<td>å¼‚åœ°å¤‡ä»½</td>
<td>Â¥1,200</td>
</tr>
<tr>
<td><strong>ç›‘æ§</strong></td>
<td>äº‘ç›‘æ§é«˜çº§ç‰ˆ</td>
<td>Â¥1,200</td>
</tr>
<tr>
<td><strong>æ€»è®¡</strong></td>
<td>-</td>
<td><strong>Â¥20,802</strong></td>
</tr>
</tbody>
</table>
<h4 id="æ–¹æ¡ˆä¸‰å¤§å‹ç½‘ç«™ä¼ä¸šçº§">æ–¹æ¡ˆä¸‰ï¼šå¤§å‹ç½‘ç«™ï¼ˆä¼ä¸šçº§ï¼‰</h4>
<table>
<thead>
<tr>
<th>é¡¹ç›®</th>
<th>æœåŠ¡</th>
<th>è´¹ç”¨/å¹´</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>æœåŠ¡å™¨é›†ç¾¤</strong></td>
<td>ECS 8æ ¸16GB Ã— 2</td>
<td>Â¥20,000</td>
</tr>
<tr>
<td><strong>è´Ÿè½½å‡è¡¡</strong></td>
<td>SLBé«˜æ€§èƒ½</td>
<td>Â¥3,600</td>
</tr>
<tr>
<td><strong>æ•°æ®åº“</strong></td>
<td>RDSé«˜å¯ç”¨</td>
<td>Â¥12,000</td>
</tr>
<tr>
<td><strong>CDN</strong></td>
<td>10TBæµé‡</td>
<td>Â¥15,360</td>
</tr>
<tr>
<td><strong>OSSå­˜å‚¨</strong></td>
<td>2TB</td>
<td>Â¥2,400</td>
</tr>
<tr>
<td><strong>WAFé˜²æŠ¤</strong></td>
<td>é«˜çº§ç‰ˆ</td>
<td>Â¥28,800</td>
</tr>
<tr>
<td><strong>DDoSé˜²æŠ¤</strong></td>
<td>50Gbps</td>
<td>Â¥24,000</td>
</tr>
<tr>
<td><strong>åŸŸå</strong></td>
<td>å¤šåŸŸå</td>
<td>Â¥500</td>
</tr>
<tr>
<td><strong>SSLè¯ä¹¦</strong></td>
<td>EVé€šé…ç¬¦è¯ä¹¦</td>
<td>Â¥8,000</td>
</tr>
<tr>
<td><strong>ç›‘æ§å‘Šè­¦</strong></td>
<td>ä¼ä¸šç‰ˆ</td>
<td>Â¥6,000</td>
</tr>
<tr>
<td><strong>æŠ€æœ¯æ”¯æŒ</strong></td>
<td>7Ã—24å°æ—¶</td>
<td>Â¥12,000</td>
</tr>
<tr>
<td><strong>æ€»è®¡</strong></td>
<td>-</td>
<td><strong>Â¥132,660</strong></td>
</tr>
</tbody>
</table>
<h3 id="æˆæœ¬ä¼˜åŒ–å»ºè®®">6.2 æˆæœ¬ä¼˜åŒ–å»ºè®®</h3>
<h4 id="çœé’±æŠ€å·§">ğŸ’° çœé’±æŠ€å·§</h4>
<ol type="1">
<li><strong>é•¿æœŸè´­ä¹°</strong>ï¼š3å¹´æ¯”1å¹´ä¾¿å®œ40%</li>
<li><strong>æ–°ç”¨æˆ·ä¼˜æƒ </strong>ï¼šé¦–è´­å¯äº«50%æŠ˜æ‰£</li>
<li><strong>å­¦ç”Ÿè®¤è¯</strong>ï¼šé˜¿é‡Œäº‘å­¦ç”Ÿæœº114å…ƒ/å¹´</li>
<li><strong>é¢„ç•™å®ä¾‹</strong>ï¼šæ‰¿è¯º1-3å¹´ä½¿ç”¨ï¼ŒæŠ˜æ‰£70%</li>
<li><strong>æŒ‰é‡ä»˜è´¹</strong>ï¼šæµé‡å°æ—¶é€‰æ‹©æŒ‰é‡è®¡è´¹</li>
</ol>
<h4 id="æ€§ä»·æ¯”æ–¹æ¡ˆ">ğŸ¯ æ€§ä»·æ¯”æ–¹æ¡ˆ</h4>
<pre><code>ä½æˆæœ¬ï¼šVercel(å…è´¹) + Supabase(å…è´¹) = Â¥0/å¹´
  é€‚åˆï¼šä¸ªäººé¡¹ç›®ã€æ¼”ç¤ºç½‘ç«™

å¹³è¡¡å‹ï¼šé˜¿é‡Œäº‘ECS + CDN = Â¥2,000-5,000/å¹´
  é€‚åˆï¼šåˆåˆ›å…¬å¸ã€å°å‹ä¼ä¸š

ä¼ä¸šçº§ï¼šæ··åˆäº‘ + å®¹ç¾å¤‡ä»½ = Â¥50,000-200,000/å¹´
  é€‚åˆï¼šå¤§å‹ä¼ä¸šã€å…³é”®ä¸šåŠ¡</code></pre>
<hr />
<h2 id="éƒ¨ç½²æµç¨‹">7. éƒ¨ç½²æµç¨‹</h2>
<h3 id="å¿«é€Ÿéƒ¨ç½²vercel">7.1 å¿«é€Ÿéƒ¨ç½²ï¼ˆVercelï¼‰</h3>
<p><strong>æ­¥éª¤1ï¼šå‡†å¤‡ä»£ç </strong></p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ç¡®ä¿package.jsonæœ‰buildå‘½ä»¤</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="kw">{</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;scripts&quot;</span><span class="ex">:</span> {</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;build&quot;</span><span class="ex">:</span> <span class="st">&quot;vite build&quot;</span>,</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;preview&quot;</span><span class="ex">:</span> <span class="st">&quot;vite preview&quot;</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">}</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="er">}</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="co"># åˆ›å»ºvercel.json</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="kw">{</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;version&quot;</span><span class="ex">:</span> 2,</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;builds&quot;</span><span class="ex">:</span> [</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">{</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;src&quot;</span><span class="ex">:</span> <span class="st">&quot;package.json&quot;</span>,</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;use&quot;</span><span class="ex">:</span> <span class="st">&quot;@vercel/static-build&quot;</span>,</span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;config&quot;</span><span class="ex">:</span> { <span class="st">&quot;distDir&quot;</span>: <span class="st">&quot;dist&quot;</span> }</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>  <span class="ex">],</span></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;routes&quot;</span><span class="ex">:</span> [</span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">{</span> <span class="st">&quot;handle&quot;</span><span class="ex">:</span> <span class="st">&quot;filesystem&quot;</span> },</span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>    <span class="kw">{</span> <span class="st">&quot;src&quot;</span><span class="ex">:</span> <span class="st">&quot;/api/(.*)&quot;</span>, <span class="st">&quot;dest&quot;</span>: <span class="st">&quot;/server/index.js&quot;</span> },</span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>    <span class="kw">{</span> <span class="st">&quot;src&quot;</span><span class="ex">:</span> <span class="st">&quot;/(.*)&quot;</span>, <span class="st">&quot;dest&quot;</span>: <span class="st">&quot;/index.html&quot;</span> }</span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a>  <span class="ex">]</span></span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span></code></pre></div>
<p><strong>æ­¥éª¤2ï¼šè¿æ¥GitHub</strong></p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># æ¨é€ä»£ç åˆ°GitHub</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> add .</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">&quot;Ready for deployment&quot;</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> push origin main</span></code></pre></div>
<p><strong>æ­¥éª¤3ï¼šå¯¼å…¥Vercel</strong></p>
<div class="sourceCode" id="cb26"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># è®¿é—® https://vercel.com</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="co"># ç‚¹å‡» &quot;New Project&quot;</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="co"># é€‰æ‹©GitHubä»“åº“</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co"># é…ç½®æ„å»ºè®¾ç½®ï¼š</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="co">#   Framework Preset: Vite</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="co">#   Build Command: npm run build</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="co">#   Output Directory: dist</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="co"># ç‚¹å‡» &quot;Deploy&quot;</span></span></code></pre></div>
<p><strong>æ­¥éª¤4ï¼šç»‘å®šåŸŸå</strong></p>
<div class="sourceCode" id="cb27"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># åœ¨Vercelé¡¹ç›®è®¾ç½®ä¸­æ·»åŠ åŸŸå</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Settings</span> â†’ Domains â†’ Add Domain</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="ex">your-domain.com</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="co"># é…ç½®DNSï¼ˆåˆ°åŸŸåæœåŠ¡å•†ï¼‰</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="ex">Type:</span> CNAME</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="ex">Name:</span> @</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="ex">Value:</span> cname.vercel-dns.com</span></code></pre></div>
<h3 id="dockeréƒ¨ç½²">7.2 Dockeréƒ¨ç½²</h3>
<p><strong>æ­¥éª¤1ï¼šåˆ›å»ºDockerfile</strong></p>
<div class="sourceCode" id="cb28"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># å‰ç«¯Dockerfile</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> node:18-alpine <span class="kw">AS</span> builder</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WORKDIR</span> /app</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> package*.json ./</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="ex">npm</span> install</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> . .</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="ex">npm</span> run build</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> nginx:alpine</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> <span class="op">--from=builder</span> /app/dist /usr/share/nginx/html</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> nginx.conf /etc/nginx/conf.d/default.conf</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a><span class="kw">EXPOSE</span> 80</span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">&quot;nginx&quot;</span>, <span class="st">&quot;-g&quot;</span>, <span class="st">&quot;daemon off;&quot;</span>]</span></code></pre></div>
<p><strong>æ­¥éª¤2ï¼šåˆ›å»ºdocker-compose.yml</strong></p>
<div class="sourceCode" id="cb29"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.8&#39;</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">frontend</span><span class="kw">:</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">build</span><span class="kw">:</span><span class="at"> .</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">&quot;80:80&quot;</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">&quot;443:443&quot;</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./nginx.conf:/etc/nginx/conf.d/default.conf</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./ssl:/etc/nginx/ssl</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">depends_on</span><span class="kw">:</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> backend</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">backend</span><span class="kw">:</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">build</span><span class="kw">:</span><span class="at"> ./server</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">&quot;3001:3001&quot;</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> NODE_ENV=production</span></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> DATABASE_PATH=/data/aiweb.db</span></span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./server/data:/data</span></span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./server/uploads:/app/uploads</span></span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">nginx</span><span class="kw">:</span></span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> nginx:alpine</span></span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">&quot;80:80&quot;</span></span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">&quot;443:443&quot;</span></span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./nginx.conf:/etc/nginx/nginx.conf</span></span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./dist:/usr/share/nginx/html</span></span>
<span id="cb29-33"><a href="#cb29-33" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./ssl:/etc/nginx/ssl</span></span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">depends_on</span><span class="kw">:</span></span>
<span id="cb29-35"><a href="#cb29-35" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> backend</span></span></code></pre></div>
<p><strong>æ­¥éª¤3ï¼šæ„å»ºè¿è¡Œ</strong></p>
<div class="sourceCode" id="cb30"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># æ„å»ºé•œåƒ</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="ex">docker-compose</span> build</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="co"># å¯åŠ¨å®¹å™¨</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="ex">docker-compose</span> up <span class="at">-d</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="co"># æŸ¥çœ‹æ—¥å¿—</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a><span class="ex">docker-compose</span> logs <span class="at">-f</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a><span class="co"># åœæ­¢å®¹å™¨</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a><span class="ex">docker-compose</span> down</span></code></pre></div>
<hr />
<h2 id="è¿ç»´ç›‘æ§">8. è¿ç»´ç›‘æ§</h2>
<h3 id="ç›‘æ§æŒ‡æ ‡">8.1 ç›‘æ§æŒ‡æ ‡</h3>
<table>
<thead>
<tr>
<th>æŒ‡æ ‡ç±»å‹</th>
<th>ç›‘æ§é¡¹</th>
<th>å‘Šè­¦é˜ˆå€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>æ€§èƒ½</strong></td>
<td>CPUä½¿ç”¨ç‡</td>
<td>&gt; 80%</td>
</tr>
<tr>
<td><strong>æ€§èƒ½</strong></td>
<td>å†…å­˜ä½¿ç”¨ç‡</td>
<td>&gt; 85%</td>
</tr>
<tr>
<td><strong>æ€§èƒ½</strong></td>
<td>ç£ç›˜ä½¿ç”¨ç‡</td>
<td>&gt; 90%</td>
</tr>
<tr>
<td><strong>æ€§èƒ½</strong></td>
<td>ç½‘ç»œå¸¦å®½</td>
<td>&gt; 80%</td>
</tr>
<tr>
<td><strong>å¯ç”¨æ€§</strong></td>
<td>HTTPçŠ¶æ€ç </td>
<td>5xx &gt; 1%</td>
</tr>
<tr>
<td><strong>å¯ç”¨æ€§</strong></td>
<td>å“åº”æ—¶é—´</td>
<td>&gt; 3ç§’</td>
</tr>
<tr>
<td><strong>å¯ç”¨æ€§</strong></td>
<td>æœåŠ¡åœ¨çº¿ç‡</td>
<td>&lt; 99.9%</td>
</tr>
<tr>
<td><strong>å®‰å…¨</strong></td>
<td>å¼‚å¸¸ç™»å½•</td>
<td>ç«‹å³å‘Šè­¦</td>
</tr>
<tr>
<td><strong>å®‰å…¨</strong></td>
<td>DDoSæ”»å‡»</td>
<td>ç«‹å³å‘Šè­¦</td>
</tr>
</tbody>
</table>
<h3 id="æ—¥å¿—åˆ†æ">8.2 æ—¥å¿—åˆ†æ</h3>
<p><strong>Nginxè®¿é—®æ—¥å¿—åˆ†æ</strong></p>
<div class="sourceCode" id="cb31"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># æŸ¥çœ‹è®¿é—®é‡TOP10</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">awk</span> <span class="st">&#39;{print $1}&#39;</span> /var/log/nginx/access.log <span class="kw">|</span> <span class="fu">sort</span> <span class="kw">|</span> <span class="fu">uniq</span> <span class="at">-c</span> <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-nr</span> <span class="kw">|</span> <span class="fu">head</span> <span class="at">-10</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="co"># æŸ¥çœ‹è®¿é—®æœ€å¤šçš„URL</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="fu">awk</span> <span class="st">&#39;{print $7}&#39;</span> /var/log/nginx/access.log <span class="kw">|</span> <span class="fu">sort</span> <span class="kw">|</span> <span class="fu">uniq</span> <span class="at">-c</span> <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-nr</span> <span class="kw">|</span> <span class="fu">head</span> <span class="at">-10</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="co"># æŸ¥çœ‹404é”™è¯¯</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span> <span class="st">&quot;404&quot;</span> /var/log/nginx/access.log</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a><span class="co"># æŸ¥çœ‹æ…¢è¯·æ±‚ï¼ˆ&gt;2ç§’ï¼‰</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a><span class="fu">awk</span> <span class="st">&#39;$NF &gt; 2 {print $0}&#39;</span> /var/log/nginx/access.log</span></code></pre></div>
<h3 id="å‘Šè­¦é€šçŸ¥">8.3 å‘Šè­¦é€šçŸ¥</h3>
<p><strong>é…ç½®é’‰é’‰/ä¼ä¸šå¾®ä¿¡å‘Šè­¦</strong></p>
<div class="sourceCode" id="cb32"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># å®‰è£…ç›‘æ§è„šæœ¬</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nano</span> /usr/local/bin/monitor-alert.sh</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="va">CPU</span><span class="op">=</span><span class="va">$(</span><span class="ex">top</span> <span class="at">-bn1</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&quot;Cpu(s)&quot;</span> <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;{print $2}&#39;</span> <span class="kw">|</span> <span class="fu">cut</span> <span class="at">-d</span><span class="st">&#39;%&#39;</span> <span class="at">-f1</span><span class="va">)</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">((</span> <span class="va">$(</span><span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$CPU</span><span class="st"> &gt; 80&quot;</span> <span class="kw">|</span> <span class="fu">bc</span> <span class="at">-l</span><span class="va">)</span> <span class="kw">));</span> <span class="cf">then</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>    <span class="ex">curl</span> <span class="at">-X</span> POST <span class="st">&#39;https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=xxx&#39;</span> <span class="dt">\</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">-H</span> <span class="st">&#39;Content-Type: application/json&#39;</span> <span class="dt">\</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">-d</span> <span class="st">&quot;{</span><span class="dt">\&quot;</span><span class="st">msgtype</span><span class="dt">\&quot;</span><span class="st">:</span><span class="dt">\&quot;</span><span class="st">text</span><span class="dt">\&quot;</span><span class="st">,</span><span class="dt">\&quot;</span><span class="st">text</span><span class="dt">\&quot;</span><span class="st">:{</span><span class="dt">\&quot;</span><span class="st">content</span><span class="dt">\&quot;</span><span class="st">:</span><span class="dt">\&quot;</span><span class="st">âš ï¸ CPUä½¿ç”¨ç‡è¿‡é«˜: </span><span class="va">${CPU}</span><span class="st">%</span><span class="dt">\&quot;</span><span class="st">}}&quot;</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a><span class="cf">fi</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a><span class="co"># æ·»åŠ å®šæ—¶ä»»åŠ¡ï¼ˆæ¯5åˆ†é’Ÿæ£€æŸ¥ï¼‰</span></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a><span class="ex">*/5</span> <span class="pp">*</span> <span class="pp">*</span> <span class="pp">*</span> <span class="pp">*</span> /usr/local/bin/monitor-alert.sh</span></code></pre></div>
<hr />
<h2 id="éƒ¨ç½²æ£€æŸ¥æ¸…å•">ğŸ“‹ éƒ¨ç½²æ£€æŸ¥æ¸…å•</h2>
<h3 id="éƒ¨ç½²å‰">éƒ¨ç½²å‰</h3>
<ul class="task-list">
<li><label><input type="checkbox" />æœåŠ¡å™¨é‡‡è´­å®Œæˆ</label></li>
<li><label><input type="checkbox" />åŸŸåæ³¨å†Œå®Œæˆ</label></li>
<li><label><input type="checkbox" />SSLè¯ä¹¦ç”³è¯·å®Œæˆ</label></li>
<li><label><input type="checkbox" />ä»£ç å‡†å¤‡å°±ç»ª</label></li>
<li><label><input type="checkbox" />å¤‡ä»½ç­–ç•¥åˆ¶å®š</label></li>
</ul>
<h3 id="éƒ¨ç½²ä¸­">éƒ¨ç½²ä¸­</h3>
<ul class="task-list">
<li><label><input type="checkbox" />æœåŠ¡å™¨é…ç½®å®Œæˆ</label></li>
<li><label><input type="checkbox" />ä»£ç éƒ¨ç½²æˆåŠŸ</label></li>
<li><label><input type="checkbox" />æ•°æ®åº“åˆå§‹åŒ–</label></li>
<li><label><input type="checkbox" />Nginxé…ç½®æ­£ç¡®</label></li>
<li><label><input type="checkbox" />SSLè¯ä¹¦å®‰è£…</label></li>
<li><label><input type="checkbox" />CDNé…ç½®å®Œæˆ</label></li>
</ul>
<h3 id="éƒ¨ç½²å">éƒ¨ç½²å</h3>
<ul class="task-list">
<li><label><input type="checkbox" />åŠŸèƒ½æµ‹è¯•é€šè¿‡</label></li>
<li><label><input type="checkbox" />æ€§èƒ½æµ‹è¯•é€šè¿‡</label></li>
<li><label><input type="checkbox" />å®‰å…¨æ‰«æé€šè¿‡</label></li>
<li><label><input type="checkbox" />ç›‘æ§å‘Šè­¦é…ç½®</label></li>
<li><label><input type="checkbox" />å¤‡ä»½ä»»åŠ¡è¿è¡Œ</label></li>
<li><label><input type="checkbox" />æ–‡æ¡£æ›´æ–°å®Œæˆ</label></li>
</ul>
<hr />
<p><strong>æ–‡æ¡£ç‰ˆæœ¬</strong>ï¼šv2.5.0<br />
<strong>æœ€åæ›´æ–°</strong>ï¼š2025-12-20<br />
<strong>æŠ€æœ¯æ”¯æŒ</strong>ï¼šsupport@mingsheng.com</p>
</body>
</html>
