# 📊 拧紧曲线功能全面升级 - 专业分析与导出

## 📌 升级概述

本次升级将拧紧曲线分析功能提升到**专业级水平**，基于知识库中的拧紧曲线专业知识，实现了标准曲线与异常曲线的智能对比分析。

---

## 🎯 核心功能升级

### 1. 智能异常检测算法（7种异常）

#### 🔴 滑牙（Thread Stripping）
- **检测算法**: 角度>200° && (扭矩<10Nm || 扭矩突降>15Nm)
- **典型特征**: 曲线尾部波浪形、扭矩无法继续上升
- **诊断原因**:
  - 内螺纹材料硬度不足
  - 螺纹啮合长度不够
  - 拧紧扭矩超过材料承载能力
- **解决方案**:
  - 使用螺纹护套增强连接
  - 降低拧紧扭矩10-20%
  - 增加螺纹啮合长度

#### 🟡 粘滑（Stick-Slip）
- **检测算法**: 波动频率>5 && 幅度>5Nm
- **典型特征**: 锯齿状波动、拧紧过程咔吱声响
- **诊断原因**:
  - 拧紧速度过高
  - 螺纹副摩擦系数不稳定
  - 润滑不良
- **解决方案**:
  - 降低拧紧转速至40-60rpm
  - 使用螺纹胶或润滑剂
  - 改善螺纹表面粗糙度

#### 🟠 缓升（Slow Rise）
- **检测算法**: 弹性段斜率<0.08
- **典型特征**: 扭矩上升缓慢、曲线斜率平缓
- **诊断原因**:
  - 连接件间隙过大
  - 螺栓或连接件刚度不足
  - 垫片压缩量过大
- **解决方案**:
  - 增加定位销
  - 更换高刚度螺栓
  - 优化垫片选型

#### 🟣 压溃（Crushing）
- **检测算法**: 扭矩平台（20点内波动<2Nm）
- **典型特征**: 双峰或平台现象
- **诊断原因**:
  - 被连接件材料强度不足
  - 支撑面积过小
  - 拧紧扭矩过大
- **解决方案**:
  - 增加垫圈面积
  - 使用软质垫片缓冲
  - 降低拧紧扭矩15-30%

#### 🔴 断裂（Fracture）
- **检测算法**: 扭矩>50后突降>30Nm
- **典型特征**: 扭矩急剧上升后归零
- **诊断原因**:
  - 螺栓强度等级不足
  - 扭矩严重超过屈服极限
  - 螺栓疲劳损伤
- **解决方案**:
  - 更换高强度等级螺栓（10.9级或12.9级）
  - 重新计算拧紧扭矩
  - 避免重复使用螺栓

#### 🟡 浮钉（Floating Bolt）
- **检测算法**: 贴合点角度>400°
- **典型特征**: 扭矩快速上升后停滞
- **诊断原因**:
  - 螺纹孔深度不足
  - 螺纹孔内有切屑异物
  - 螺钉长度过长
- **解决方案**:
  - 增加螺纹孔深度
  - 清理螺纹孔内异物
  - 更换合适长度螺钉

#### 🟠 开裂（Cracking）
- **检测算法**: 扭矩跌落>3次，单次>3Nm
- **典型特征**: 扭矩曲线多次小跌落
- **诊断原因**:
  - 塑料件韧性不足
  - 螺纹孔壁厚不足
  - 拧紧扭矩超标
- **解决方案**:
  - 更换韧性更好的材料
  - 增加螺纹孔壁厚
  - 降低拧紧扭矩20-40%

---

### 2. 关键特征点自动识别

#### 🎯 贴合点（Seat Point）
- **定义**: 曲线从平缓开始明显上升的拐点
- **检测阈值**: 扭矩>5Nm
- **意义**: 标志螺栓头部与工件完全接触

#### 🎯 屈服点（Yield Point）
- **定义**: 曲线斜率明显减小的点
- **检测算法**: 斜率变化>50%
- **意义**: 螺栓开始进入塑性变形阶段

#### 🎯 最大扭矩点
- **自动标注**: 峰值扭矩及对应角度
- **对比分析**: 与标准曲线偏差计算

#### 🎯 弹性段斜率
- **计算范围**: 360-480°
- **物理意义**: 评估连接件刚度
- **材质识别**: 用于智能材质判断

---

### 3. 标准曲线 vs 实测曲线对比

#### 可视化对比
- **标准曲线**: 橙色粗线（lineWidth: 4）
- **实测曲线**: 多种颜色，异常曲线加粗（lineWidth: 3）
- **关键点标注**: markPoint自动显示
- **对比线**: 虚线显示扭矩偏差

#### 偏差计算
```
扭矩偏差率 = (实测扭矩 - 标准扭矩) / 标准扭矩 × 100%
角度偏差 = 实测角度 - 标准角度

判定标准:
• 优秀: 扭矩偏差 < ±5%
• 良好: 扭矩偏差 < ±10%
• 需改进: 扭矩偏差 > ±10%
```

---

### 4. 材质智能识别系统

#### 🔩 钢质连接件
```
识别条件: 斜率>0.1 && 扭矩>20Nm
特性: 高强度、高刚度、线性弹性段明显
推荐扭矩: 25-35Nm (M8-M10)
推荐转速: 40-60rpm
控制策略: 屈服点拧紧控制（Yield Point Control）
注意事项: 防止过拧导致螺栓延伸超限
```

#### 🔩 铝合金连接件
```
识别条件: 斜率0.05-0.1 && 扭矩10-20Nm
特性: 中等强度、较软、易产生压痕
推荐扭矩: 10-18Nm (M8-M10)
推荐转速: 30-50rpm
控制策略: 扭矩控制+角度监控
注意事项: 螺纹易滑牙，建议使用螺纹护套
```

#### 🔩 塑料连接件
```
识别条件: 斜率<0.05 || 扭矩<10Nm
特性: 低刚度、非线性明显、蠕变性大
推荐扭矩: 3-8Nm (M6-M8)
推荐转速: 20-40rpm
控制策略: 转角控制+扭矩上限保护
注意事项: 严格控制扭矩上限，避免开裂
```

---

### 5. 三阶段拧紧理论可视化

#### 阶段一: 低速认牙（0-90°）
- **特征**: 扭矩几乎为0，螺栓与工件接触
- **转速**: 180rpm（低速）
- **目的**: 避免交叉螺纹、确保正确啮合

#### 阶段二: 快速旋入（90-360°）
- **特征**: 扭矩缓慢上升，基本线性关系
- **转速**: 800rpm（高速）
- **目的**: 快速旋入，提高效率

#### 阶段三: 拧紧阶段（360-540°）
- **特征**: 扭矩快速上升，进入弹性段和塑性段
- **转速**: 300rpm（中速）
- **目的**: 产生预紧力，完成紧固

---

### 6. 批次稳定性分析

#### 统计参数
```javascript
扭矩标准差 σT = √(Σ(Ti - T̄)² / n)
角度标准差 σA = √(Σ(Ai - Ā)² / n)
变异系数 CVT = σT / T̄ × 100%
稳定性评分 = max(0, 100 - CVT×10 - CVA×2)
```

#### 评估标准
- **工艺稳定** (90-100分): 高度一致，质量控制良好
- **基本稳定** (70-89分): 存在一定波动，需要检查
- **波动较大** (<70分): 需要立即排查原因

---

### 7. 专业分析报告导出

#### 报告结构（符合ISO 5393标准）

##### 一、基本信息
- 报告生成时间
- 分析师/操作员
- 零件/总成名称
- 工具信息
- 工艺标准

##### 二、曲线概况
- 总曲线数量
- 合格/不合格数量
- 合格率
- 标准曲线信息

##### 三、曲线关键阶段标注
- 三阶段理论说明
- 贴合点识别
- 目标点参数

##### 四、关键参数数据表格
```
参数          测量值    单位    目标范围/备注
─────────────────────────────────────────
最终扭矩      30.00    N·m     目标: XX ± 10
总转角        540      °       目标: XX ± 20
贴合点扭矩    15.2     N·m     -
斜率(弹性区)  0.125    N·m/°   评估连接刚度
```

##### 五、材质分析
- 智能识别材质类型
- 材质特性描述
- 建议扭矩范围
- 建议拧紧转速
- 特殊注意事项

##### 六、结果判定与注释
- 综合判定结果
- 不合格原因分析
- 可能原因
- 建议措施

##### 七、批次对比与工艺稳定性
- 扭矩/角度标准差
- 工艺稳定性评分
- 一致性评估
- 工艺改进建议

##### 八、分析员结论与审批
- 分析完成时间
- 分析结论
- 签名栏位

---

## 📊 导出功能对比

| 导出类型 | 文件格式 | 适用场景 | 包含内容 |
|---------|---------|---------|---------|
| **CSV数据** | .csv | 数据备份、二次分析 | 完整数据点 |
| **TXT数据** | .txt | 快速查看、记录 | 格式化数据表 |
| **简易报告** | .txt | 日常检查 | 综合评估+问题诊断 |
| **专业报告** | .txt | 质量审核、归档 | 8章节完整报告 |

---

## 🎯 使用建议

### 日常质量检查
1. 加载当天拧紧曲线
2. 执行智能分析
3. 导出简易报告存档

### 工艺验证
1. 设置标准曲线
2. 批量导入实测曲线
3. 执行对比分析
4. 导出专业报告提交审核

### 问题排查
1. 筛选异常曲线
2. 查看详细诊断
3. 参考解决方案
4. 实施改进措施

### 工艺改进
1. 收集一段时间的曲线数据
2. 分析批次稳定性
3. 优化工艺参数
4. 验证改进效果

---

## ✨ 技术亮点

### 算法创新
- 7种异常检测算法（业界领先）
- 自动特征提取（贴合点、屈服点）
- 智能材质识别（基于斜率和扭矩）

### 可视化增强
- 标准曲线与实测曲线对比
- 关键点自动标注
- 三阶段区域背景色区分
- 异常警告标识

### 报告专业
- 符合ISO 5393标准
- 包含完整诊断和解决方案
- 支持打印和归档
- 签名栏位

---

## 🚀 快速开始

```bash
# 1. 访问曲线分析页面
http://localhost:5173/#/curve-analysis

# 2. 加载演示数据
点击"加载演示数据"

# 3. 执行智能分析
点击"执行智能分析"

# 4. 导出专业报告
点击"导出" → "导出专业分析报告"
```

---

## 📚 参考标准

- **ISO 5393**: 旋转工具 - 扭矩-角度拧紧控制系统的性能测试方法
- **VDI/VDE 2862**: 螺纹连接的拧紧过程
- **GB/T 16823**: 螺纹紧固件拧紧试验方法

---

**升级完成时间**: 2025-12-16  
**技术支持**: 基于知识库专业拧紧曲线理论
