<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>äº§å“åˆ†ç±»æ•°æ®æ£€æŸ¥å·¥å…·</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    
    .container {
      background: white;
      border-radius: 16px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      padding: 40px;
      max-width: 900px;
      width: 100%;
    }
    
    h1 {
      color: #333;
      margin-bottom: 10px;
      font-size: 28px;
    }
    
    .subtitle {
      color: #666;
      margin-bottom: 30px;
      font-size: 14px;
    }
    
    .stats {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .stat-card {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 20px;
      border-radius: 12px;
      text-align: center;
    }
    
    .stat-card.empty {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    }
    
    .stat-number {
      font-size: 36px;
      font-weight: bold;
      margin-bottom: 5px;
    }
    
    .stat-label {
      font-size: 14px;
      opacity: 0.9;
    }
    
    .section {
      margin-bottom: 30px;
    }
    
    .section-title {
      font-size: 18px;
      font-weight: 600;
      color: #333;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 600;
    }
    
    .badge.success {
      background: #10b981;
      color: white;
    }
    
    .badge.warning {
      background: #f59e0b;
      color: white;
    }
    
    .badge.danger {
      background: #ef4444;
      color: white;
    }
    
    .tree {
      background: #f9fafb;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      padding: 20px;
      max-height: 400px;
      overflow-y: auto;
    }
    
    .tree-item {
      margin-left: 20px;
      margin-bottom: 8px;
      font-size: 14px;
      color: #374151;
    }
    
    .tree-item.level-1 {
      margin-left: 0;
      font-weight: 600;
      color: #1f2937;
    }
    
    .tree-item.level-2 {
      margin-left: 20px;
    }
    
    .tree-item.level-3 {
      margin-left: 40px;
    }
    
    .tree-item.level-4 {
      margin-left: 60px;
      color: #667eea;
    }
    
    .actions {
      display: flex;
      gap: 15px;
      margin-top: 30px;
    }
    
    button {
      flex: 1;
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
    }
    
    .btn-secondary {
      background: #e5e7eb;
      color: #374151;
    }
    
    .btn-secondary:hover {
      background: #d1d5db;
    }
    
    .alert {
      padding: 15px 20px;
      border-radius: 8px;
      margin-bottom: 20px;
      font-size: 14px;
      line-height: 1.6;
    }
    
    .alert.info {
      background: #dbeafe;
      color: #1e40af;
      border-left: 4px solid #3b82f6;
    }
    
    .alert.warning {
      background: #fef3c7;
      color: #92400e;
      border-left: 4px solid #f59e0b;
    }
    
    .empty-state {
      text-align: center;
      padding: 40px;
      color: #9ca3af;
    }
    
    .empty-state svg {
      width: 64px;
      height: 64px;
      margin-bottom: 15px;
      opacity: 0.5;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ” äº§å“åˆ†ç±»æ•°æ®æ£€æŸ¥å·¥å…·</h1>
    <p class="subtitle">æ£€æŸ¥æµè§ˆå™¨localStorageä¸­çš„4çº§åˆ†ç±»æ•°æ®</p>
    
    <div class="stats">
      <div class="stat-card" id="stat-1">
        <div class="stat-number" id="count-1">0</div>
        <div class="stat-label">1çº§åˆ†ç±»ï¼ˆå¤§ç±»ï¼‰</div>
      </div>
      <div class="stat-card" id="stat-2">
        <div class="stat-number" id="count-2">0</div>
        <div class="stat-label">2çº§åˆ†ç±»ï¼ˆä¸­ç±»ï¼‰</div>
      </div>
      <div class="stat-card" id="stat-3">
        <div class="stat-number" id="count-3">0</div>
        <div class="stat-label">3çº§åˆ†ç±»ï¼ˆå°ç±»ï¼‰</div>
      </div>
      <div class="stat-card" id="stat-4">
        <div class="stat-number" id="count-4">0</div>
        <div class="stat-label">4çº§åˆ†ç±»ï¼ˆç³»åˆ—ï¼‰</div>
      </div>
    </div>
    
    <div id="alert-container"></div>
    
    <div class="section">
      <div class="section-title">
        <span>åˆ†ç±»æ ‘ç»“æ„</span>
        <span class="badge" id="status-badge">æ£€æŸ¥ä¸­...</span>
      </div>
      <div class="tree" id="tree-container">
        <div class="empty-state">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
          </svg>
          <p>æ­£åœ¨åŠ è½½æ•°æ®...</p>
        </div>
      </div>
    </div>
    
    <div class="actions">
      <button class="btn-secondary" onclick="window.location.href='/'">è¿”å›é¦–é¡µ</button>
      <button class="btn-secondary" onclick="window.location.href='/admin/cms'">è¿›å…¥CMSç®¡ç†</button>
      <button class="btn-primary" onclick="initDemoData()">åˆå§‹åŒ–4çº§åˆ†ç±»ç¤ºä¾‹æ•°æ®</button>
    </div>
  </div>

  <script>
    // æ£€æŸ¥åˆ†ç±»æ•°æ®
    function checkCategoryData() {
      const categories = JSON.parse(localStorage.getItem('productCategories') || '[]')
      const subCategories = JSON.parse(localStorage.getItem('productSubCategories') || '[]')
      const thirdCategories = JSON.parse(localStorage.getItem('productThirdCategories') || '[]')
      const fourthCategories = JSON.parse(localStorage.getItem('productFourthCategories') || '[]')
      
      // æ›´æ–°ç»Ÿè®¡å¡ç‰‡
      document.getElementById('count-1').textContent = categories.length
      document.getElementById('count-2').textContent = subCategories.length
      document.getElementById('count-3').textContent = thirdCategories.length
      document.getElementById('count-4').textContent = fourthCategories.length
      
      // æ ‡è®°ç©ºæ•°æ®
      if (categories.length === 0) document.getElementById('stat-1').classList.add('empty')
      if (subCategories.length === 0) document.getElementById('stat-2').classList.add('empty')
      if (thirdCategories.length === 0) document.getElementById('stat-3').classList.add('empty')
      if (fourthCategories.length === 0) document.getElementById('stat-4').classList.add('empty')
      
      // æ˜¾ç¤ºè­¦å‘Šæˆ–æˆåŠŸæ¶ˆæ¯
      const alertContainer = document.getElementById('alert-container')
      if (fourthCategories.length === 0) {
        alertContainer.innerHTML = `
          <div class="alert warning">
            <strong>âš ï¸ æœªå‘ç°4çº§åˆ†ç±»æ•°æ®ï¼</strong><br>
            ç³»ç»Ÿæ”¯æŒ4çº§åˆ†ç±»ï¼Œä½†æ‚¨çš„localStorageä¸­æ²¡æœ‰4çº§åˆ†ç±»æ•°æ®ã€‚<br>
            â€¢ åŸå› 1ï¼šæ‚¨è¿˜æ²¡æœ‰åœ¨CMSåå°åˆ›å»º4çº§åˆ†ç±»<br>
            â€¢ åŸå› 2ï¼šæµè§ˆå™¨ç¼“å­˜ä¸­çš„æ•°æ®ä¸å®Œæ•´<br>
            â€¢ å»ºè®®ï¼šç‚¹å‡»ä¸‹æ–¹"åˆå§‹åŒ–4çº§åˆ†ç±»ç¤ºä¾‹æ•°æ®"æŒ‰é’®åˆ›å»ºæµ‹è¯•æ•°æ®ï¼Œæˆ–è¿›å…¥CMSåå°æ‰‹åŠ¨åˆ›å»ºã€‚
          </div>
        `
        document.getElementById('status-badge').className = 'badge warning'
        document.getElementById('status-badge').textContent = 'éœ€è¦é…ç½®'
      } else {
        alertContainer.innerHTML = `
          <div class="alert info">
            <strong>âœ… 4çº§åˆ†ç±»ç³»ç»Ÿæ­£å¸¸ï¼</strong><br>
            ç³»ç»Ÿå·²æ£€æµ‹åˆ°å®Œæ•´çš„4çº§åˆ†ç±»æ•°æ®ã€‚å¦‚æœå‰å°é¦–é¡µä»æ˜¾ç¤ºæ—§æ•°æ®ï¼Œè¯·æ¸…é™¤æµè§ˆå™¨ç¼“å­˜å¹¶åˆ·æ–°é¡µé¢ã€‚
          </div>
        `
        document.getElementById('status-badge').className = 'badge success'
        document.getElementById('status-badge').textContent = 'æ•°æ®æ­£å¸¸'
      }
      
      // æ„å»ºåˆ†ç±»æ ‘
      buildCategoryTree(categories, subCategories, thirdCategories, fourthCategories)
    }
    
    // æ„å»ºåˆ†ç±»æ ‘
    function buildCategoryTree(cats, subs, thirds, fourths) {
      const container = document.getElementById('tree-container')
      
      if (cats.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4" />
            </svg>
            <p>æš‚æ— åˆ†ç±»æ•°æ®</p>
          </div>
        `
        return
      }
      
      let html = ''
      cats.forEach(cat => {
        html += `<div class="tree-item level-1">ğŸ“¦ ${cat.name['zh-CN']} (ID: ${cat.id})</div>`
        
        const catSubs = subs.filter(s => s.parentId === cat.id)
        catSubs.forEach(sub => {
          html += `<div class="tree-item level-2">â”œâ”€ ğŸ“ ${sub.name['zh-CN']} (ID: ${sub.id})</div>`
          
          const subThirds = thirds.filter(t => t.parentId === sub.id)
          subThirds.forEach(third => {
            html += `<div class="tree-item level-3">â”‚  â”œâ”€ ğŸ“„ ${third.name['zh-CN']} (ID: ${third.id})</div>`
            
            const thirdFourths = fourths.filter(f => f.parentId === third.id)
            thirdFourths.forEach(fourth => {
              html += `<div class="tree-item level-4">â”‚  â”‚  â””â”€ âœ¨ ${fourth.name['zh-CN']} (ID: ${fourth.id})</div>`
            })
          })
        })
      })
      
      container.innerHTML = html
    }
    
    // åˆå§‹åŒ–ç¤ºä¾‹æ•°æ®
    function initDemoData() {
      if (!confirm('ç¡®å®šè¦åˆå§‹åŒ–4çº§åˆ†ç±»ç¤ºä¾‹æ•°æ®å—ï¼Ÿ\nè¿™å°†åˆ›å»ºä¸€ä¸ªå®Œæ•´çš„4çº§åˆ†ç±»æ ‘ä¾›æµ‹è¯•ä½¿ç”¨ã€‚')) {
        return
      }
      
      // è·å–ç°æœ‰æ•°æ®
      let categories = JSON.parse(localStorage.getItem('productCategories') || '[]')
      let subCategories = JSON.parse(localStorage.getItem('productSubCategories') || '[]')
      let thirdCategories = JSON.parse(localStorage.getItem('productThirdCategories') || '[]')
      let fourthCategories = JSON.parse(localStorage.getItem('productFourthCategories') || '[]')
      
      // è·å–æœ€å¤§ID
      const getMaxId = (arr) => arr.length > 0 ? Math.max(...arr.map(item => item.id)) : 0
      
      let maxCatId = getMaxId(categories)
      let maxSubId = getMaxId(subCategories)
      let maxThirdId = getMaxId(thirdCategories)
      let maxFourthId = getMaxId(fourthCategories)
      
      // åˆ›å»º1çº§åˆ†ç±»
      const cat1 = {
        id: ++maxCatId,
        name: { 'zh-CN': 'å·¥ä¸šæ™ºèƒ½è£…é…ç³»ç»Ÿ', 'en-US': 'Industrial Assembly System' },
        description: { 'zh-CN': 'å®Œæ•´çš„å·¥ä¸šæ™ºèƒ½è£…é…è§£å†³æ–¹æ¡ˆ', 'en-US': 'Complete industrial assembly solutions' },
        image: 'https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?w=600'
      }
      categories.push(cat1)
      
      // åˆ›å»º2çº§åˆ†ç±»
      const sub1 = {
        id: ++maxSubId,
        parentId: cat1.id,
        name: { 'zh-CN': 'ç”µåŠ¨è£…é…å·¥å…·', 'en-US': 'Electric Assembly Tools' },
        description: { 'zh-CN': 'é«˜ç²¾åº¦ç”µåŠ¨è£…é…å·¥å…·ç³»åˆ—', 'en-US': 'High-precision electric assembly tools' }
      }
      subCategories.push(sub1)
      
      // åˆ›å»º3çº§åˆ†ç±»
      const third1 = {
        id: ++maxThirdId,
        parentId: sub1.id,
        name: { 'zh-CN': 'ç”µåŠ¨èºä¸åˆ€ç³»åˆ—', 'en-US': 'Electric Screwdriver Series' },
        description: { 'zh-CN': 'ä¸“ä¸šç”µåŠ¨èºä¸åˆ€äº§å“', 'en-US': 'Professional electric screwdrivers' }
      }
      thirdCategories.push(third1)
      
      // åˆ›å»º4çº§åˆ†ç±»
      const fourth1 = {
        id: ++maxFourthId,
        parentId: third1.id,
        name: { 'zh-CN': 'ç›´æŸ„å‹ç”µåŠ¨èºä¸åˆ€', 'en-US': 'Straight Handle Electric Screwdriver' },
        description: { 'zh-CN': 'é€‚ç”¨äºç‹­çª„ç©ºé—´çš„ç›´æŸ„å‹ç”µåŠ¨èºä¸åˆ€', 'en-US': 'Straight handle for narrow spaces' }
      }
      fourthCategories.push(fourth1)
      
      const fourth2 = {
        id: ++maxFourthId,
        parentId: third1.id,
        name: { 'zh-CN': 'æ‰‹æªå‹ç”µåŠ¨èºä¸åˆ€', 'en-US': 'Pistol Grip Electric Screwdriver' },
        description: { 'zh-CN': 'äººä½“å·¥å­¦æ‰‹æªå‹è®¾è®¡', 'en-US': 'Ergonomic pistol grip design' }
      }
      fourthCategories.push(fourth2)
      
      // ä¿å­˜æ•°æ®
      localStorage.setItem('productCategories', JSON.stringify(categories))
      localStorage.setItem('productSubCategories', JSON.stringify(subCategories))
      localStorage.setItem('productThirdCategories', JSON.stringify(thirdCategories))
      localStorage.setItem('productFourthCategories', JSON.stringify(fourthCategories))
      
      alert('âœ… ç¤ºä¾‹æ•°æ®åˆå§‹åŒ–æˆåŠŸï¼\n\nå·²åˆ›å»ºï¼š\nâ€¢ 1çº§ï¼šå·¥ä¸šæ™ºèƒ½è£…é…ç³»ç»Ÿ\n  â€¢ 2çº§ï¼šç”µåŠ¨è£…é…å·¥å…·\n    â€¢ 3çº§ï¼šç”µåŠ¨èºä¸åˆ€ç³»åˆ—\n      â€¢ 4çº§ï¼šç›´æŸ„å‹ç”µåŠ¨èºä¸åˆ€\n      â€¢ 4çº§ï¼šæ‰‹æªå‹ç”µåŠ¨èºä¸åˆ€\n\né¡µé¢å°†åˆ·æ–°ä»¥æ˜¾ç¤ºæ–°æ•°æ®ã€‚')
      location.reload()
    }
    
    // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œæ£€æŸ¥
    window.addEventListener('DOMContentLoaded', checkCategoryData)
  </script>
</body>
</html>
