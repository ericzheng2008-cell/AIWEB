# 🧪 快速测试曲线导出功能

## 📋 测试步骤

### 1️⃣ 准备测试数据

1. 访问曲线分析页面
   ```
   http://localhost:5173/#/curve-analysis
   ```

2. 加载演示数据
   - 点击"加载演示数据"按钮
   - 系统自动生成8条曲线（7异常+1标准）

### 2️⃣ 测试CSV导出

1. 点击"导出" → "导出曲线数据 (CSV)"
2. 检查导出文件内容:
   - 包含所有选中曲线的数据点
   - 每个数据点包含: 角度、扭矩、时间
   - 额外信息: 状态、工具型号、SN、车间等
   - 文件名: `拧紧曲线数据_YYYY-MM-DD.csv`

**预期输出格式:**
```csv
曲线名称,点编号,角度(度),扭矩(N·m),时间(s),状态,工具型号,SN编号,车间,线体,班次
标准曲线,0,0.00,0.00,0.000,正常,,,,,
标准曲线,1,1.00,0.05,0.006,正常,,,,,
...
```

### 3️⃣ 测试TXT导出

1. 点击"导出" → "导出曲线数据 (TXT)"
2. 检查导出文件内容:
   - 标题信息清晰
   - 每条曲线独立显示
   - 包含关键参数（峰值扭矩、角度等）
   - 数据表格格式整齐

**预期输出格式:**
```
========================================
拧紧曲线数据导出
导出时间: 2025-12-16 14:30:00
曲线数量: 8
========================================

--- 曲线 1: 标准曲线 ---
状态: 正常
数据点数: 541
峰值扭矩: 30 N·m
峰值角度: 540°
...
```

### 4️⃣ 测试简易分析报告

1. 先执行智能分析（点击"执行智能分析"）
2. 点击"导出" → "导出分析报告 (TXT)"
3. 检查报告内容:
   - 综合评估数据
   - 问题诊断列表
   - 参数对比表格

**预期输出格式:**
```
=== 拧紧曲线对比分析报告 ===

生成时间：2025-12-16 14:30:00

--- 综合评估 ---
总曲线数：8
合格曲线：1
异常曲线：7
合格率：12.5%

--- 问题诊断 ---
问题1：内螺纹滑牙 [严重]
...
```

### 5️⃣ 测试专业分析报告 ⭐

1. 确保已执行智能分析
2. 点击"导出" → "导出专业分析报告"
3. 检查专业报告内容（这是最全面的报告）

**预期输出包含:**

#### ✅ 一、基本信息
- 报告生成时间
- 零件/总成名称
- 工具信息
- 工艺标准

#### ✅ 二、曲线概况
- 总曲线数量
- 合格/不合格数量
- 合格率
- 标准曲线信息

#### ✅ 三、关键阶段标注
- 三阶段理论说明
- 贴合点识别数据
- 目标点参数

#### ✅ 四、关键参数数据表格
```
参数                      测量值        单位      目标范围/备注
────────────────────────────────────────────────────────────
标准曲线                 
  最终扭矩              30.00        N·m       目标: [待填写] ± 10 N·m
  总转角                540          °         目标: [待填写] ± 20°
  贴合点扭矩            15.2         N·m       -
  斜率(弹性区)          0.125        N·m/°     评估连接刚度
  控制策略              转角控制     -         -
  质量评级              优秀         -         偏差0.0%
────────────────────────────────────────────────────────────
```

#### ✅ 五、材质分析
- 智能识别材质类型
- 材质特性描述
- 建议扭矩范围
- 建议拧紧转速
- ⚠️ 特殊注意事项

#### ✅ 六、结果判定与注释
- 综合判定结果（合格/不合格）
- 不合格原因分析
  - 问题描述
  - 影响曲线
  - 可能原因（1-4条）
  - 建议措施（包含具体解决方案）

#### ✅ 七、批次对比与工艺稳定性
- 扭矩标准差
- 转角标准差
- 工艺稳定性评分
- 一致性评估
- 工艺改进建议

#### ✅ 八、分析员结论与审批
- 分析完成时间
- 分析结论
- 签名栏位（分析员、审核人、批准人）

#### ✅ 报告底部
- 参考标准说明（ISO 5393、VDI/VDE 2862）

## 🎯 测试检查点

### CSV导出检查
- [ ] 文件可正常打开（Excel/WPS）
- [ ] 数据完整无遗漏
- [ ] 时间计算正确
- [ ] 中文显示正常

### TXT导出检查
- [ ] 文件可正常打开（记事本）
- [ ] 格式整齐美观
- [ ] 表格对齐正确
- [ ] 中文显示正常

### 分析报告检查
- [ ] 包含综合评估
- [ ] 问题诊断准确
- [ ] 参数对比完整

### 专业报告检查 ⭐
- [ ] 符合ISO标准格式
- [ ] 包含所有8个章节
- [ ] 数据表格完整
- [ ] 材质分析准确
- [ ] 异常诊断详细
- [ ] 解决方案具体
- [ ] 批次分析合理
- [ ] 签名栏位清晰

## 🔍 常见问题

### Q1: CSV文件中文乱码?
**A:** 使用Excel打开时，选择"数据" → "从文本/CSV" → 设置编码为UTF-8

### Q2: TXT报告格式错乱?
**A:** 使用等宽字体（如Consolas、Monaco）打开TXT文件

### Q3: 专业报告没有异常诊断?
**A:** 确保先执行"智能分析"，让系统检测异常后再导出报告

### Q4: 报告中的材质识别不准确?
**A:** 材质识别基于斜率和扭矩特征，如需精确识别，请手动标注材质类型

## 📊 导出对比

| 导出类型 | 数据完整度 | 分析深度 | 适用场景 |
|---------|----------|---------|---------|
| **CSV** | ⭐⭐⭐⭐⭐ | ⭐ | 数据存档、二次分析 |
| **TXT** | ⭐⭐⭐⭐ | ⭐⭐ | 快速查看、记录 |
| **简易报告** | ⭐⭐⭐ | ⭐⭐⭐ | 日常检查 |
| **专业报告** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | 质量审核、归档 |

## ✨ 推荐测试流程

1. **加载演示数据** （生成测试曲线）
2. **执行智能分析** （识别异常）
3. **依次测试导出**:
   - CSV（数据备份）
   - TXT（快速查看）
   - 简易报告（日常检查）
   - **专业报告**（重点测试⭐）
4. **检查所有导出文件**
5. **验证内容准确性**

## 🎉 测试完成标志

当你看到以下内容时，说明导出功能测试成功:

✅ CSV文件包含完整数据点
✅ TXT文件格式整齐美观
✅ 简易报告包含问题诊断
✅ 专业报告符合ISO标准，包含8个完整章节
✅ 所有异常类型都有详细的诊断和解决方案
✅ 材质识别与工艺推荐准确
✅ 批次稳定性分析合理

---

**提示**: 专业报告是最完整的导出格式，建议重点测试！
