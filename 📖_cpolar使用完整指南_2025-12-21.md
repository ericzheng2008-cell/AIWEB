# 🌐 cpolar 内网穿透完整使用指南

> 让您的本地 AIWEB 项目随时随地被访问
> 
> 更新时间：2025-12-21

---

## 📑 目录

1. [什么是 cpolar](#什么是-cpolar)
2. [快速开始](#快速开始)
3. [获取访问链接](#获取访问链接)
4. [版本对比](#版本对比)
5. [常见问题](#常见问题)

---

## 什么是 cpolar

**cpolar** 是一款内网穿透工具，可以将您本地电脑上的服务（如 AIWEB）暴露到公网，让任何人通过互联网访问。

### ✨ 主要优势

- ✅ **无需公网IP** - 家庭宽带、企业内网都能用
- ✅ **零配置** - 无需路由器设置、端口映射
- ✅ **支持HTTPS** - 自动配置SSL证书
- ✅ **跨平台访问** - 手机、电脑、平板都能访问
- ✅ **任意网络** - 4G/5G/WiFi/有线，随处可访问

### 🎯 适用场景

| 场景 | 说明 |
|------|------|
| 🏢 企业内测 | 让外地同事测试本地开发的网站 |
| 📱 移动测试 | 用手机测试网站的响应式设计 |
| 👥 客户演示 | 给客户展示开发中的产品 |
| 🔗 API对接 | 让第三方服务调用本地API |
| 🌍 远程访问 | 出差时访问公司电脑上的服务 |

---

## 快速开始

### 第一步：安装 cpolar

#### 方式一：自动安装（推荐）

双击运行脚本：
```
🌐_一键生成cpolar链接_2025-12-21.bat
```

如果未安装，脚本会自动打开官网引导您下载。

#### 方式二：手动安装

1. 访问官网：https://www.cpolar.com
2. 点击「下载」→「Windows」
3. 下载安装包并安装
4. 注册账号（完全免费）
5. 登录并获取 authtoken
6. 在命令行运行：`cpolar authtoken YOUR_TOKEN`

### 第二步：启动服务

双击运行：
```
🌐_一键生成cpolar链接_2025-12-21.bat
```

脚本会自动完成：
- ✅ 启动后端服务（端口5000）
- ✅ 启动前端服务（端口3002）
- ✅ 启动cpolar内网穿透
- ✅ 打开管理界面

### 第三步：获取链接

继续看下一节 👇

---

## 获取访问链接

启动后，有 **3种方式** 获取公网访问地址：

### 方式1：查看cpolar命令行窗口（最快⚡）

脚本会自动打开一个标题为「cpolar内网穿透」的窗口，在窗口中找到类似这样的信息：

```
Forwarding   https://xxxxx.cpolar.cn -> http://localhost:3002
```

**`https://xxxxx.cpolar.cn`** 就是您的公网访问地址！

📋 **示例**：
```
https://abc123.cpolar.cn
https://test-ming.cpolar.cn
https://8f3d2e1a.cpolar.cn
```

### 方式2：打开Web管理界面（最方便🌟）

1. 浏览器访问：http://localhost:9200
2. 在「Online」隧道列表中查看
3. 复制「Forwarding」列中的 HTTPS 地址

**截图示例**：
```
┌─────────────────────────────────────────────────┐
│ Tunnel Name │ Status │ Forwarding              │
├─────────────────────────────────────────────────┤
│ http-3002   │ online │ https://test.cpolar.cn │
└─────────────────────────────────────────────────┘
```

### 方式3：登录在线控制台（最稳定🔒）

1. 访问：https://dashboard.cpolar.com/status
2. 登录您的cpolar账号
3. 在「在线隧道列表」中查看
4. 复制公网地址

---

## 分享链接给他人

### 📱 分享信息模板

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
AIWEB 内测访问地址

🌐 访问地址：
https://xxxxx.cpolar.cn

📱 适用设备：
手机、电脑、平板

🌍 适用网络：
4G/5G/WiFi（任意网络）

📖 操作步骤：
1. 打开浏览器（推荐Chrome或Safari）
2. 输入上述地址
3. 等待10-20秒加载
4. 开始测试

⚠️  注意事项：
- 首次访问可能需要等待较长时间
- 建议使用Chrome或Safari浏览器
- 如遇到加载问题，请刷新页面
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### 📧 发送方式

- **微信**：直接发送链接
- **邮件**：使用上述模板
- **QQ**：直接发送链接
- **企业微信**：发送链接或二维码

---

## 版本对比

### 免费版

| 功能 | 说明 |
|------|------|
| 💰 价格 | 完全免费 |
| 🌐 域名 | 随机生成，每次启动会变 |
| ⏰ 时长 | 每4小时自动断开 |
| 📊 流量 | 无限制 |
| 🔧 隧道数 | 2条 |
| ✅ 适用场景 | 临时测试、短期演示 |

**示例域名**：
- `https://8f3d2e1a.cpolar.cn`（每次不同）
- `https://temp-123.cpolar.cn`（每次不同）

### VIP版（¥10/月起）

| 功能 | 说明 |
|------|------|
| 💰 价格 | ¥10/月 或 ¥100/年 |
| 🌐 域名 | **固定不变**，自定义子域名 |
| ⏰ 时长 | **无限制** |
| 📊 流量 | 无限制 |
| 🔧 隧道数 | 3-10条（根据套餐） |
| ✅ 适用场景 | **长期部署、正式使用** |

**示例域名**：
- `https://aiweb.cpolar.cn`（永久固定）
- `https://mingsheng.cpolar.cn`（永久固定）

### 💡 升级建议

**建议升级VIP的情况**：
- ✅ 需要长期内测（超过1天）
- ✅ 地址需要分享给多人
- ✅ 希望地址固定，分享一次终身有效
- ✅ 需要添加到企业文档、PPT等
- ✅ 企业正式部署环境

**升级地址**：https://dashboard.cpolar.com/get-started

**套餐推荐**：
- 💰 **月付套餐**：¥10/月 - 适合短期测试（1-3个月）
- 💰 **年付套餐**：¥100/年 - 适合长期部署（节省20%）
- 💰 **企业套餐**：¥300/年起 - 10条隧道+IP白名单

---

## VIP版固定域名配置

### 🎉 恭喜升级VIP！

VIP版本核心优势：
- ✅ **固定域名** - 永久不变，一次分享终身有效
- ✅ **自定义子域名** - 如 `aiweb-yourcompany.cpolar.cn`
- ✅ **无时间限制** - 7×24小时稳定运行
- ✅ **多条隧道** - 3-10条（根据套餐）
- ✅ **VIP专线** - 更快的访问速度
- ✅ **IP白名单** - 企业级安全控制

### 方式一：使用VIP配置向导（强烈推荐✨）

双击运行：
```
💎_VIP版本固定域名配置_2025-12-21.bat
```

**自动完成**：
1. ✅ 引导创建保留域名
2. ✅ 自动生成配置文件
3. ✅ 启动前后端服务
4. ✅ 启动VIP固定隧道
5. ✅ 显示永久访问地址

**配置完成后**，下次启动只需运行：
```
💎_VIP版本快速启动_2025-12-21.bat
```

### 方式二：手动配置（高级用户）

#### 步骤1：升级VIP

1. 访问：https://dashboard.cpolar.com/vip
2. 选择套餐（推荐月付¥10）
3. 完成支付

#### 步骤2：创建固定隧道

1. 访问：https://dashboard.cpolar.com/reserved
2. 点击「创建」
3. 填写信息：
   - **隧道名称**：`aiweb-tunnel`
   - **地区**：`China VIP`
   - **二级域名**：`aiweb-test`（您的自定义名称）
   - **类型**：`http`
4. 点击「创建」

#### 步骤3：配置本地客户端

创建配置文件：`%USERPROFILE%\.cpolar\cpolar.yml`

```yaml
version: "2"
authtoken: YOUR_TOKEN_HERE

tunnels:
  aiweb-frontend:
    proto: http
    addr: 5173
    region: cn_vip
    subdomain: aiweb-test  # 您的自定义子域名
    inspect: true
    bind_tls: true
  
  aiweb-backend:
    proto: http
    addr: 5000
    region: cn_vip
    subdomain: aiweb-test-api  # 后端API子域名
    inspect: true
    bind_tls: true
```

**说明**：
- `cn_vip` - 中国VIP节点（更快更稳定）
- `subdomain` - 您保留的子域名
- `inspect` - 启用流量检查
- `bind_tls` - 强制HTTPS

#### 步骤4：启动VIP固定隧道

命令行运行：
```bash
# 启动所有隧道
cpolar start-all

# 或启动单个隧道
cpolar start aiweb-frontend
```

#### 步骤5：获取永久固定地址

您的固定访问地址：
```
前端：https://aiweb-test.cpolar.cn
后端：https://aiweb-test-api.cpolar.cn
```

✅ **此地址永久固定，可放心分享！**

### VIP版本使用建议

#### 域名命名建议

好的命名示例：
- ✅ `aiweb-company` - 公司名称
- ✅ `mingsheng-demo` - 品牌演示
- ✅ `test-internal` - 内部测试
- ✅ `ai-platform` - 产品名称

避免的命名：
- ❌ `test123` - 无意义
- ❌ `aaa` - 太短
- ❌ `my-temporary-test` - 太长

#### 安全建议

VIP版本提供更多安全选项：

1. **IP白名单**（企业版）：
   ```yaml
   tunnels:
     aiweb-frontend:
       # ... 其他配置
       ip_restrictions:
         - allow:
           - 123.45.67.0/24
           - 98.76.54.32
   ```

2. **HTTP Basic认证**：
   ```yaml
   tunnels:
     aiweb-frontend:
       # ... 其他配置
       auth: "username:password"
   ```

3. **限制请求头**：
   ```yaml
   tunnels:
     aiweb-frontend:
       # ... 其他配置
       request_header:
         add:
           - "X-Custom-Header: MyValue"
   ```

---

## 管理操作

### 查看服务状态

打开浏览器访问：http://localhost:9200

### 停止所有服务

关闭所有命令行窗口即可。

### 重启服务

1. 关闭所有命令行窗口
2. 重新运行脚本：`🌐_一键生成cpolar链接_2025-12-21.bat`

### 查看日志

切换到对应的命令行窗口：
- **前端日志**：标题为「AIWEB-前端」
- **后端日志**：标题为「AIWEB-后端」
- **cpolar日志**：标题为「cpolar内网穿透」

---

## 常见问题

### ❓ 为什么每次启动地址都不一样？

**原因**：免费版使用随机域名。

**解决方案**：
- 方案1：每次启动后重新分享新地址
- 方案2：升级VIP版，获得固定域名

### ❓ 4小时后自动断开怎么办？

**原因**：免费版有4小时时长限制。

**解决方案**：
- 方案1：每4小时重启一次脚本
- 方案2：升级VIP版，无时长限制

### ❓ 访问速度慢怎么办？

**可能原因**：
1. 本地网络带宽不足
2. cpolar服务器负载高
3. 访问者网络问题

**优化建议**：
- ✅ 使用中国大陆节点（China或China VIP）
- ✅ 检查本地网络上传速度
- ✅ 升级VIP版，使用专线节点
- ✅ 压缩网站资源（图片、JS、CSS）

### ❓ 提示"连接被拒绝"？

**检查清单**：
- ✅ 确认AIWEB服务已启动（端口3002）
- ✅ 确认cpolar已启动
- ✅ 检查防火墙是否拦截
- ✅ 尝试重启所有服务

### ❓ 如何添加HTTPS？

**答**：cpolar自动配置HTTPS，无需手动操作。所有生成的 `https://xxx.cpolar.cn` 地址都是安全的HTTPS连接。

### ❓ 可以同时开启多个隧道吗？

**免费版**：最多2条隧道
**VIP版**：3-10条隧道（根据套餐）

### ❓ 如何关闭cpolar？

1. 关闭标题为「cpolar内网穿透」的命令行窗口
2. 或在任务管理器中结束 `cpolar.exe` 进程

### ❓ cpolar支持哪些协议？

- ✅ HTTP/HTTPS
- ✅ TCP
- ✅ TLS
- ✅ WebSocket

### ❓ 流量有限制吗？

**免费版和VIP版**：都是无限流量！

---

## 安全建议

### 🔒 访问控制

虽然cpolar提供了公网访问，但建议：

1. **不要分享给不信任的人**
2. **添加访问认证**（在AIWEB中配置）
3. **定期更换域名**（免费版）
4. **使用白名单IP**（VIP版支持）

### 🛡️ 数据安全

- ✅ cpolar使用HTTPS加密传输
- ✅ 数据仅转发，不存储
- ✅ 符合企业安全标准

---

## 技术支持

### 官方资源

- 📚 官方文档：https://www.cpolar.com/docs
- 💬 在线客服：网站右下角
- 📧 邮件支持：support@cpolar.com

### AIWEB相关

如有AIWEB项目问题，请查看项目中的其他文档。

---

## 总结

### 免费版适合

- ✅ 短期测试（1天内）
- ✅ 临时演示
- ✅ 偶尔使用

### VIP版适合

- ✅ 长期内测
- ✅ 正式部署
- ✅ 频繁使用
- ✅ 需要固定地址

### 下一步

1. 运行脚本：`🌐_一键生成cpolar链接_2025-12-21.bat`
2. 获取访问地址
3. 分享给测试人员
4. 开始内测！

---

**祝您使用愉快！🎉**
