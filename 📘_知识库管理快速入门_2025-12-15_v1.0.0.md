# 📘 知识库管理系统 - 快速入门指南

**版本:** v1.0.0  
**日期:** 2025-12-15  
**适用:** Phase 2 - 知识库管理系统

---

## 🎯 快速开始

### 访问知识库管理

**方式1: 直接访问**
```
http://localhost:5173/#/admin/knowledge-base
```

**方式2: 快捷脚本**
```bash
双击运行: 🚀_体验知识库管理系统.bat
```

**方式3: 导航菜单**
```
后台管理 → 知识库管理
```

---

## 📊 界面概览

### 顶部统计卡片 (4个)

```
┌─────────────┬─────────────┬─────────────┬─────────────┐
│ 📄 总知识条目 │ 👁️ 总浏览量  │ 🏷️ 分类/标签 │ 📈 平均准确率│
│  总数/激活/草稿│  浏览/点赞   │   6 / 8     │   100.0%   │
└─────────────┴─────────────┴─────────────┴─────────────┘
```

### 搜索与过滤栏

```
[搜索框] [分类▼] [类型▼] [状态▼] [标签▼] [搜索] [重置]
```

### 主内容Tab

```
┌──────────────────────────────────────────┐
│  知识列表 | 分类管理 | 标签管理 | 审计日志  │
└──────────────────────────────────────────┘
```

---

## 🔍 核心功能使用

### 1. 查看知识列表

**默认视图:**
- 显示所有激活状态的知识
- 按创建时间倒序排列
- 展示:ID、标题、分类、标签、状态、数据、作者、版本、时间

**操作按钮:**
```
[查看] - 查看知识详情(自动增加浏览量)
[编辑] - 编辑知识内容
[发布] - 将草稿发布为激活状态(仅草稿显示)
[删除] - 归档知识(软删除)
```

---

### 2. 搜索知识

#### 基础搜索
```
1. 在搜索框输入关键词
2. 点击"搜索"按钮
3. 查看匹配结果
```

**搜索范围:**
- ✅ 标题匹配
- ✅ 内容匹配
- ✅ 标签匹配

#### 高级过滤

**按分类筛选:**
```javascript
分类选项:
🔧 拧紧工艺
📦 设备管理
🏷️ 品牌型号
📚 技术文档
💼 案例库
❓ 常见问题
```

**按类型筛选:**
```javascript
类型选项:
📄 文档      - 技术文档、操作手册
❓ FAQ       - 常见问题解答
💼 案例      - 实际应用案例
📖 教程      - 操作教程、指南
📋 规范      - 技术标准、规范
```

**按状态筛选:**
```javascript
状态选项:
✅ 激活      - 已发布的知识
✏️ 草稿      - 编辑中的知识
📦 归档      - 已归档的知识
```

**按标签筛选:**
- 支持多选
- 满足任一标签即匹配

**组合搜索示例:**
```
搜索词: "拧紧参数"
分类: 拧紧工艺
类型: 教程
标签: 拧紧参数, 工艺优化

结果: 返回所有包含"拧紧参数"且属于拧紧工艺分类的教程类知识
```

---

### 3. 添加知识

#### 步骤

**1. 点击"添加知识"按钮**

**2. 填写表单**

```
┌─────────────────────────────────────────┐
│ 标题: [输入知识标题]  *必填              │
│ 类型: [文档▼]                           │
├─────────────────────────────────────────┤
│ 分类: [拧紧工艺▼]  *必填                │
│ 状态: ○激活 ●草稿                       │
├─────────────────────────────────────────┤
│ 标签: [选择或创建标签]                  │
│ 作者: [系统管理员]                      │
├─────────────────────────────────────────┤
│ 内容: (支持Markdown)  *必填             │
│ ┌─────────────────────────────────────┐ │
│ │ # 知识标题                           │ │
│ │                                     │ │
│ │ ## 章节1                            │ │
│ │ 内容...                             │ │
│ │                                     │ │
│ └─────────────────────────────────────┘ │
└─────────────────────────────────────────┘
```

**3. 点击"保存"**
- 系统自动生成ID
- 自动设置版本号为1
- 记录创建时间和创建者
- 添加到审计日志

---

### 4. 编辑知识

#### 步骤

**1. 在知识列表找到目标知识**

**2. 点击"编辑"按钮**

**3. 修改表单内容**
- 标题、内容、类型、分类都可修改
- 添加或删除标签
- 修改状态

**4. 点击"保存"**
- 版本号自动+1
- 更新时间自动更新
- 记录更新者

**版本追踪示例:**
```
v1.0 → 创建知识 (2025-12-15 10:00)
v2.0 → 修改标题和内容 (2025-12-15 14:30)
v3.0 → 添加标签和更新分类 (2025-12-15 16:45)
```

---

### 5. 查看知识详情

#### 功能

**点击"查看"按钮后:**
- ✅ 弹出详情对话框
- ✅ 显示完整的元数据
- ✅ Markdown内容自动渲染
- ✅ 浏览量自动+1
- ✅ 记录到审计日志

**详情内容:**
```
┌─────────────────────────────────────────┐
│ ID: 1                  类型: 📄 文档     │
│ 标题: 拧紧力矩参数设置指南              │
├─────────────────────────────────────────┤
│ 分类: 🔧 拧紧工艺      状态: ✅ 激活    │
│ 标签: [拧紧参数] [工艺优化] [质量控制]  │
├─────────────────────────────────────────┤
│ 作者: 技术专家         版本: v1         │
│ 浏览量: 10            点赞数: 5         │
│ 使用次数: 3           准确率: 100%      │
├─────────────────────────────────────────┤
│ 创建: 2025-12-15 10:00                  │
│ 更新: 2025-12-15 10:00                  │
├─────────────────────────────────────────┤
│ 【内容】                                │
│ (Markdown渲染后的HTML)                  │
└─────────────────────────────────────────┘
```

---

### 6. 发布知识

#### 从草稿到激活

**场景:**
- 知识刚创建时默认为"草稿"状态
- 编辑完成后需要发布

**方式1: 列表快捷发布**
```
找到草稿状态的知识 → 点击"发布"按钮 → 即时激活
```

**方式2: 编辑时发布**
```
编辑知识 → 状态选择"激活" → 保存
```

**效果:**
- 状态变为"激活"
- 前台可见
- 搜索可见
- 智能体可调用

---

### 7. 删除知识

#### 软删除(归档)

**操作:**
```
点击"删除"按钮 → 确认对话框 → 点击"确定"
```

**结果:**
- 状态变为"归档"
- 列表默认不显示(需筛选"归档"状态才能看到)
- 数据保留,可恢复

**恢复归档的知识:**
```
1. 状态筛选选择"归档"
2. 找到要恢复的知识
3. 点击"编辑"
4. 状态改为"激活"
5. 保存
```

---

## 🏷️ 分类管理

### 切换到"分类管理"Tab

#### 查看分类列表

```
┌──┬────┬──────┬──────────┬────┬────────┬────┬────────┐
│ID│图标│ 名称 │   描述   │颜色│知识数量│排序│ 操作   │
├──┼────┼──────┼──────────┼────┼────────┼────┼────────┤
│1 │🔧 │拧紧工艺│拧紧工艺...│蓝色│   5    │ 1  │编辑|删除│
│2 │📦 │设备管理│设备管理...│绿色│   3    │ 2  │编辑|删除│
└──┴────┴──────┴──────────┴────┴────────┴────┴────────┘
```

#### 添加分类

**步骤:**
```
1. 点击"添加分类"
2. 填写表单:
   - 名称: [输入分类名称] *必填
   - 图标: [emoji图标,如🔧]
   - 颜色: [点击颜色选择器]
   - 描述: [简要描述]
   - 排序: [数字,决定显示顺序]
3. 点击"保存"
```

**示例:**
```
名称: 维护保养
图标: 🛠️
颜色: #FF6B6B
描述: 设备维护和保养相关知识
排序: 7
```

#### 编辑分类

```
点击"编辑" → 修改内容 → 保存
```

**注意:** 修改分类会影响所有使用该分类的知识

#### 删除分类

**检查机制:**
```
if (该分类下有知识) {
  提示: "该分类下还有知识条目,无法删除"
  操作: 阻止删除
} else {
  确认对话框 → 删除
}
```

**建议流程:**
```
1. 先将该分类下的知识移到其他分类
2. 确认分类下知识数量为0
3. 再删除分类
```

---

## 🏷️ 标签管理

### 切换到"标签管理"Tab

#### 查看标签列表

```
┌──┬────────┬────────┬────┬────────┐
│ID│  标签  │使用次数│颜色│ 操作   │
├──┼────────┼────────┼────┼────────┤
│1 │拧紧参数│   5    │蓝色│编辑|删除│
│2 │故障诊断│   3    │红色│编辑|删除│
└──┴────────┴────────┴────┴────────┘
```

**使用次数:** 自动统计使用该标签的激活状态知识数量

#### 添加标签

```
1. 点击"添加标签"
2. 填写:
   - 名称: [标签名称] *必填
   - 颜色: [选择颜色]
3. 保存
```

#### 在添加知识时创建标签

**直接创建:**
```
在知识编辑表单的"标签"字段:
1. 输入新标签名称
2. 回车
3. 系统自动创建标签并添加到知识
```

---

## 📋 审计日志

### 切换到"审计日志"Tab

#### 查看操作记录

```
┌──┬────┬────────┬────┬──────────────┬────┬──────────┐
│ID│操作│实体类型│ID  │    详情      │用户│   时间   │
├──┼────┼────────┼────┼──────────────┼────┼──────────┤
│1 │创建│knowledge│1   │创建知识:拧紧..│管理│10:00:00 │
│2 │查看│knowledge│1   │浏览知识:拧紧..│用户│10:05:00 │
│3 │更新│knowledge│1   │更新知识:v1→v2│管理│10:15:00 │
└──┴────┴────────┴────┴──────────────┴────┴──────────┘
```

#### 操作类型

```
✅ 创建 (create)   - 绿色标签
⚠️  更新 (update)   - 橙色标签
❌ 删除 (delete)   - 红色标签
👁️  查看 (view)     - 蓝色标签
🎯 使用 (use)      - 紫色标签(智能体使用)
```

#### 用途

**1. 追踪知识变更**
- 谁创建了这个知识?
- 什么时候更新的?
- 修改了什么内容?

**2. 用户行为分析**
- 哪些知识最受欢迎?
- 用户主要查看什么类型的知识?
- 智能体使用频率如何?

**3. 问题排查**
- 知识为什么被删除?
- 谁修改了这个知识?
- 某个时间段发生了什么操作?

---

## 📤 数据导入导出

### 导出数据

#### 步骤
```
1. 点击"导出数据"按钮
2. 浏览器自动下载JSON文件
3. 文件名: knowledge-base-2025-12-15.json
```

#### 导出内容
```json
{
  "version": "1.0.0",
  "exportTime": "2025-12-15T10:00:00.000Z",
  "entries": [...],      // 所有知识条目
  "categories": [...],   // 分类数据
  "tags": [...],         // 标签数据
  "statistics": {...}    // 统计数据
}
```

#### 用途
- ✅ 数据备份
- ✅ 跨环境迁移
- ✅ 团队共享
- ✅ 版本归档

---

### 导入数据

#### 步骤
```
1. 点击"导入数据"按钮
2. 选择JSON文件
3. 系统自动解析和验证
4. 成功提示或错误信息
```

#### 导入策略

**合并导入:**
- 新知识追加到现有列表
- 相同ID的知识保留原有数据
- 新分类和标签自动添加

**覆盖导入:**
- 清空现有数据
- 完全使用导入的数据

**当前默认:** 合并导入

#### 错误处理

**常见错误:**
```
❌ "导入失败: Invalid JSON" 
   → 文件格式错误,不是有效的JSON

❌ "导入失败: Missing required fields"
   → 数据结构不完整

❌ "导入失败: Version mismatch"
   → 版本不兼容
```

---

## 💡 高级技巧

### 1. Markdown内容编写

**支持的语法:**

```markdown
# 一级标题
## 二级标题
### 三级标题

**粗体文本**
*斜体文本*

- 无序列表项1
- 无序列表项2

1. 有序列表项1
2. 有序列表项2

`行内代码`

\`\`\`javascript
// 代码块
function hello() {
  console.log('Hello')
}
\`\`\`

[链接文本](https://example.com)

> 引用文本
```

**预览效果:**
- 在知识详情中自动渲染为HTML
- 保留Markdown格式便于编辑

---

### 2. 标签命名规范

**建议:**
```
✅ 使用简短、明确的名称
✅ 采用一致的命名风格
✅ 避免重复和近义词

示例:
✅ "拧紧参数"
✅ "故障诊断"
✅ "设备选型"

❌ "拧紧的参数"
❌ "故障的诊断方法"
❌ "如何选择设备"
```

---

### 3. 知识组织最佳实践

#### 分类策略
```
一级分类(6个):
🔧 拧紧工艺    → 工艺相关知识
📦 设备管理    → 设备和资产管理
🏷️ 品牌型号    → 产品数据库
📚 技术文档    → 标准和规范
💼 案例库      → 实际应用案例
❓ 常见问题    → FAQ
```

#### 标签策略
```
按主题: 拧紧参数、故障诊断、设备选型
按场景: 工艺优化、质量控制、安全规范
按阶段: 设计、实施、维护、优化
```

#### 知识类型选择
```
📄 文档      → 技术说明书、操作手册、标准文档
❓ FAQ       → 常见问题、快速答疑
💼 案例      → 实际项目案例、成功故事
📖 教程      → 步骤指南、操作教程、培训材料
📋 规范      → 技术标准、行业规范、内部标准
```

---

### 4. 搜索优化

**提高搜索效果:**
```
1. 在标题中包含关键词
2. 在内容中使用准确的术语
3. 添加相关标签
4. 使用描述性的分类

示例:
❌ 标题: "参数设置"
✅ 标题: "拧紧力矩参数设置完整指南"

❌ 标签: [设置]
✅ 标签: [拧紧参数, 工艺优化, 质量控制]
```

---

### 5. 版本管理技巧

**重大更新时:**
```
1. 在内容开头添加更新说明
2. 使用Markdown列出变更内容
3. 保留原始创建信息

示例:
---
## 更新记录

**v3.0** (2025-12-15)
- 新增:安全注意事项章节
- 修改:参数设置步骤优化
- 删除:过时的品牌信息

**v2.0** (2025-12-10)
- 新增:常见问题解答

**v1.0** (2025-12-01)
- 初始版本
---
```

---

## 🔗 API使用 (开发者)

### 在代码中使用知识库

```javascript
import useKnowledgeBase from '@/store/knowledgeBase'

const kb = useKnowledgeBase()

// 搜索知识
const results = kb.searchKnowledge('拧紧参数', {
  category: 1,           // 拧紧工艺
  type: 'tutorial',      // 教程类型
  status: 'active',      // 激活状态
  tags: ['工艺优化'],    // 标签过滤
  sortBy: 'relevance'    // 按相关度排序
})

// 添加知识
const newId = kb.addKnowledge({
  title: '新知识标题',
  content: '# 内容\n...',
  type: 'document',
  category: 1,
  tags: ['标签1', '标签2'],
  status: 'draft',
  author: '作者名称'
})

// 记录智能体使用
kb.recordAgentUsage(knowledgeId, agentId)

// 获取推荐知识
const recommended = kb.recommendKnowledge(userId, 10)

// 相似知识推荐
const similar = kb.similaritySearch(knowledgeId, 5)
```

---

## 🎯 常见问题

### Q1: 知识数量有限制吗?
**A:** 当前使用LocalStorage,建议不超过500条。生产环境需使用真实数据库。

### Q2: 如何批量导入知识?
**A:** 
1. 准备JSON格式文件(参考导出格式)
2. 使用"导入数据"功能
3. 或编写脚本调用API批量添加

### Q3: 删除的知识可以恢复吗?
**A:** 可以!删除是软删除(归档),通过编辑改回激活状态即可。

### Q4: 如何让智能体使用知识库?
**A:** 
1. 在智能体代码中调用 `kb.searchKnowledge()`
2. 使用返回的知识内容
3. 调用 `kb.recordAgentUsage()` 记录使用

### Q5: 支持全文搜索吗?
**A:** 支持!在搜索框输入关键词,会搜索标题、内容和标签。

---

## 📚 相关文档

- **完成报告:** `✅_知识库管理系统Phase2完成_2025-12-15.md`
- **设计方案:** `📘_企业级智能体中央管理平台设计方案_2025-12-15_v1.0.0.md`
- **快速体验:** 运行 `🚀_体验知识库管理系统.bat`

---

**祝您使用愉快!** 🎉

如有问题,请查看完整文档或联系技术支持团队。
